!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports):"function"==typeof define&&define.amd?define(["exports"],e):e(t.zrender={})}(this,function(t){"use strict";function e(t,e){"createCanvas"===t&&(Ir=null),Dr[t]=e}function i(t){if(null==t||"object"!=typeof t)return t;var e=t,n=Sr.call(t);if("[object Array]"===n){if(!E(t)){e=[];for(var r=0,o=t.length;r<o;r++)e[r]=i(t[r])}}else if(Tr[n]){if(!E(t)){var s=t.constructor;if(t.constructor.from)e=s.from(t);else{e=new s(t.length);for(var r=0,o=t.length;r<o;r++)e[r]=i(t[r])}}}else if(!kr[n]&&!E(t)&&!k(t)){e={};for(var a in t)t.hasOwnProperty(a)&&(e[a]=i(t[a]))}return e}function n(t,e,r){if(!x(e)||!x(t))return r?i(e):t;for(var o in e)if(e.hasOwnProperty(o)){var s=t[o],a=e[o];!x(a)||!x(s)||_(a)||_(s)||k(a)||k(s)||w(a)||w(s)||E(a)||E(s)?!r&&o in t||(t[o]=i(e[o],!0)):n(s,a,r)}return t}function r(t,e){for(var i=t[0],r=1,o=t.length;r<o;r++)i=n(i,t[r],e);return i}function o(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i]);return t}function s(){return Ir||(Ir=Er().getContext("2d")),Ir}function a(t,e){if(t){if(t.indexOf)return t.indexOf(e);for(var i=0,n=t.length;i<n;i++)if(t[i]===e)return i}return-1}function h(t){if(t)return"string"!=typeof t&&"number"==typeof t.length}function l(t,e,i){if(t&&e)if(t.forEach&&t.forEach===Cr)t.forEach(e,i);else if(t.length===+t.length)for(var n=0,r=t.length;n<r;n++)e.call(i,t[n],n,t);else for(var o in t)t.hasOwnProperty(o)&&e.call(i,t[o],o,t)}function u(t,e,i){if(t&&e){if(t.map&&t.map===Lr)return t.map(e,i);for(var n=[],r=0,o=t.length;r<o;r++)n.push(e.call(i,t[r],r,t));return n}}function c(t,e,i,n){if(t&&e){if(t.reduce&&t.reduce===zr)return t.reduce(e,i,n);for(var r=0,o=t.length;r<o;r++)i=e.call(n,i,t[r],r,t);return i}}function f(t,e,i){if(t&&e){if(t.filter&&t.filter===Ar)return t.filter(e,i);for(var n=[],r=0,o=t.length;r<o;r++)e.call(i,t[r],r,t)&&n.push(t[r]);return n}}function d(t,e,i){if(t&&e)for(var n=0,r=t.length;n<r;n++)if(e.call(i,t[n],n,t))return t[n]}function p(t,e){var i=Pr.call(arguments,2);return function(){return t.apply(e,i.concat(Pr.call(arguments)))}}function g(t){var e=Pr.call(arguments,1);return function(){return t.apply(this,e.concat(Pr.call(arguments)))}}function _(t){return"[object Array]"===Sr.call(t)}function m(t){return"function"==typeof t}function y(t){return"[object String]"===Sr.call(t)}function v(t){return!isNaN(parseFloat(t))&&isFinite(t)}function x(t){var e=typeof t;return"function"===e||!!t&&"object"===e}function w(t){return!!kr[Sr.call(t)]}function b(t){return!!Tr[Sr.call(t)]}function k(t){return"object"==typeof t&&"number"==typeof t.nodeType&&"object"==typeof t.ownerDocument}function T(t){return t!==t}function S(t){for(var e=0,i=arguments.length;e<i;e++)if(null!=arguments[e])return arguments[e]}function M(t,e){return null!=t?t:e}function C(t,e,i){return null!=t?t:null!=e?e:i}function A(){return Function.call.apply(Pr,arguments)}function P(t){if("number"==typeof t)return[t,t,t,t];var e=t.length;return 2===e?[t[0],t[1],t[0],t[1]]:3===e?[t[0],t[1],t[2],t[1]]:t}function L(t,e){if(!t)throw new Error(e)}function z(t){return null==t?null:"function"==typeof t.trim?t.trim():t.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"")}function D(t){t[Br]=!0}function E(t){return t[Br]}function I(t){function e(t,e){i?n.set(t,e):n.set(e,t)}var i=_(t);this.data={};var n=this;t instanceof I?t.each(e):t&&l(t,e)}function B(t){return new I(t)}function O(t,e){for(var i=new t.constructor(t.length+e.length),n=0;n<t.length;n++)i[n]=t[n];var r=t.length;for(n=0;n<e.length;n++)i[n+r]=e[n];return i}function R(){}function F(t,e,i){return(e-t)*i+t}function H(t,e,i){return i>.5?e:t}function N(t,e,i,n,r){var o=t.length;if(1===r)for(a=0;a<o;a++)n[a]=F(t[a],e[a],i);else for(var s=o&&t[0].length,a=0;a<o;a++)for(var h=0;h<s;h++)n[a][h]=F(t[a][h],e[a][h],i)}function W(t,e,i){var n=t.length,r=e.length;if(n!==r)if(n>r)t.length=r;else for(s=n;s<r;s++)t.push(1===i?e[s]:Array.prototype.slice.call(e[s]));for(var o=t[0]&&t[0].length,s=0;s<t.length;s++)if(1===i)isNaN(t[s])&&(t[s]=e[s]);else for(var a=0;a<o;a++)isNaN(t[s][a])&&(t[s][a]=e[s][a])}function V(t,e,i){if(t===e)return!0;var n=t.length;if(n!==e.length)return!1;if(1===i){for(o=0;o<n;o++)if(t[o]!==e[o])return!1}else for(var r=t[0].length,o=0;o<n;o++)for(var s=0;s<r;s++)if(t[o][s]!==e[o][s])return!1;return!0}function X(t,e,i,n,r,o,s,a,h){var l=t.length;if(1===h)for(c=0;c<l;c++)a[c]=q(t[c],e[c],i[c],n[c],r,o,s);else for(var u=t[0].length,c=0;c<l;c++)for(var f=0;f<u;f++)a[c][f]=q(t[c][f],e[c][f],i[c][f],n[c][f],r,o,s)}function q(t,e,i,n,r,o,s){var a=.5*(i-t),h=.5*(n-e);return(2*(e-i)+a+h)*s+(-3*(e-i)-2*a-h)*o+a*r+e}function j(t){if(h(t)){var e=t.length;if(h(t[0])){for(var i=[],n=0;n<e;n++)i.push(Array.prototype.slice.call(t[n]));return i}return Array.prototype.slice.call(t)}return t}function Y(t){return t[0]=Math.floor(t[0]),t[1]=Math.floor(t[1]),t[2]=Math.floor(t[2]),"rgba("+t.join(",")+")"}function U(t){var e=t[t.length-1].value;return h(e&&e[0])?2:1}function G(t){return parseInt(t,10)}function Q(t,e){function i(){}var n=t.prototype;i.prototype=e.prototype,t.prototype=new i;for(var r in n)n.hasOwnProperty(r)&&(t.prototype[r]=n[r]);t.prototype.constructor=t,t.superClass=e}function Z(t,e,i){K(t="prototype"in t?t.prototype:t,e="prototype"in e?e.prototype:e,i)}function $(t,e,i){let n=new e(i);for(let e in n)n.hasOwnProperty(e)&&(t[e]=n[e])}function K(t,e,i){for(var n in e)e.hasOwnProperty(n)&&(i?null!=e[n]:null==t[n])&&(t[n]=e[n]);return t}function J(t,e,i=[]){for(let n in e)if(e.hasOwnProperty(n)){if(i&&i.length&&-1!=i.indexOf(n))continue;t[n]=e[n]}}function tt(t,e){var i=new Rr(2);return null==t&&(t=0),null==e&&(e=0),i[0]=t,i[1]=e,i}function et(t,e){return t[0]=e[0],t[1]=e[1],t}function it(t){var e=new Rr(2);return e[0]=t[0],e[1]=t[1],e}function nt(t,e,i){return t[0]=e,t[1]=i,t}function rt(t,e,i){return t[0]=e[0]+i[0],t[1]=e[1]+i[1],t}function ot(t,e,i,n){return t[0]=e[0]+i[0]*n,t[1]=e[1]+i[1]*n,t}function st(t,e,i){return t[0]=e[0]-i[0],t[1]=e[1]-i[1],t}function at(t){return Math.sqrt(ht(t))}function ht(t){return t[0]*t[0]+t[1]*t[1]}function lt(t,e,i){return t[0]=e[0]*i[0],t[1]=e[1]*i[1],t}function ut(t,e,i){return t[0]=e[0]/i[0],t[1]=e[1]/i[1],t}function ct(t,e){return t[0]*e[0]+t[1]*e[1]}function ft(t,e,i){return t[0]=e[0]*i,t[1]=e[1]*i,t}function dt(t,e){var i=at(e);return 0===i?(t[0]=0,t[1]=0):(t[0]=e[0]/i,t[1]=e[1]/i),t}function pt(t,e){return Math.sqrt((t[0]-e[0])*(t[0]-e[0])+(t[1]-e[1])*(t[1]-e[1]))}function gt(t,e){return(t[0]-e[0])*(t[0]-e[0])+(t[1]-e[1])*(t[1]-e[1])}function _t(t,e){return t[0]=-e[0],t[1]=-e[1],t}function mt(t,e,i,n){return t[0]=e[0]+n*(i[0]-e[0]),t[1]=e[1]+n*(i[1]-e[1]),t}function yt(t,e,i){var n=e[0],r=e[1];return t[0]=i[0]*n+i[2]*r+i[4],t[1]=i[1]*n+i[3]*r+i[5],t}function vt(t,e,i){return t[0]=Math.min(e[0],i[0]),t[1]=Math.min(e[1],i[1]),t}function xt(t,e,i){return t[0]=Math.max(e[0],i[0]),t[1]=Math.max(e[1],i[1]),t}function wt(t,e){let i=t._$eventProcessor;i&&i.afterListenerChanged&&i.afterListenerChanged(e)}function bt(t,e){let i=t._$eventProcessor;return null!=e&&i&&i.normalizeQuery&&(e=i.normalizeQuery(e)),e}function kt(t,e,i,n,r,o){let s=t._$handlers;if("function"==typeof i&&(r=n,n=i,i=null),!n||!e)return t;i=bt(t,i),s[e]||(s[e]=[]);for(let i=0;i<s[e].length;i++)if(s[e][i].h===n)return t;let a={h:n,one:o,query:i,ctx:r||t,callAtLast:n.zrEventfulCallAtLast},h=s[e].length-1,l=s[e][h];return l&&l.callAtLast?s[e].splice(h,0,a):s[e].push(a),wt(t,e),t}function Tt(t,e,i,n,r,o){var s=n+"-"+r,a=t.length;if(o.hasOwnProperty(s))return o[s];if(1===e){var h=Math.round(Math.log((1<<a)-1&~r)/jr);return t[i][h]}for(var l=n|1<<i,u=i+1;n&1<<u;)u++;for(var c=0,f=0,d=0;f<a;f++){var p=1<<f;p&r||(c+=(d%2?-1:1)*t[i][f]*Tt(t,e-1,u,l,r|p,o),d++)}return o[s]=c,c}function St(t,e){var i=[[t[0],t[1],1,0,0,0,-e[0]*t[0],-e[0]*t[1]],[0,0,0,t[0],t[1],1,-e[1]*t[0],-e[1]*t[1]],[t[2],t[3],1,0,0,0,-e[2]*t[2],-e[2]*t[3]],[0,0,0,t[2],t[3],1,-e[3]*t[2],-e[3]*t[3]],[t[4],t[5],1,0,0,0,-e[4]*t[4],-e[4]*t[5]],[0,0,0,t[4],t[5],1,-e[5]*t[4],-e[5]*t[5]],[t[6],t[7],1,0,0,0,-e[6]*t[6],-e[6]*t[7]],[0,0,0,t[6],t[7],1,-e[7]*t[6],-e[7]*t[7]]],n={},r=Tt(i,8,0,0,0,n);if(0!==r){for(var o=[],s=0;s<8;s++)for(var a=0;a<8;a++)null==o[a]&&(o[a]=0),o[a]+=((s+a)%2?-1:1)*Tt(i,7,0===s?1:0,1<<s,1<<a,n)/r*e[s];return function(t,e,i){var n=e*o[6]+i*o[7]+1;t[0]=(e*o[0]+i*o[1]+o[2])/n,t[1]=(e*o[3]+i*o[4]+o[5])/n}}}function Mt(t,e,i,n){return i=i||{},n||!br.canvasSupported?Ct(t,e,i):br.browser.firefox&&null!=e.layerX&&e.layerX!==e.offsetX?(i.zrX=e.layerX,i.zrY=e.layerY):null!=e.offsetX?(i.zrX=e.offsetX,i.zrY=e.offsetY):Ct(t,e,i),i}function Ct(t,e,i){if(t.getBoundingClientRect&&br.domSupported){var n=e.clientX,r=e.clientY;if("CANVAS"===t.nodeName.toUpperCase()){var o=t.getBoundingClientRect();return i.zrX=n-o.left,void(i.zrY=r-o.top)}var s=t[Gr]||(t[Gr]={}),a=Pt(At(t,s),s);if(a)return a(Qr,n,r),i.zrX=Qr[0],void(i.zrY=Qr[1])}i.zrX=i.zrY=0}function At(t,e){var i=e.markers;if(i)return i;i=e.markers=[];for(var n=["left","right"],r=["top","bottom"],o=0;o<4;o++){var s=document.createElement("div"),a=o%2,h=(o>>1)%2;s.style.cssText=["position:absolute","visibility: hidden","padding: 0","margin: 0","border-width: 0","width:0","height:0",n[a]+":0",r[h]+":0",n[1-a]+":auto",r[1-h]+":auto",""].join("!important;"),t.appendChild(s),i.push(s)}return i}function Pt(t,e){for(var i=e.transformer,n=e.srcCoords,r=!0,o=[],s=[],a=0;a<4;a++){var h=t[a].getBoundingClientRect(),l=2*a,u=h.left,c=h.top;o.push(u,c),r&=n&&u===n[l]&&c===n[l+1],s.push(t[a].offsetLeft,t[a].offsetTop)}return r?i:(e.srcCoords=o,e.transformer=St(o,s))}function Lt(t){return t||window.event}function zt(t,e,i){if(null!=(e=Lt(e)).zrX)return e;var n=e.type;if(n&&n.indexOf("touch")>=0){var r="touchend"!==n?e.targetTouches[0]:e.changedTouches[0];r&&Mt(t,r,e,i)}else Mt(t,e,e,i),e.zrDelta=e.wheelDelta?e.wheelDelta/120:-(e.detail||0)/3;var o=e.button;return null==e.which&&void 0!==o&&Ur.test(e.type)&&(e.which=1&o?1:2&o?3:4&o?2:0),e}function Dt(t,e,i){Yr?t.addEventListener(e,i):t.attachEvent("on"+e,i)}function Et(t,e,i){Yr?t.removeEventListener(e,i):t.detachEvent("on"+e,i)}function It(t){var e=t[1][0]-t[0][0],i=t[1][1]-t[0][1];return Math.sqrt(e*e+i*i)}function Bt(t){return[(t[0][0]+t[1][0])/2,(t[0][1]+t[1][1])/2]}function Ot(t,e,i){return{type:t,event:i,target:e.target,topTarget:e.topTarget,cancelBubble:!1,offsetX:i.zrX,offsetY:i.zrY,gestureEvent:i.gestureEvent,pinchX:i.pinchX,pinchY:i.pinchY,pinchScale:i.pinchScale,wheelDelta:i.zrDelta,zrByTouch:i.zrByTouch,zrIsFromLocal:i.zrIsFromLocal,which:i.which,stop:Rt}}function Rt(t){Zr(this.event)}function Ft(){}function Ht(t,e){this.trigger(t,Ot(t,{},e))}function Nt(t,e,i){if(t[t.rectHover?"rectContain":"contain"](e,i)){for(var n,r=t;r;){if(r.clipPath&&!r.clipPath.contain(e,i))return!1;r.silent&&(n=!0),r=r.parent}return!n||to}return!1}function Wt(t){var e=t.isSilent("pagemousemove")&&t.isSilent("pagemouseup")&&t.isSilent("pagekeydown")&&t.isSilent("pagekeyup"),i=t.proxy;i&&i.togglePageEvent&&i.togglePageEvent(!e)}function Vt(){var t=new no(6);return Xt(t),t}function Xt(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t[4]=0,t[5]=0,t}function qt(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t}function jt(t,e,i){var n=e[0]*i[0]+e[2]*i[1],r=e[1]*i[0]+e[3]*i[1],o=e[0]*i[2]+e[2]*i[3],s=e[1]*i[2]+e[3]*i[3],a=e[0]*i[4]+e[2]*i[5]+e[4],h=e[1]*i[4]+e[3]*i[5]+e[5];return t[0]=n,t[1]=r,t[2]=o,t[3]=s,t[4]=a,t[5]=h,t}function Yt(t,e,i){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4]+i[0],t[5]=e[5]+i[1],t}function Ut(t,e,i){var n=e[0],r=e[2],o=e[4],s=e[1],a=e[3],h=e[5],l=Math.sin(i),u=Math.cos(i);return t[0]=n*u+s*l,t[1]=-n*l+s*u,t[2]=r*u+a*l,t[3]=-r*l+u*a,t[4]=u*o+l*h,t[5]=u*h-l*o,t}function Gt(t,e,i){var n=i[0],r=i[1];return t[0]=e[0]*n,t[1]=e[1]*r,t[2]=e[2]*n,t[3]=e[3]*r,t[4]=e[4]*n,t[5]=e[5]*r,t}function Qt(t,e){var i=e[0],n=e[2],r=e[4],o=e[1],s=e[3],a=e[5],h=i*s-o*n;return h?(h=1/h,t[0]=s*h,t[1]=-o*h,t[2]=-n*h,t[3]=i*h,t[4]=(n*a-s*r)*h,t[5]=(o*r-i*a)*h,t):null}function Zt(t){var e=Vt();return qt(e,t),e}function $t(t){return t>so||t<-so}function Kt(t){return t=Math.round(t),t<0?0:t>255?255:t}function Jt(t){return t=Math.round(t),t<0?0:t>360?360:t}function te(t){return t<0?0:t>1?1:t}function ee(t){return Kt(t.length&&"%"===t.charAt(t.length-1)?parseFloat(t)/100*255:parseInt(t,10))}function ie(t){return te(t.length&&"%"===t.charAt(t.length-1)?parseFloat(t)/100:parseFloat(t))}function ne(t,e,i){return i<0?i+=1:i>1&&(i-=1),6*i<1?t+(e-t)*i*6:2*i<1?e:3*i<2?t+(e-t)*(2/3-i)*6:t}function re(t,e,i){return t+(e-t)*i}function oe(t,e,i,n,r){return t[0]=e,t[1]=i,t[2]=n,t[3]=r,t}function se(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t}function ae(t,e){bo&&se(bo,e),bo=wo.put(t,bo||e.slice())}function he(t,e){if(t){e=e||[];var i=wo.get(t);if(i)return se(e,i);var n=(t+="").replace(/ /g,"").toLowerCase();if(n in xo)return se(e,xo[n]),ae(t,e),e;if("#"!==n.charAt(0)){var r=n.indexOf("("),o=n.indexOf(")");if(-1!==r&&o+1===n.length){var s=n.substr(0,r),a=n.substr(r+1,o-(r+1)).split(","),h=1;switch(s){case"rgba":if(4!==a.length)return void oe(e,0,0,0,1);h=ie(a.pop());case"rgb":return 3!==a.length?void oe(e,0,0,0,1):(oe(e,ee(a[0]),ee(a[1]),ee(a[2]),h),ae(t,e),e);case"hsla":return 4!==a.length?void oe(e,0,0,0,1):(a[3]=ie(a[3]),le(a,e),ae(t,e),e);case"hsl":return 3!==a.length?void oe(e,0,0,0,1):(le(a,e),ae(t,e),e);default:return}}oe(e,0,0,0,1)}else{if(4===n.length)return(l=parseInt(n.substr(1),16))>=0&&l<=4095?(oe(e,(3840&l)>>4|(3840&l)>>8,240&l|(240&l)>>4,15&l|(15&l)<<4,1),ae(t,e),e):void oe(e,0,0,0,1);if(7===n.length){var l=parseInt(n.substr(1),16);return l>=0&&l<=16777215?(oe(e,(16711680&l)>>16,(65280&l)>>8,255&l,1),ae(t,e),e):void oe(e,0,0,0,1)}}}}function le(t,e){var i=(parseFloat(t[0])%360+360)%360/360,n=ie(t[1]),r=ie(t[2]),o=r<=.5?r*(n+1):r+n-r*n,s=2*r-o;return e=e||[],oe(e,Kt(255*ne(s,o,i+1/3)),Kt(255*ne(s,o,i)),Kt(255*ne(s,o,i-1/3)),1),4===t.length&&(e[3]=t[3]),e}function ue(t){if(t){var e,i,n=t[0]/255,r=t[1]/255,o=t[2]/255,s=Math.min(n,r,o),a=Math.max(n,r,o),h=a-s,l=(a+s)/2;if(0===h)e=0,i=0;else{i=l<.5?h/(a+s):h/(2-a-s);var u=((a-n)/6+h/2)/h,c=((a-r)/6+h/2)/h,f=((a-o)/6+h/2)/h;n===a?e=f-c:r===a?e=1/3+u-f:o===a&&(e=2/3+c-u),e<0&&(e+=1),e>1&&(e-=1)}var d=[360*e,i,l];return null!=t[3]&&d.push(t[3]),d}}function ce(t,e){var i=he(t);if(i){for(var n=0;n<3;n++)i[n]=e<0?i[n]*(1-e)|0:(255-i[n])*e+i[n]|0,i[n]>255?i[n]=255:t[n]<0&&(i[n]=0);return me(i,4===i.length?"rgba":"rgb")}}function fe(t){var e=he(t);if(e)return((1<<24)+(e[0]<<16)+(e[1]<<8)+ +e[2]).toString(16).slice(1)}function de(t,e,i){if(e&&e.length&&t>=0&&t<=1){i=i||[];var n=t*(e.length-1),r=Math.floor(n),o=Math.ceil(n),s=e[r],a=e[o],h=n-r;return i[0]=Kt(re(s[0],a[0],h)),i[1]=Kt(re(s[1],a[1],h)),i[2]=Kt(re(s[2],a[2],h)),i[3]=te(re(s[3],a[3],h)),i}}function pe(t,e,i){if(e&&e.length&&t>=0&&t<=1){var n=t*(e.length-1),r=Math.floor(n),o=Math.ceil(n),s=he(e[r]),a=he(e[o]),h=n-r,l=me([Kt(re(s[0],a[0],h)),Kt(re(s[1],a[1],h)),Kt(re(s[2],a[2],h)),te(re(s[3],a[3],h))],"rgba");return i?{color:l,leftIndex:r,rightIndex:o,value:n}:l}}function ge(t,e,i,n){if(t=he(t))return t=ue(t),null!=e&&(t[0]=Jt(e)),null!=i&&(t[1]=ie(i)),null!=n&&(t[2]=ie(n)),me(le(t),"rgba")}function _e(t,e){if((t=he(t))&&null!=e)return t[3]=te(e),me(t,"rgba")}function me(t,e){if(t&&t.length){var i=t[0]+","+t[1]+","+t[2];return"rgba"!==e&&"hsva"!==e&&"hsla"!==e||(i+=","+t[3]),e+"("+i+")"}}function ye(t,e,i,n,r,o,s,a){function h(){--u||o&&o()}y(n)?(o=r,r=n,n=0):m(r)?(o=r,r="linear",n=0):m(n)?(o=n,n=0):m(i)?(o=i,i=500):i||(i=500),t.stopAnimation(),ve(t,"",t,e,i,n,a);let l=t.animationProcessList.slice(),u=l.length;u||o&&o();for(let t=0;t<l.length;t++)l[t].done(h).start(r,s)}function ve(t,e,i,n,r,o,s){let a={},l=0;for(let u in n)n.hasOwnProperty(u)&&(null!=i[u]?x(n[u])&&!h(n[u])?ve(t,e?e+"."+u:u,i[u],n[u],r,o,s):(s?(a[u]=i[u],xe(t,e,u,n[u])):a[u]=n[u],l++):null==n[u]||s||xe(t,e,u,n[u]));l>0&&t.animate(e,!1).when(null==r?500:r,a).delay(o||0)}function xe(t,e,i,n){if(e){let r={};r[e]={},r[e][i]=n,t.attr(r)}else t.attr(i,n)}function we(t){for(var e=0;t>=Ho;)e|=1&t,t>>=1;return t+e}function be(t,e,i,n){var r=e+1;if(r===i)return 1;if(n(t[r++],t[e])<0){for(;r<i&&n(t[r],t[r-1])<0;)r++;ke(t,e,r)}else for(;r<i&&n(t[r],t[r-1])>=0;)r++;return r-e}function ke(t,e,i){for(i--;e<i;){var n=t[e];t[e++]=t[i],t[i--]=n}}function Te(t,e,i,n,r){for(n===e&&n++;n<i;n++){for(var o,s=t[n],a=e,h=n;a<h;)r(s,t[o=a+h>>>1])<0?h=o:a=o+1;var l=n-a;switch(l){case 3:t[a+3]=t[a+2];case 2:t[a+2]=t[a+1];case 1:t[a+1]=t[a];break;default:for(;l>0;)t[a+l]=t[a+l-1],l--}t[a]=s}}function Se(t,e,i,n,r,o){var s=0,a=0,h=1;if(o(t,e[i+r])>0){for(a=n-r;h<a&&o(t,e[i+r+h])>0;)s=h,(h=1+(h<<1))<=0&&(h=a);h>a&&(h=a),s+=r,h+=r}else{for(a=r+1;h<a&&o(t,e[i+r-h])<=0;)s=h,(h=1+(h<<1))<=0&&(h=a);h>a&&(h=a);var l=s;s=r-h,h=r-l}for(s++;s<h;){var u=s+(h-s>>>1);o(t,e[i+u])>0?s=u+1:h=u}return h}function Me(t,e,i,n,r,o){var s=0,a=0,h=1;if(o(t,e[i+r])<0){for(a=r+1;h<a&&o(t,e[i+r-h])<0;)s=h,(h=1+(h<<1))<=0&&(h=a);h>a&&(h=a);var l=s;s=r-h,h=r-l}else{for(a=n-r;h<a&&o(t,e[i+r+h])>=0;)s=h,(h=1+(h<<1))<=0&&(h=a);h>a&&(h=a),s+=r,h+=r}for(s++;s<h;){var u=s+(h-s>>>1);o(t,e[i+u])<0?h=u:s=u+1}return h}function Ce(t,e){function i(t,e){h[c]=t,l[c]=e,c+=1}function n(){for(;c>1;){var t=c-2;if(t>=1&&l[t-1]<=l[t]+l[t+1]||t>=2&&l[t-2]<=l[t]+l[t-1])l[t-1]<l[t+1]&&t--;else if(l[t]>l[t+1])break;o(t)}}function r(){for(;c>1;){var t=c-2;t>0&&l[t-1]<l[t+1]&&t--,o(t)}}function o(i){var n=h[i],r=l[i],o=h[i+1],u=l[i+1];l[i]=r+u,i===c-3&&(h[i+1]=h[i+2],l[i+1]=l[i+2]),c--;var f=Me(t[o],t,n,r,0,e);n+=f,0!==(r-=f)&&0!==(u=Se(t[n+r-1],t,o,u,u-1,e))&&(r<=u?s(n,r,o,u):a(n,r,o,u))}function s(i,n,r,o){var s=0;for(s=0;s<n;s++)f[s]=t[i+s];var a=0,h=r,l=i;if(t[l++]=t[h++],0!=--o){if(1===n){for(s=0;s<o;s++)t[l+s]=t[h+s];return void(t[l+o]=f[a])}for(var c,d,p,g=u;;){c=0,d=0,p=!1;do{if(e(t[h],f[a])<0){if(t[l++]=t[h++],d++,c=0,0==--o){p=!0;break}}else if(t[l++]=f[a++],c++,d=0,1==--n){p=!0;break}}while((c|d)<g);if(p)break;do{if(0!==(c=Me(t[h],f,a,n,0,e))){for(s=0;s<c;s++)t[l+s]=f[a+s];if(l+=c,a+=c,(n-=c)<=1){p=!0;break}}if(t[l++]=t[h++],0==--o){p=!0;break}if(0!==(d=Se(f[a],t,h,o,0,e))){for(s=0;s<d;s++)t[l+s]=t[h+s];if(l+=d,h+=d,0===(o-=d)){p=!0;break}}if(t[l++]=f[a++],1==--n){p=!0;break}g--}while(c>=No||d>=No);if(p)break;g<0&&(g=0),g+=2}if((u=g)<1&&(u=1),1===n){for(s=0;s<o;s++)t[l+s]=t[h+s];t[l+o]=f[a]}else{if(0===n)throw new Error;for(s=0;s<n;s++)t[l+s]=f[a+s]}}else for(s=0;s<n;s++)t[l+s]=f[a+s]}function a(i,n,r,o){var s=0;for(s=0;s<o;s++)f[s]=t[r+s];var a=i+n-1,h=o-1,l=r+o-1,c=0,d=0;if(t[l--]=t[a--],0!=--n){if(1===o){for(d=(l-=n)+1,c=(a-=n)+1,s=n-1;s>=0;s--)t[d+s]=t[c+s];return void(t[l]=f[h])}for(var p=u;;){var g=0,_=0,m=!1;do{if(e(f[h],t[a])<0){if(t[l--]=t[a--],g++,_=0,0==--n){m=!0;break}}else if(t[l--]=f[h--],_++,g=0,1==--o){m=!0;break}}while((g|_)<p);if(m)break;do{if(0!==(g=n-Me(f[h],t,i,n,n-1,e))){for(n-=g,d=(l-=g)+1,c=(a-=g)+1,s=g-1;s>=0;s--)t[d+s]=t[c+s];if(0===n){m=!0;break}}if(t[l--]=f[h--],1==--o){m=!0;break}if(0!==(_=o-Se(t[a],f,0,o,o-1,e))){for(o-=_,d=(l-=_)+1,c=(h-=_)+1,s=0;s<_;s++)t[d+s]=f[c+s];if(o<=1){m=!0;break}}if(t[l--]=t[a--],0==--n){m=!0;break}p--}while(g>=No||_>=No);if(m)break;p<0&&(p=0),p+=2}if((u=p)<1&&(u=1),1===o){for(d=(l-=n)+1,c=(a-=n)+1,s=n-1;s>=0;s--)t[d+s]=t[c+s];t[l]=f[h]}else{if(0===o)throw new Error;for(c=l-(o-1),s=0;s<o;s++)t[c+s]=f[s]}}else for(c=l-(o-1),s=0;s<o;s++)t[c+s]=f[s]}var h,l,u=No,c=0,f=[];h=[],l=[],this.mergeRuns=n,this.forceMergeRuns=r,this.pushRun=i}function Ae(t,e,i,n){i||(i=0),n||(n=t.length);var r=n-i;if(!(r<2)){var o=0;if(r<Ho)return o=be(t,i,n,e),void Te(t,i,n,i+o,e);var s=new Ce(t,e),a=we(r);do{if((o=be(t,i,n,e))<a){var h=r;h>a&&(h=a),Te(t,i,i+h,i+o,e),o=h}s.pushRun(i,o),s.mergeRuns(),r-=o,i+=o}while(0!==r);s.forceMergeRuns()}}function Pe(t,e,i){let n=null==e.x?0:e.x,r=null==e.x2?1:e.x2,o=null==e.y?0:e.y,s=null==e.y2?0:e.y2;return e.global||(n=n*i.width+i.x,r=r*i.width+i.x,o=o*i.height+i.y,s=s*i.height+i.y),n=isNaN(n)?0:n,r=isNaN(r)?1:r,o=isNaN(o)?0:o,s=isNaN(s)?0:s,t.createLinearGradient(n,o,r,s)}function Le(t,e,i){let n=i.width,r=i.height,o=Math.min(n,r),s=null==e.x?.5:e.x,a=null==e.y?.5:e.y,h=null==e.r?.5:e.r;return e.global||(s=s*n+i.x,a=a*r+i.y,h*=o),t.createRadialGradient(s,a,0,s,a,h)}function ze(t,e,i){let n=Er(),r=e.getWidth(),o=e.getHeight(),s=n.style;return s&&(s.position="absolute",s.left=0,s.top=0,s.width=r+"px",s.height=o+"px",n.setAttribute("data-zr-dom-id",t)),n.width=r*i,n.height=o*i,n}function De(t){if("string"==typeof t){var e=ts.get(t);return e&&e.image}return t}function Ee(t,e,i,n,r){if(t){if("string"==typeof t){if(e&&e.__zrImageSrc===t||!i)return e;var o=ts.get(t),s={hostEl:i,cb:n,cbPayload:r};return o?!Be(e=o.image)&&o.pending.push(s):((e=new Image).onload=e.onerror=Ie,ts.put(t,e.__cachedImgObj={image:e,pending:[s]}),e.src=e.__zrImageSrc=t),e}return t}return e}function Ie(){var t=this.__cachedImgObj;this.onload=this.onerror=this.__cachedImgObj=null;for(var e=0;e<t.pending.length;e++){var i=t.pending[e],n=i.cb;n&&n(this,i.cbPayload),i.hostEl.dirty()}t.pending.length=0}function Be(t){return t&&t.width&&t.height}function Oe(t,e){var i=t+":"+(e=e||os);if(es[i])return es[i];for(var n=(t+"").split("\n"),r=0,o=0,s=n.length;o<s;o++)r=Math.max(Ge(n[o],e).width,r);return is>ns&&(is=0,es={}),is++,es[i]=r,r}function Re(t,e,i,n,r,o,s,a){return s?He(t,e,i,n,r,o,s,a):Fe(t,e,i,n,r,o,a)}function Fe(t,e,i,n,r,o,s){var a=Qe(t,e,r,o,s),h=Oe(t,e);r&&(h+=r[1]+r[3]);var l=a.outerHeight,u=Ne(0,h,i),c=We(0,l,n),f=new Ro(u,c,h,l);return f.lineHeight=a.lineHeight,f}function He(t,e,i,n,r,o,s,a){var h=Ze(t,{rich:s,truncate:a,font:e,textAlign:i,textPadding:r,textLineHeight:o}),l=h.outerWidth,u=h.outerHeight,c=Ne(0,l,i),f=We(0,u,n);return new Ro(c,f,l,u)}function Ne(t,e,i){return"right"===i?t-=e:"center"===i&&(t-=e/2),t}function We(t,e,i){return"middle"===i?t-=e/2:"bottom"===i&&(t-=e),t}function Ve(t,e,i){var n=e.textPosition,r=e.textDistance,o=i.x,s=i.y;r=r||0;var a=i.height,h=i.width,l=a/2,u="left",c="top";switch(n){case"left":o-=r,s+=l,u="right",c="middle";break;case"right":o+=r+h,s+=l,c="middle";break;case"top":o+=h/2,s-=r,u="center",c="bottom";break;case"bottom":o+=h/2,s+=a+r,u="center";break;case"inside":o+=h/2,s+=l,u="center",c="middle";break;case"insideLeft":o+=r,s+=l,c="middle";break;case"insideRight":o+=h-r,s+=l,u="right",c="middle";break;case"insideTop":o+=h/2,s+=r,u="center";break;case"insideBottom":o+=h/2,s+=a-r,u="center",c="bottom";break;case"insideTopLeft":o+=r,s+=r;break;case"insideTopRight":o+=h-r,s+=r,u="right";break;case"insideBottomLeft":o+=r,s+=a-r,c="bottom";break;case"insideBottomRight":o+=h-r,s+=a-r,u="right",c="bottom"}return t=t||{},t.x=o,t.y=s,t.textAlign=u,t.textVerticalAlign=c,t}function Xe(t,e,i,n,r){if(!e)return"";var o=(t+"").split("\n");r=qe(e,i,n,r);for(var s=0,a=o.length;s<a;s++)o[s]=je(o[s],r);return o.join("\n")}function qe(t,e,i,n){(n=o({},n)).font=e;var i=M(i,"...");n.maxIterations=M(n.maxIterations,2);var r=n.minChar=M(n.minChar,0);n.cnCharWidth=Oe("国",e);var s=n.ascCharWidth=Oe("a",e);n.placeholder=M(n.placeholder,"");for(var a=t=Math.max(0,t-1),h=0;h<r&&a>=s;h++)a-=s;var l=Oe(i,e);return l>a&&(i="",l=0),a=t-l,n.ellipsis=i,n.ellipsisWidth=l,n.contentWidth=a,n.containerWidth=t,n}function je(t,e){var i=e.containerWidth,n=e.font,r=e.contentWidth;if(!i)return"";var o=Oe(t,n);if(o<=i)return t;for(var s=0;;s++){if(o<=r||s>=e.maxIterations){t+=e.ellipsis;break}var a=0===s?Ye(t,r,e.ascCharWidth,e.cnCharWidth):o>0?Math.floor(t.length*r/o):0;o=Oe(t=t.substr(0,a),n)}return""===t&&(t=e.placeholder),t}function Ye(t,e,i,n){for(var r=0,o=0,s=t.length;o<s&&r<e;o++){var a=t.charCodeAt(o);r+=0<=a&&a<=127?i:n}return o}function Ue(t){return Oe("国",t)}function Ge(t,e){return ss.measureText(t,e)}function Qe(t,e,i,n,r){null!=t&&(t+="");var o=M(n,Ue(e)),s=t?t.split("\n"):[],a=s.length*o,h=a,l=!0;if(i&&(h+=i[0]+i[2]),t&&r){l=!1;var u=r.outerHeight,c=r.outerWidth;if(null!=u&&h>u)t="",s=[];else if(null!=c)for(var f=qe(c-(i?i[1]+i[3]:0),e,r.ellipsis,{minChar:r.minChar,placeholder:r.placeholder}),d=0,p=s.length;d<p;d++)s[d]=je(s[d],f)}return{lines:s,height:a,outerHeight:h,lineHeight:o,canCacheByTextString:l}}function Ze(t,e){var i={lines:[],width:0,height:0};if(null!=t&&(t+=""),!t)return i;for(var n,r=rs.lastIndex=0;null!=(n=rs.exec(t));){var o=n.index;o>r&&$e(i,t.substring(r,o)),$e(i,n[2],n[1]),r=rs.lastIndex}r<t.length&&$e(i,t.substring(r,t.length));var s=i.lines,a=0,h=0,l=[],u=e.textPadding,c=e.truncate,f=c&&c.outerWidth,d=c&&c.outerHeight;u&&(null!=f&&(f-=u[1]+u[3]),null!=d&&(d-=u[0]+u[2]));for(L=0;L<s.length;L++){for(var p=s[L],g=0,_=0,m=0;m<p.tokens.length;m++){var y=(z=p.tokens[m]).styleName&&e.rich[z.styleName]||{},v=z.textPadding=y.textPadding,x=z.font=y.font||e.font,w=z.textHeight=M(y.textHeight,Ue(x));if(v&&(w+=v[0]+v[2]),z.height=w,z.lineHeight=C(y.textLineHeight,e.textLineHeight,w),z.textAlign=y&&y.textAlign||e.textAlign,z.textVerticalAlign=y&&y.textVerticalAlign||"middle",null!=d&&a+z.lineHeight>d)return{lines:[],width:0,height:0};z.textWidth=Oe(z.text,x);var b=y.textWidth,k=null==b||"auto"===b;if("string"==typeof b&&"%"===b.charAt(b.length-1))z.percentWidth=b,l.push(z),b=0;else{if(k){b=z.textWidth;var T=y.textBackgroundColor,S=T&&T.image;S&&Be(S=De(S))&&(b=Math.max(b,S.width*w/S.height))}var A=v?v[1]+v[3]:0;b+=A;var P=null!=f?f-_:null;null!=P&&P<b&&(!k||P<A?(z.text="",z.textWidth=b=0):(z.text=Xe(z.text,P-A,x,c.ellipsis,{minChar:c.minChar}),z.textWidth=Oe(z.text,x),b=z.textWidth+A))}_+=z.width=b,y&&(g=Math.max(g,z.lineHeight))}p.width=_,p.lineHeight=g,a+=g,h=Math.max(h,_)}i.outerWidth=i.width=M(e.textWidth,h),i.outerHeight=i.height=M(e.textHeight,a),u&&(i.outerWidth+=u[1]+u[3],i.outerHeight+=u[0]+u[2]);for(var L=0;L<l.length;L++){var z=l[L],D=z.percentWidth;z.width=parseInt(D,10)/100*h}return i}function $e(t,e,i){for(var n=""===e,r=e.split("\n"),o=t.lines,s=0;s<r.length;s++){var a=r[s],h={styleName:i,text:a,isLineHolder:!a&&!n};if(s)o.push({tokens:[h]});else{var l=(o[o.length-1]||(o[0]={tokens:[]})).tokens,u=l.length;1===u&&l[0].isLineHolder?l[0]=h:(a||!u||n)&&l.push(h)}}}function Ke(t){var e=(t.fontSize||t.fontFamily)&&[t.fontStyle,t.fontWeight,(t.fontSize||12)+"px",t.fontFamily||"sans-serif"].join(" ");return e&&z(e)||t.textFont||t.font}function Je(t,e){var i,n,r,o,s=e.x,a=e.y,h=e.width,l=e.height,u=e.r;h<0&&(s+=h,h=-h),l<0&&(a+=l,l=-l),"number"==typeof u?i=n=r=o=u:u instanceof Array?1===u.length?i=n=r=o=u[0]:2===u.length?(i=r=u[0],n=o=u[1]):3===u.length?(i=u[0],n=o=u[1],r=u[2]):(i=u[0],n=u[1],r=u[2],o=u[3]):i=n=r=o=0;var c;i+n>h&&(i*=h/(c=i+n),n*=h/c),r+o>h&&(r*=h/(c=r+o),o*=h/c),n+r>l&&(n*=l/(c=n+r),r*=l/c),i+o>l&&(i*=l/(c=i+o),o*=l/c),t.moveTo(s+i,a),t.lineTo(s+h-n,a),0!==n&&t.arc(s+h-n,a+n,n,-Math.PI/2,0),t.lineTo(s+h,a+l-r),0!==r&&t.arc(s+h-r,a+l-r,r,0,Math.PI/2),t.lineTo(s+o,a+l),0!==o&&t.arc(s+o,a+l-o,o,Math.PI/2,Math.PI),t.lineTo(s,a+i),0!==i&&t.arc(s+i,a+i,i,Math.PI,1.5*Math.PI)}function ti(t){return ei(t),l(t.rich,ei),t}function ei(t){if(t){t.font=Ke(t);var e=t.textAlign;"middle"===e&&(e="center"),t.textAlign=null==e||hs[e]?e:"left";var i=t.textVerticalAlign||t.textBaseline;"center"===i&&(i="middle"),t.textVerticalAlign=null==i||ls[i]?i:"top",t.textPadding&&(t.textPadding=P(t.textPadding))}}function ii(t,e,i,n,r,o){n.rich?ri(t,e,i,n,r,o):ni(t,e,i,n,r,o)}function ni(t,e,i,n,r,o){var s,a=hi(n),h=!1,l=e.__attrCachedBy===Uo.PLAIN_TEXT;o!==Go?(o&&(s=o.style,h=!a&&l&&s),e.__attrCachedBy=a?Uo.NONE:Uo.PLAIN_TEXT):l&&(e.__attrCachedBy=Uo.NONE);var u=n.font||as;h&&u===(s.font||as)||(e.font=u);var c=t.__computedFont;t.__styleFont!==u&&(t.__styleFont=u,c=t.__computedFont=e.font);var f=n.textPadding,d=n.textLineHeight,p=t.__textCotentBlock;p&&!t.__dirtyText||(p=t.__textCotentBlock=Qe(i,c,f,d,n.truncate));var g=p.outerHeight,_=p.lines,m=p.lineHeight,y=ci(fs,t,n,r),v=y.baseX,x=y.baseY,w=y.textAlign||"left",b=y.textVerticalAlign;si(e,n,r,v,x);var k=We(x,g,b),T=v,S=k;if(a||f){var M=Oe(i,c);f&&(M+=f[1]+f[3]);var C=Ne(v,M,w);a&&li(t,e,n,C,k,M,g),f&&(T=_i(v,w,f),S+=f[0])}e.textAlign=w,e.textBaseline="middle",e.globalAlpha=n.opacity||1;for(F=0;F<us.length;F++){var A=us[F],P=A[0],L=A[1],z=n[P];h&&z===s[P]||(e[L]=Yo(e,L,z||A[2]))}S+=m/2;var D=n.textStrokeWidth,E=h?s.textStrokeWidth:null,I=!h||D!==E,B=!h||I||n.textStroke!==s.textStroke,O=di(n.textStroke,D),R=pi(n.textFill);if(O&&(I&&(e.lineWidth=D),B&&(e.strokeStyle=O)),R&&(h&&n.textFill===s.textFill||(e.fillStyle=R)),1===_.length)O&&e.strokeText(_[0],T,S),R&&e.fillText(_[0],T,S);else for(var F=0;F<_.length;F++)O&&e.strokeText(_[F],T,S),R&&e.fillText(_[F],T,S),S+=m}function ri(t,e,i,n,r,o){o!==Go&&(e.__attrCachedBy=Uo.NONE);var s=t.__textCotentBlock;s&&!t.__dirtyText||(s=t.__textCotentBlock=Ze(i,n)),oi(t,e,s,n,r)}function oi(t,e,i,n,r){var o=i.width,s=i.outerWidth,a=i.outerHeight,h=n.textPadding,l=ci(fs,t,n,r),u=l.baseX,c=l.baseY,f=l.textAlign,d=l.textVerticalAlign;si(e,n,r,u,c);var p=Ne(u,s,f),g=We(c,a,d),_=p,m=g;h&&(_+=h[3],m+=h[0]);var y=_+o;hi(n)&&li(t,e,n,p,g,s,a);for(var v=0;v<i.lines.length;v++){for(var x,w=i.lines[v],b=w.tokens,k=b.length,T=w.lineHeight,S=w.width,M=0,C=_,A=y,P=k-1;M<k&&(!(x=b[M]).textAlign||"left"===x.textAlign);)ai(t,e,x,n,T,m,C,"left"),S-=x.width,C+=x.width,M++;for(;P>=0&&"right"===(x=b[P]).textAlign;)ai(t,e,x,n,T,m,A,"right"),S-=x.width,A-=x.width,P--;for(C+=(o-(C-_)-(y-A)-S)/2;M<=P;)ai(t,e,x=b[M],n,T,m,C+x.width/2,"center"),C+=x.width,M++;m+=T}}function si(t,e,i,n,r){if(i&&e.textRotation){var o=e.textOrigin;"center"===o?(n=i.width/2+i.x,r=i.height/2+i.y):o&&(n=o[0]+i.x,r=o[1]+i.y),t.translate(n,r),t.rotate(-e.textRotation),t.translate(-n,-r)}}function ai(t,e,i,n,r,o,s,a){var h=n.rich[i.styleName]||{};h.text=i.text;var l=i.textVerticalAlign,u=o+r/2;"top"===l?u=o+i.height/2:"bottom"===l&&(u=o+r-i.height/2),!i.isLineHolder&&hi(h)&&li(t,e,h,"right"===a?s-i.width:"center"===a?s-i.width/2:s,u-i.height/2,i.width,i.height);var c=i.textPadding;c&&(s=_i(s,a,c),u-=i.height/2-c[2]-i.textHeight/2),fi(e,"shadowBlur",C(h.textShadowBlur,n.textShadowBlur,0)),fi(e,"shadowColor",h.textShadowColor||n.textShadowColor||"transparent"),fi(e,"shadowOffsetX",C(h.textShadowOffsetX,n.textShadowOffsetX,0)),fi(e,"shadowOffsetY",C(h.textShadowOffsetY,n.textShadowOffsetY,0)),fi(e,"textAlign",a),fi(e,"textBaseline","middle"),fi(e,"font",i.font||as);var f=di(h.textStroke||n.textStroke,p),d=pi(h.textFill||n.textFill),p=M(h.textStrokeWidth,n.textStrokeWidth);f&&(fi(e,"lineWidth",p),fi(e,"strokeStyle",f),e.strokeText(i.text,s,u)),d&&(fi(e,"fillStyle",d),e.fillText(i.text,s,u))}function hi(t){return!!(t.textBackgroundColor||t.textBorderWidth&&t.textBorderColor)}function li(t,e,i,n,r,o,s){var a=i.textBackgroundColor,h=i.textBorderWidth,l=i.textBorderColor,u=y(a);if(fi(e,"shadowBlur",i.textBoxShadowBlur||0),fi(e,"shadowColor",i.textBoxShadowColor||"transparent"),fi(e,"shadowOffsetX",i.textBoxShadowOffsetX||0),fi(e,"shadowOffsetY",i.textBoxShadowOffsetY||0),u||h&&l){e.beginPath();var c=i.textBorderRadius;c?Je(e,{x:n,y:r,width:o,height:s,r:c}):e.rect(n,r,o,s),e.closePath()}if(u)if(fi(e,"fillStyle",a),null!=i.fillOpacity){d=e.globalAlpha;e.globalAlpha=i.fillOpacity*i.opacity,e.fill(),e.globalAlpha=d}else e.fill();else if(x(a)){var f=a.image;(f=Ee(f,null,t,ui,a))&&Be(f)&&e.drawImage(f,n,r,o,s)}if(h&&l)if(fi(e,"lineWidth",h),fi(e,"strokeStyle",l),null!=i.strokeOpacity){var d=e.globalAlpha;e.globalAlpha=i.strokeOpacity*i.opacity,e.stroke(),e.globalAlpha=d}else e.stroke()}function ui(t,e){e.image=t}function ci(t,e,i,n){var r=i.x||0,o=i.y||0,s=i.textAlign,a=i.textVerticalAlign;if(n){var h=i.textPosition;if(h instanceof Array)r=n.x+gi(h[0],n.width),o=n.y+gi(h[1],n.height);else{var l=e&&e.calculateTextPosition?e.calculateTextPosition(cs,i,n):Ve(cs,i,n);r=l.x,o=l.y,s=s||l.textAlign,a=a||l.textVerticalAlign}var u=i.textOffset;u&&(r+=u[0],o+=u[1])}return t=t||{},t.baseX=r,t.baseY=o,t.textAlign=s,t.textVerticalAlign=a,t}function fi(t,e,i){return t[e]=Yo(t,e,i),t[e]}function di(t,e){return null==t||e<=0||"transparent"===t||"none"===t?null:t.image||t.colorStops?"#000":t}function pi(t){return null==t||"none"===t?null:t.image||t.colorStops?"#000":t}function gi(t,e){return"string"==typeof t?t.lastIndexOf("%")>=0?parseFloat(t)/100*e:parseFloat(t):t}function _i(t,e,i){return"right"===e?t-i[1]:"center"===e?t+i[3]/2-i[1]/2:t+i[3]}function mi(t,e){return null!=t&&(t||e.textBackgroundColor||e.textBorderWidth&&e.textBorderColor||e.textPadding)}function yi(t){return!!t&&(!!t.__builtin__||"function"==typeof t.resize&&"function"==typeof t.refresh)}function vi(t,e,i){return ms.copy(t.getBoundingRect()),t.transform&&ms.applyTransform(t.transform),ys.width=e,ys.height=i,!ms.intersect(ys)}function xi(t,e){if(t===e)return!1;if(!t||!e||t.length!==e.length)return!0;for(let i=0;i<t.length;i++)if(t[i]!==e[i])return!0;return!1}function wi(t,e){for(let i=0;i<t.length;i++){let n=t[i];n.setTransform(e),e.beginPath(),n.buildPath(e,n.shape),e.clip(),n.restoreTransform(e)}}function bi(t,e){let i=document.createElement("div");return i.style.cssText=["position:relative","width:"+t+"px","height:"+e+"px","padding:0","margin:0","border-width:0"].join(";")+";",i}function ki(t){return"mousewheel"===t&&br.browser.firefox?"DOMMouseScroll":t}function Ti(t){let e=t.pointerType;return"pen"===e||"touch"===e}function Si(t){t.touching=!0,null!=t.touchTimer&&(clearTimeout(t.touchTimer),t.touchTimer=null),t.touchTimer=setTimeout(function(){t.touching=!1,t.touchTimer=null},700)}function Mi(t){t&&(t.zrIsFromLocal=!0)}function Ci(t){return!(!t||!t.zrIsFromLocal)}function Ai(t){t&&(t.zrByTouch=!0)}function Pi(t,e,i,n){function r(t,i){e.mounted[t]=i,Dt(s,ki(t),i)}let o=e.domHandlers,s=e.domTarget;br.pointerEventsSupported?l(i.pointer,function(e){r(e,function(i){!n&&Ci(i)||(n&&Mi(i),o[e].call(t,i))})}):(br.touchEventsSupported&&l(i.touch,function(i){r(i,function(r){!n&&Ci(r)||(n&&Mi(r),o[i].call(t,r),Si(e))})}),l(i.mouse,function(i){r(i,function(r){r=Lt(r),e.touching||!n&&Ci(r)||(n&&Mi(r),o[i].call(t,r))})}),l(i.keyboard,function(e){r(e,function(i){!n&&Ci(i)||(n&&Mi(i),o[e].call(t,i))})}))}function Li(t){let e=t.mounted;for(let i in e)e.hasOwnProperty(i)&&Et(t.domTarget,ki(i),e[i]);t.mounted={}}function zi(t,e){this.domTarget=t,this.domHandlers=e,this.mounted={},this.touchTimer=null,this.touching=!1}function Di(t){qr.call(this),this.dom=t,this._localHandlerScope=new zi(t,Ts),ws&&(this._globalHandlerScope=new zi(document,Ss)),this._pageEventEnabled=!1,Pi(this,this._localHandlerScope,bs,!0)}function Ei(t,e){let i=new Ps(xr(),t,e);return As[i.id]=i,i}function Ii(t){if(t)t.dispose();else{for(let t in As)As.hasOwnProperty(t)&&As[t].dispose();As={}}return this}function Bi(t){return As[t]}function Oi(t,e){Cs[t]=e}function Ri(t){return t>-Ds&&t<Ds}function Fi(t){return t>Ds||t<-Ds}function Hi(t,e,i,n,r){var o=1-r;return o*o*(o*t+3*r*e)+r*r*(r*n+3*o*i)}function Ni(t,e,i,n,r){var o=1-r;return 3*(((e-t)*o+2*(i-e)*r)*o+(n-i)*r*r)}function Wi(t,e,i,n,r,o){var s=n+3*(e-i)-t,a=3*(i-2*e+t),h=3*(e-t),l=t-r,u=a*a-3*s*h,c=a*h-9*s*l,f=h*h-3*a*l,d=0;if(Ri(u)&&Ri(c))Ri(a)?o[0]=0:(T=-h/a)>=0&&T<=1&&(o[d++]=T);else{var p=c*c-4*u*f;if(Ri(p)){var g=c/u,_=-g/2;(T=-a/s+g)>=0&&T<=1&&(o[d++]=T),_>=0&&_<=1&&(o[d++]=_)}else if(p>0){var m=zs(p),y=u*a+1.5*s*(-c+m),v=u*a+1.5*s*(-c-m);(T=(-a-((y=y<0?-Ls(-y,Bs):Ls(y,Bs))+(v=v<0?-Ls(-v,Bs):Ls(v,Bs))))/(3*s))>=0&&T<=1&&(o[d++]=T)}else{var x=(2*u*a-3*s*c)/(2*zs(u*u*u)),w=Math.acos(x)/3,b=zs(u),k=Math.cos(w),T=(-a-2*b*k)/(3*s),_=(-a+b*(k+Is*Math.sin(w)))/(3*s),S=(-a+b*(k-Is*Math.sin(w)))/(3*s);T>=0&&T<=1&&(o[d++]=T),_>=0&&_<=1&&(o[d++]=_),S>=0&&S<=1&&(o[d++]=S)}}return d}function Vi(t,e,i,n,r){var o=6*i-12*e+6*t,s=9*e+3*n-3*t-9*i,a=3*e-3*t,h=0;if(Ri(s))Fi(o)&&(c=-a/o)>=0&&c<=1&&(r[h++]=c);else{var l=o*o-4*s*a;if(Ri(l))r[0]=-o/(2*s);else if(l>0){var u=zs(l),c=(-o+u)/(2*s),f=(-o-u)/(2*s);c>=0&&c<=1&&(r[h++]=c),f>=0&&f<=1&&(r[h++]=f)}}return h}function Xi(t,e,i,n,r,o){var s=(e-t)*r+t,a=(i-e)*r+e,h=(n-i)*r+i,l=(a-s)*r+s,u=(h-a)*r+a,c=(u-l)*r+l;o[0]=t,o[1]=s,o[2]=l,o[3]=c,o[4]=c,o[5]=u,o[6]=h,o[7]=n}function qi(t,e,i,n,r,o,s,a,h,l,u){var c,f,d,p,g,_=.005,m=1/0;Os[0]=h,Os[1]=l;for(var y=0;y<1;y+=.05)Rs[0]=Hi(t,i,r,s,y),Rs[1]=Hi(e,n,o,a,y),(p=Wr(Os,Rs))<m&&(c=y,m=p);m=1/0;for(var v=0;v<32&&!(_<Es);v++)f=c-_,d=c+_,Rs[0]=Hi(t,i,r,s,f),Rs[1]=Hi(e,n,o,a,f),p=Wr(Rs,Os),f>=0&&p<m?(c=f,m=p):(Fs[0]=Hi(t,i,r,s,d),Fs[1]=Hi(e,n,o,a,d),g=Wr(Fs,Os),d<=1&&g<m?(c=d,m=g):_*=.5);return u&&(u[0]=Hi(t,i,r,s,c),u[1]=Hi(e,n,o,a,c)),zs(m)}function ji(t,e,i,n){var r=1-n;return r*(r*t+2*n*e)+n*n*i}function Yi(t,e,i,n){return 2*((1-n)*(e-t)+n*(i-e))}function Ui(t,e,i,n,r){var o=t-2*e+i,s=2*(e-t),a=t-n,h=0;if(Ri(o))Fi(s)&&(c=-a/s)>=0&&c<=1&&(r[h++]=c);else{var l=s*s-4*o*a;if(Ri(l))(c=-s/(2*o))>=0&&c<=1&&(r[h++]=c);else if(l>0){var u=zs(l),c=(-s+u)/(2*o),f=(-s-u)/(2*o);c>=0&&c<=1&&(r[h++]=c),f>=0&&f<=1&&(r[h++]=f)}}return h}function Gi(t,e,i){var n=t+i-2*e;return 0===n?.5:(t-e)/n}function Qi(t,e,i,n,r){var o=(e-t)*n+t,s=(i-e)*n+e,a=(s-o)*n+o;r[0]=t,r[1]=o,r[2]=a,r[3]=a,r[4]=s,r[5]=i}function Zi(t,e,i,n,r,o,s,a,h){var l,u=.005,c=1/0;Os[0]=s,Os[1]=a;for(var f=0;f<1;f+=.05)Rs[0]=ji(t,i,r,f),Rs[1]=ji(e,n,o,f),(_=Wr(Os,Rs))<c&&(l=f,c=_);c=1/0;for(var d=0;d<32&&!(u<Es);d++){var p=l-u,g=l+u;Rs[0]=ji(t,i,r,p),Rs[1]=ji(e,n,o,p);var _=Wr(Rs,Os);if(p>=0&&_<c)l=p,c=_;else{Fs[0]=ji(t,i,r,g),Fs[1]=ji(e,n,o,g);var m=Wr(Fs,Os);g<=1&&m<c?(l=g,c=m):u*=.5}}return h&&(h[0]=ji(t,i,r,l),h[1]=ji(e,n,o,l)),zs(c)}function $i(t,e,i,n,r,o){r[0]=Hs(t,i),r[1]=Hs(e,n),o[0]=Ns(t,i),o[1]=Ns(e,n)}function Ki(t,e,i,n,r,o,s,a,h,l){var u,c=Vi,f=Hi,d=c(t,i,r,s,Us);for(h[0]=1/0,h[1]=1/0,l[0]=-1/0,l[1]=-1/0,u=0;u<d;u++){var p=f(t,i,r,s,Us[u]);h[0]=Hs(p,h[0]),l[0]=Ns(p,l[0])}for(d=c(e,n,o,a,Gs),u=0;u<d;u++){var g=f(e,n,o,a,Gs[u]);h[1]=Hs(g,h[1]),l[1]=Ns(g,l[1])}h[0]=Hs(t,h[0]),l[0]=Ns(t,l[0]),h[0]=Hs(s,h[0]),l[0]=Ns(s,l[0]),h[1]=Hs(e,h[1]),l[1]=Ns(e,l[1]),h[1]=Hs(a,h[1]),l[1]=Ns(a,l[1])}function Ji(t,e,i,n,r,o,s,a){var h=Gi,l=ji,u=Ns(Hs(h(t,i,r),1),0),c=Ns(Hs(h(e,n,o),1),0),f=l(t,i,r,u),d=l(e,n,o,c);s[0]=Hs(t,r,f),s[1]=Hs(e,o,d),a[0]=Ns(t,r,f),a[1]=Ns(e,o,d)}function tn(t,e,i,n,r,o,s,a,h){var l=vt,u=xt,c=Math.abs(r-o);if(c%Xs<1e-4&&c>1e-4)return a[0]=t-i,a[1]=e-n,h[0]=t+i,void(h[1]=e+n);if(qs[0]=Vs(r)*i+t,qs[1]=Ws(r)*n+e,js[0]=Vs(o)*i+t,js[1]=Ws(o)*n+e,l(a,qs,js),u(h,qs,js),(r%=Xs)<0&&(r+=Xs),(o%=Xs)<0&&(o+=Xs),r>o&&!s?o+=Xs:r<o&&s&&(r+=Xs),s){var f=o;o=r,r=f}for(var d=0;d<o;d+=Math.PI/2)d>r&&(Ys[0]=Vs(d)*i+t,Ys[1]=Ws(d)*n+e,l(a,Ys,a),u(h,Ys,h))}function en(t,e,i,n,r,o,s){if(0===r)return!1;var a=r,h=0,l=t;if(s>e+a&&s>n+a||s<e-a&&s<n-a||o>t+a&&o>i+a||o<t-a&&o<i-a)return!1;if(t===i)return Math.abs(o-t)<=a/2;var u=(h=(e-n)/(t-i))*o-s+(l=(t*n-i*e)/(t-i));return u*u/(h*h+1)<=a/2*a/2}function nn(t,e,i,n,r,o,s,a,h,l,u){if(0===h)return!1;var c=h;return!(u>e+c&&u>n+c&&u>o+c&&u>a+c||u<e-c&&u<n-c&&u<o-c&&u<a-c||l>t+c&&l>i+c&&l>r+c&&l>s+c||l<t-c&&l<i-c&&l<r-c&&l<s-c)&&qi(t,e,i,n,r,o,s,a,l,u,null)<=c/2}function rn(t,e,i,n,r,o,s,a,h){if(0===s)return!1;var l=s;return!(h>e+l&&h>n+l&&h>o+l||h<e-l&&h<n-l&&h<o-l||a>t+l&&a>i+l&&a>r+l||a<t-l&&a<i-l&&a<r-l)&&Zi(t,e,i,n,r,o,a,h,null)<=l/2}function on(t){return(t%=ha)<0&&(t+=ha),t}function sn(t,e,i,n,r,o,s,a,h){if(0===s)return!1;var l=s;a-=t,h-=e;var u=Math.sqrt(a*a+h*h);if(u-l>i||u+l<i)return!1;if(Math.abs(n-r)%la<1e-4)return!0;if(o){var c=n;n=on(r),r=on(c)}else n=on(n),r=on(r);n>r&&(r+=la);var f=Math.atan2(h,a);return f<0&&(f+=la),f>=n&&f<=r||f+la>=n&&f+la<=r}function an(t,e,i,n,r,o){if(o>e&&o>n||o<e&&o<n)return 0;if(n===e)return 0;var s=n<e?1:-1,a=(o-e)/(n-e);1!==a&&0!==a||(s=n<e?.5:-.5);var h=a*(i-t)+t;return h===r?1/0:h>r?s:0}function hn(t,e){return Math.abs(t-e)<fa}function ln(){var t=pa[0];pa[0]=pa[1],pa[1]=t}function un(t,e,i,n,r,o,s,a,h,l){if(l>e&&l>n&&l>o&&l>a||l<e&&l<n&&l<o&&l<a)return 0;var u=Wi(e,n,o,a,l,da);if(0===u)return 0;for(var c,f,d=0,p=-1,g=0;g<u;g++){var _=da[g],m=0===_||1===_?.5:1;Hi(t,i,r,s,_)<h||(p<0&&(p=Vi(e,n,o,a,pa),pa[1]<pa[0]&&p>1&&ln(),c=Hi(e,n,o,a,pa[0]),p>1&&(f=Hi(e,n,o,a,pa[1]))),2===p?_<pa[0]?d+=c<e?m:-m:_<pa[1]?d+=f<c?m:-m:d+=a<f?m:-m:_<pa[0]?d+=c<e?m:-m:d+=a<c?m:-m)}return d}function cn(t,e,i,n,r,o,s,a){if(a>e&&a>n&&a>o||a<e&&a<n&&a<o)return 0;var h=Ui(e,n,o,a,da);if(0===h)return 0;var l=Gi(e,n,o);if(l>=0&&l<=1){for(var u=0,c=ji(e,n,o,l),f=0;f<h;f++){d=0===da[f]||1===da[f]?.5:1;(p=ji(t,i,r,da[f]))<s||(da[f]<l?u+=c<e?d:-d:u+=o<c?d:-d)}return u}var d=0===da[0]||1===da[0]?.5:1,p=ji(t,i,r,da[0]);return p<s?0:o<e?d:-d}function fn(t,e,i,n,r,o,s,a){if((a-=e)>i||a<-i)return 0;l=Math.sqrt(i*i-a*a);da[0]=-l,da[1]=l;var h=Math.abs(n-r);if(h<1e-4)return 0;if(h%ca<1e-4){n=0,r=ca;p=o?1:-1;return s>=da[0]+t&&s<=da[1]+t?p:0}if(o){var l=n;n=on(r),r=on(l)}else n=on(n),r=on(r);n>r&&(r+=ca);for(var u=0,c=0;c<2;c++){var f=da[c];if(f+t>s){var d=Math.atan2(a,f),p=o?1:-1;d<0&&(d=ca+d),(d>=n&&d<=r||d+ca>=n&&d+ca<=r)&&(d>Math.PI/2&&d<1.5*Math.PI&&(p=-p),u+=p)}}return u}function dn(t,e,i,n,r){for(var o=0,s=0,a=0,h=0,l=0,u=0;u<t.length;){var c=t[u++];switch(c===ua.M&&u>1&&(i||(o+=an(s,a,h,l,n,r))),1===u&&(h=s=t[u],l=a=t[u+1]),c){case ua.M:s=h=t[u++],a=l=t[u++];break;case ua.L:if(i){if(en(s,a,t[u],t[u+1],e,n,r))return!0}else o+=an(s,a,t[u],t[u+1],n,r)||0;s=t[u++],a=t[u++];break;case ua.C:if(i){if(nn(s,a,t[u++],t[u++],t[u++],t[u++],t[u],t[u+1],e,n,r))return!0}else o+=un(s,a,t[u++],t[u++],t[u++],t[u++],t[u],t[u+1],n,r)||0;s=t[u++],a=t[u++];break;case ua.Q:if(i){if(rn(s,a,t[u++],t[u++],t[u],t[u+1],e,n,r))return!0}else o+=cn(s,a,t[u++],t[u++],t[u],t[u+1],n,r)||0;s=t[u++],a=t[u++];break;case ua.A:var f=t[u++],d=t[u++],p=t[u++],g=t[u++],_=t[u++],m=t[u++];u+=1;var y=1-t[u++],v=Math.cos(_)*p+f,x=Math.sin(_)*g+d;u>1?o+=an(s,a,v,x,n,r):(h=v,l=x);var w=(n-f)*g/p+f;if(i){if(sn(f,d,g,_,_+m,y,e,w,r))return!0}else o+=fn(f,d,g,_,_+m,y,w,r);s=Math.cos(_+m)*p+f,a=Math.sin(_+m)*g+d;break;case ua.R:h=s=t[u++],l=a=t[u++];var v=h+t[u++],x=l+t[u++];if(i){if(en(h,l,v,l,e,n,r)||en(v,l,v,x,e,n,r)||en(v,x,h,x,e,n,r)||en(h,x,h,l,e,n,r))return!0}else o+=an(v,l,v,x,n,r),o+=an(h,x,h,l,n,r);break;case ua.Z:if(i){if(en(s,a,h,l,e,n,r))return!0}else o+=an(s,a,h,l,n,r);s=h,a=l}}return i||hn(a,l)||(o+=an(s,a,h,l,n,r)||0),0!==o}function pn(t,e,i){return dn(t,0,!1,e,i)}function gn(t,e,i,n){return dn(t,e,!0,i,n)}function _n(t,e,i,n,r,o,s,a,h,l,u){var c=h*(Ta/180),f=ka(c)*(t-i)/2+ba(c)*(e-n)/2,d=-1*ba(c)*(t-i)/2+ka(c)*(e-n)/2,p=f*f/(s*s)+d*d/(a*a);p>1&&(s*=wa(p),a*=wa(p));var g=(r===o?-1:1)*wa((s*s*(a*a)-s*s*(d*d)-a*a*(f*f))/(s*s*(d*d)+a*a*(f*f)))||0,_=g*s*d/a,m=g*-a*f/s,y=(t+i)/2+ka(c)*_-ba(c)*m,v=(e+n)/2+ba(c)*_+ka(c)*m,x=Ca([1,0],[(f-_)/s,(d-m)/a]),w=[(f-_)/s,(d-m)/a],b=[(-1*f-_)/s,(-1*d-m)/a],k=Ca(w,b);Ma(w,b)<=-1&&(k=Ta),Ma(w,b)>=1&&(k=0),0===o&&k>0&&(k-=2*Ta),1===o&&k<0&&(k+=2*Ta),u.addData(l,y,v,s,a,x,k,c,o)}function mn(t){if(!t)return new aa;for(var e,i=0,n=0,r=i,o=n,s=new aa,a=aa.CMD,h=t.match(Aa),l=0;l<h.length;l++){for(var u,c=h[l],f=c.charAt(0),d=c.match(Pa)||[],p=d.length,g=0;g<p;g++)d[g]=parseFloat(d[g]);for(var _=0;_<p;){var m,y,v,x,w,b,k,T=i,S=n;switch(f){case"l":i+=d[_++],n+=d[_++],u=a.L,s.addData(u,i,n);break;case"L":i=d[_++],n=d[_++],u=a.L,s.addData(u,i,n);break;case"m":i+=d[_++],n+=d[_++],u=a.M,s.addData(u,i,n),r=i,o=n,f="l";break;case"M":i=d[_++],n=d[_++],u=a.M,s.addData(u,i,n),r=i,o=n,f="L";break;case"h":i+=d[_++],u=a.L,s.addData(u,i,n);break;case"H":i=d[_++],u=a.L,s.addData(u,i,n);break;case"v":n+=d[_++],u=a.L,s.addData(u,i,n);break;case"V":n=d[_++],u=a.L,s.addData(u,i,n);break;case"C":u=a.C,s.addData(u,d[_++],d[_++],d[_++],d[_++],d[_++],d[_++]),i=d[_-2],n=d[_-1];break;case"c":u=a.C,s.addData(u,d[_++]+i,d[_++]+n,d[_++]+i,d[_++]+n,d[_++]+i,d[_++]+n),i+=d[_-2],n+=d[_-1];break;case"S":m=i,y=n;var M=s.len(),C=s.data;e===a.C&&(m+=i-C[M-4],y+=n-C[M-3]),u=a.C,T=d[_++],S=d[_++],i=d[_++],n=d[_++],s.addData(u,m,y,T,S,i,n);break;case"s":m=i,y=n;var M=s.len(),C=s.data;e===a.C&&(m+=i-C[M-4],y+=n-C[M-3]),u=a.C,T=i+d[_++],S=n+d[_++],i+=d[_++],n+=d[_++],s.addData(u,m,y,T,S,i,n);break;case"Q":T=d[_++],S=d[_++],i=d[_++],n=d[_++],u=a.Q,s.addData(u,T,S,i,n);break;case"q":T=d[_++]+i,S=d[_++]+n,i+=d[_++],n+=d[_++],u=a.Q,s.addData(u,T,S,i,n);break;case"T":m=i,y=n;var M=s.len(),C=s.data;e===a.Q&&(m+=i-C[M-4],y+=n-C[M-3]),i=d[_++],n=d[_++],u=a.Q,s.addData(u,m,y,i,n);break;case"t":m=i,y=n;var M=s.len(),C=s.data;e===a.Q&&(m+=i-C[M-4],y+=n-C[M-3]),i+=d[_++],n+=d[_++],u=a.Q,s.addData(u,m,y,i,n);break;case"A":v=d[_++],x=d[_++],w=d[_++],b=d[_++],k=d[_++],_n(T=i,S=n,i=d[_++],n=d[_++],b,k,v,x,w,u=a.A,s);break;case"a":v=d[_++],x=d[_++],w=d[_++],b=d[_++],k=d[_++],_n(T=i,S=n,i+=d[_++],n+=d[_++],b,k,v,x,w,u=a.A,s)}}"z"!==f&&"Z"!==f||(u=a.Z,s.addData(u),i=r,n=o),e=u}return s.toStatic(),s}function yn(t,e){var i=mn(t);return e=e||{},e.buildPath=function(t){if(t.setData)t.setData(i.data),(e=t.getContext())&&t.rebuildPath(e);else{var e=t;i.rebuildPath(e)}},e.applyTransform=function(t){xa(i,t),this.dirty(!0)},e}function vn(t,e){return new ga(yn(t,e))}function xn(t,e){for(var i=[],n=t.length,r=0;r<n;r++){var o=t[r];o.path||o.createPathProxy(),o.__dirtyPath&&o.buildPath(o.path,o.shape,!0),i.push(o.path)}var s=new ga(e);return s.createPathProxy(),s.buildPath=function(t){t.appendPath(i);var e=t.getContext();e&&t.rebuildPath(e)},s}function wn(t,e,i){var n=i&&i.lineWidth;if(e&&n){var r=e.x1,o=e.x2,s=e.y1,a=e.y2;Ia(2*r)===Ia(2*o)?t.x1=t.x2=kn(r,n,!0):(t.x1=r,t.x2=o),Ia(2*s)===Ia(2*a)?t.y1=t.y2=kn(s,n,!0):(t.y1=s,t.y2=a)}}function bn(t,e,i){var n=i&&i.lineWidth;if(e&&n){var r=e.x,o=e.y,s=e.width,a=e.height;t.x=kn(r,n,!0),t.y=kn(o,n,!0),t.width=Math.max(kn(r+s,n,!1)-t.x,0===s?0:1),t.height=Math.max(kn(o+a,n,!1)-t.y,0===a?0:1)}}function kn(t,e,i){var n=Ia(2*t);return(n+Ia(e))%2==0?n/2:(n+(i?1:-1))/2}function Tn(t,e,i,n,r,o,s){var a=.5*(i-t),h=.5*(n-e);return(2*(e-i)+a+h)*s+(-3*(e-i)-2*a-h)*o+a*r+e}function Sn(t,e,i){var n=e.points,r=e.smooth;if(n&&n.length>=2){if(r&&"spline"!==r){var o=Xa(n,r,i,e.smoothConstraint);t.moveTo(n[0][0],n[0][1]);for(var s=n.length,a=0;a<(i?s:s-1);a++){var h=o[2*a],l=o[2*a+1],u=n[(a+1)%s];t.bezierCurveTo(h[0],h[1],l[0],l[1],u[0],u[1])}}else{"spline"===r&&(n=Va(n,i)),t.moveTo(n[0][0],n[0][1]);for(var a=1,c=n.length;a<c;a++)t.lineTo(n[a][0],n[a][1])}i&&t.closePath()}}function Mn(t){if(y(t)){let e=new DOMParser;t=e.parseFromString(t,"text/xml")}for(9===t.nodeType&&(t=t.firstChild);"svg"!==t.nodeName.toLowerCase()||1!==t.nodeType;)t=t.nextSibling;return t}function Cn(){this._defs={},this._root=null,this._isDefine=!1,this._isText=!1}function An(t,e){let i=t.firstChild;for(;i;){if(1===i.nodeType){let t=i.getAttribute("offset");t=t.indexOf("%")>0?parseInt(t,10)/100:t?parseFloat(t):0;let n=i.getAttribute("stop-color")||"#000000";e.addColorStop(t,n)}i=i.nextSibling}}function Pn(t,e){t&&t.__inheritedStyle&&(e.__inheritedStyle||(e.__inheritedStyle={}),K(e.__inheritedStyle,t.__inheritedStyle))}function Ln(t){let e=z(t).split(Za),i=[];for(let t=0;t<e.length;t+=2){let n=parseFloat(e[t]),r=parseFloat(e[t+1]);i.push([n,r])}return i}function zn(t,e,i,n){let r=e.__inheritedStyle||{},s="text"===e.type;if(1===t.nodeType&&(En(t,e),o(r,In(t)),!n))for(let e in Ja)if(Ja.hasOwnProperty(e)){let i=t.getAttribute(e);null!=i&&(r[Ja[e]]=i)}let a=s?"textFill":"fill",h=s?"textStroke":"stroke";e.style=e.style||new Zo;let u=e.style;null!=r.fill&&u.set(a,Dn(r.fill,i)),null!=r.stroke&&u.set(h,Dn(r.stroke,i)),l(["lineWidth","opacity","fillOpacity","strokeOpacity","miterLimit","fontSize"],function(t){let e="lineWidth"===t&&s?"textStrokeWidth":t;null!=r[t]&&u.set(e,parseFloat(r[t]))}),r.textBaseline&&"auto"!==r.textBaseline||(r.textBaseline="alphabetic"),"alphabetic"===r.textBaseline&&(r.textBaseline="bottom"),"start"===r.textAlign&&(r.textAlign="left"),"end"===r.textAlign&&(r.textAlign="right"),l(["lineDashOffset","lineCap","lineJoin","fontWeight","fontFamily","fontStyle","textAlign","textBaseline"],function(t){null!=r[t]&&u.set(t,r[t])}),r.lineDash&&(e.style.lineDash=z(r.lineDash).split(Za)),u[h]&&"none"!==u[h]&&(e[h]=!0),e.__inheritedStyle=r}function Dn(t,e){let i=e&&t&&t.match(th);if(i){let t=z(i[1]),n=e[t];return n}return t}function En(t,e){let i=t.getAttribute("transform");if(i){let t=null,n=[];(i=i.replace(/,/g," ")).replace(eh,function(t,e,i){n.push(e,i)});for(let e=n.length-1;e>0;e-=2){let i=n[e],r=n[e-1];switch(t=t||Vt(),r){case"translate":i=z(i).split(Za),Yt(t,t,[parseFloat(i[0]),parseFloat(i[1]||0)]);break;case"scale":i=z(i).split(Za),Gt(t,t,[parseFloat(i[0]),parseFloat(i[1]||i[0])]);break;case"rotate":i=z(i).split(Za),Ut(t,t,parseFloat(i[0]));break;case"skew":i=z(i).split(Za),console.warn("Skew transform is not supported yet");break;case"matrix":i=z(i).split(Za),t[0]=parseFloat(i[0]),t[1]=parseFloat(i[1]),t[2]=parseFloat(i[2]),t[3]=parseFloat(i[3]),t[4]=parseFloat(i[4]),t[5]=parseFloat(i[5])}}e.setLocalTransform(t)}}function In(t){let e=t.getAttribute("style"),i={};if(!e)return i;let n={};ih.lastIndex=0;let r;for(;null!=(r=ih.exec(e));)n[r[1]]=r[2];for(let t in Ja)Ja.hasOwnProperty(t)&&null!=n[t]&&(i[Ja[t]]=n[t]);return i}function Bn(t,e,i){let n=e/t.width,r=i/t.height,o=Math.min(n,r);return{scale:[o,o],position:[-(t.x+t.width/2)*o+e/2,-(t.y+t.height/2)*o+i/2]}}function On(t,e){return(new Cn).parse(t,e)}function Rn(t){$(this,gs,t),this._displayables=[],this._temporaryDisplayables=[],this._cursor=0,this.notClear=!0}function Fn(t,e,i){let n=t.cpx2,r=t.cpy2;return null===n||null===r?[(i?Ni:Hi)(t.x1,t.cpx1,t.cpx2,t.x2,e),(i?Ni:Hi)(t.y1,t.cpy1,t.cpy2,t.y2,e)]:[(i?Yi:ji)(t.x1,t.cpx1,t.x2,e),(i?Yi:ji)(t.y1,t.cpy1,t.y2,e)]}function Hn(t){return document.createElementNS(Wh,t)}function Nn(t){return jh(1e4*t)/1e4}function Wn(t){return t<$h&&t>-$h}function Vn(t,e){let i=e?t.textFill:t.fill;return null!=i&&i!==qh}function Xn(t,e){let i=e?t.textStroke:t.stroke;return null!=i&&i!==qh}function qn(t,e){e&&jn(t,"transform","matrix("+Xh.call(e,",")+")")}function jn(t,e,i){(!i||"linear"!==i.type&&"radial"!==i.type)&&t.setAttribute(e,i)}function Yn(t,e,i){t.setAttributeNS("http://www.w3.org/1999/xlink",e,i)}function Un(t,e,i,n){if(Vn(e,i)){let n=i?e.textFill:e.fill;jn(t,"fill",n="transparent"===n?qh:n),jn(t,"fill-opacity",null!=e.fillOpacity?e.fillOpacity*e.opacity:e.opacity)}else jn(t,"fill",qh);if(Xn(e,i)){let r=i?e.textStroke:e.stroke;jn(t,"stroke",r="transparent"===r?qh:r);let o=i?e.textStrokeWidth:e.lineWidth,s=!i&&e.strokeNoScale?n.getLineScale():1;jn(t,"stroke-width",o/s),jn(t,"paint-order",i?"stroke":"fill"),jn(t,"stroke-opacity",null!=e.strokeOpacity?e.strokeOpacity:e.opacity);let a=e.lineDash;a?(jn(t,"stroke-dasharray",e.lineDash.join(",")),jn(t,"stroke-dashoffset",jh(e.lineDashOffset||0))):jn(t,"stroke-dasharray",""),e.lineCap&&jn(t,"stroke-linecap",e.lineCap),e.lineJoin&&jn(t,"stroke-linejoin",e.lineJoin),e.miterLimit&&jn(t,"stroke-miterlimit",e.miterLimit)}else jn(t,"stroke",qh)}function Gn(t){let e=[],i=t.data,n=t.len(),r="",o=0,s=0,a=0;for(let t=0;t<n;){let n=i[t++];switch(n){case Vh.M:r="M",o=2;break;case Vh.L:r="L",o=2;break;case Vh.Q:r="Q",o=4;break;case Vh.C:r="C",o=6;break;case Vh.A:let h=i[t++],l=i[t++],u=i[t++],c=i[t++],f=i[t++],d=i[t++],p=i[t++],g=i[t++],_=Math.abs(d),m=Wn(_-Qh)||(g?d>=Qh:-d>=Qh),y=d>0?d%Qh:d%Qh+Qh,v=!1;v=!!m||!Wn(_)&&y>=Gh==!!g;let x=Nn(h+u*Uh(f)),w=Nn(l+c*Yh(f));m&&(d=g?Qh-1e-4:1e-4-Qh,v=!0,9===t&&e.push("M",x,w)),s=Nn(h+u*Uh(f+d)),a=Nn(l+c*Yh(f+d)),e.push("A",Nn(u),Nn(c),jh(p*Zh),+v,+g,s,a);break;case Vh.Z:r="Z";break;case Vh.R:s=Nn(i[t++]),a=Nn(i[t++]);let b=Nn(i[t++]),k=Nn(i[t++]);e.push("M",s,a,"L",s+b,a,"L",s+b,a+k,"L",s,a+k,"L",s,a)}r&&e.push(r);for(let n=0;n<o;n++)e.push(Nn(i[t++]))}return e.join(" ")}function Qn(t,e,i,n,r,o,s){Xt(nl),e&&i&&qt(nl,i);let a=n.textRotation;if(r&&a){let t=n.textOrigin;"center"===t?(o=r.width/2+r.x,s=r.height/2+r.y):t&&(o=t[0]+r.x,s=t[1]+r.y),nl[4]-=o,nl[5]-=s,Ut(nl,nl,a),nl[4]+=o,nl[5]+=s}qn(t,nl)}function Zn(t,e,i){return"right"===e?t-i[1]:"center"===e?t+i[3]/2-i[1]/2:t+i[3]}function $n(t,e,i,n){jn(t,"dominant-baseline","middle"),jn(t,"text-anchor",rl[e]),jn(t,"x",i),jn(t,"y",n)}function Kn(t){t&&t.__textSvgEl&&(t.__textSvgEl.parentNode.removeChild(t.__textSvgEl),t.__textSvgEl=null,t.__tspanList=[],t.__text=null)}function Jn(){}function tr(t,e,i,n){for(var r=0,o=e.length,s=0,a=0;r<o;r++){var h=e[r];if(h.removed){for(var l=[],u=a;u<a+h.count;u++)l.push(u);h.indices=l,a+=h.count}else{for(var l=[],u=s;u<s+h.count;u++)l.push(u);h.indices=l,s+=h.count,h.added||(a+=h.count)}}return e}function er(t){return{newPos:t.newPos,components:t.components.slice(0)}}function ir(t,e,i,n,r){this._zrId=t,this._svgRoot=e,this._tagNames="string"==typeof i?[i]:i,this._markLabel=n,this._domName=r||"_dom",this.nextId=0}function nr(t,e){ir.call(this,t,e,["linearGradient","radialGradient"],"__gradient_in_use__")}function rr(t,e){ir.call(this,t,e,"clipPath","__clippath_in_use__")}function or(t,e){ir.call(this,t,e,["filter"],"__filter_in_use__","_shadowDom")}function sr(t){return t&&(t.shadowBlur||t.shadowOffsetX||t.shadowOffsetY||t.textShadowBlur||t.textShadowOffsetX||t.textShadowOffsetY)}function ar(t){return t instanceof ga?Kh:t instanceof _s?Jh:t instanceof za?tl:Kh}function hr(t,e){return e&&t&&e.parentNode!==t}function lr(t,e,i){if(hr(t,e)&&i){let n=i.nextSibling;n?t.insertBefore(e,n):t.appendChild(e)}}function ur(t,e){if(hr(t,e)){let i=t.firstChild;i?t.insertBefore(e,i):t.appendChild(e)}}function cr(t,e){e&&t&&e.parentNode===t&&t.removeChild(e)}function fr(t){return t.__textSvgEl}function dr(t){return t.__svgEl}function pr(t){return function(){console.log('In SVG mode painter not support method "'+t+'"')}}function gr(){if(!fl&&dl){fl=!0;let t=dl.styleSheets;t.length<31?dl.createStyleSheet().addRule(".zrvml","behavior:url(#default#VML)"):t[0].addRule(".zrvml","behavior:url(#default#VML)")}}function _r(t){return ll(t)}function mr(t,e){gr(),this.root=t,this.storage=e;let i=document.createElement("div"),n=document.createElement("div");i.style.cssText="display:inline-block;overflow:hidden;position:relative;width:300px;height:150px;",n.style.cssText="position:absolute;left:0;top:0;",t.appendChild(i),this._vmlRoot=n,this._vmlViewport=i,this.resize();let r=e.delFromStorage,o=e.addToStorage;e.delFromStorage=function(t){r.call(e,t),t&&t.onRemove&&t.onRemove(n)},e.addToStorage=function(t){t.onAdd&&t.onAdd(n),o.call(e,t)},this._firstPaint=!0}function yr(t){return function(){console.log('In IE8.0 VML mode painter not support method "'+t+'"')}}var vr=2311,xr=function(){return vr++},wr={},br=wr="object"==typeof wx&&"function"==typeof wx.getSystemInfoSync?{browser:{},os:{},node:!1,wxa:!0,canvasSupported:!0,svgSupported:!1,touchEventsSupported:!0,domSupported:!1}:"undefined"==typeof document&&"undefined"!=typeof self?{browser:{},os:{},node:!1,worker:!0,canvasSupported:!0,domSupported:!1}:"undefined"==typeof navigator?{browser:{},os:{},node:!0,worker:!1,canvasSupported:!0,svgSupported:!0,domSupported:!1}:function(t){var e={},i={},n=t.match(/Firefox\/([\d.]+)/),r=t.match(/MSIE\s([\d.]+)/)||t.match(/Trident\/.+?rv:(([\d.]+))/),o=t.match(/Edge\/([\d.]+)/),s=/micromessenger/i.test(t);return n&&(i.firefox=!0,i.version=n[1]),r&&(i.ie=!0,i.version=r[1]),o&&(i.edge=!0,i.version=o[1]),s&&(i.weChat=!0),{browser:i,os:e,node:!1,canvasSupported:!!document.createElement("canvas").getContext,svgSupported:"undefined"!=typeof SVGRect,touchEventsSupported:"ontouchstart"in window&&!i.ie&&!i.edge,pointerEventsSupported:"onpointerdown"in window&&(i.edge||i.ie&&i.version>=11),domSupported:"undefined"!=typeof document}}(navigator.userAgent),kr={"[object Function]":1,"[object RegExp]":1,"[object Date]":1,"[object Error]":1,"[object CanvasGradient]":1,"[object CanvasPattern]":1,"[object Image]":1,"[object Canvas]":1},Tr={"[object Int8Array]":1,"[object Uint8Array]":1,"[object Uint8ClampedArray]":1,"[object Int16Array]":1,"[object Uint16Array]":1,"[object Int32Array]":1,"[object Uint32Array]":1,"[object Float32Array]":1,"[object Float64Array]":1},Sr=Object.prototype.toString,Mr=Array.prototype,Cr=Mr.forEach,Ar=Mr.filter,Pr=Mr.slice,Lr=Mr.map,zr=Mr.reduce,Dr={},Er=function(){return Dr.createCanvas()};Dr.createCanvas=function(){return document.createElement("canvas")};var Ir,Br="__ec_primitive__";I.prototype={constructor:I,get:function(t){return this.data.hasOwnProperty(t)?this.data[t]:null},set:function(t,e){return this.data[t]=e},each:function(t,e){void 0!==e&&(t=p(t,e));for(var i in this.data)this.data.hasOwnProperty(i)&&t(this.data[i],i)},removeKey:function(t){delete this.data[t]}};var Or=(Object.freeze||Object)({$override:e,clone:i,merge:n,mergeAll:r,extend:o,createCanvas:Er,getContext:s,indexOf:a,isArrayLike:h,each:l,map:u,reduce:c,filter:f,find:d,bind:p,curry:g,isArray:_,isFunction:m,isString:y,isNumeric:v,isObject:x,isBuiltInObject:w,isTypedArray:b,isDom:k,eqNaN:T,retrieve:S,retrieve2:M,retrieve3:C,slice:A,normalizeCssArray:P,assert:L,trim:z,setAsPrimitive:D,isPrimitive:E,createHashMap:B,concatArray:O,noop:R,interpolateNumber:F,interpolateString:H,interpolateArray:N,fillArr:W,isArraySame:V,catmullRomInterpolateArray:X,catmullRomInterpolate:q,cloneValue:j,rgba2String:Y,getArrayDim:U,parseInt10:G}),Rr="undefined"==typeof Float32Array?Array:Float32Array,Fr=at,Hr=ht,Nr=pt,Wr=gt,Vr=(Object.freeze||Object)({create:tt,copy:et,clone:it,set:nt,add:rt,scaleAndAdd:ot,sub:st,len:at,length:Fr,lenSquare:ht,lengthSquare:Hr,mul:lt,div:ut,dot:ct,scale:ft,normalize:dt,distance:pt,dist:Nr,distanceSquare:gt,distSquare:Wr,negate:_t,lerp:mt,applyTransform:yt,min:vt,max:xt});let Xr=Array.prototype.slice,qr=function(t){this._$handlers={},this._$eventProcessor=t};qr.prototype={constructor:qr,one:function(t,e,i,n){return kt(this,t,e,i,n,!0)},on:function(t,e,i,n){return kt(this,t,e,i,n,!1)},isSilent:function(t){let e=this._$handlers;return!e[t]||!e[t].length},off:function(t,e){let i=this._$handlers;if(!t)return this._$handlers={},this;if(e){if(i[t]){let n=[];for(let r=0,o=i[t].length;r<o;r++)i[t][r].h!==e&&n.push(i[t][r]);i[t]=n}i[t]&&0===i[t].length&&delete i[t]}else delete i[t];return wt(this,t),this},trigger:function(t){let e=this._$handlers[t],i=this._$eventProcessor;if(e){let n=arguments,r=n.length;r>3&&(n=Xr.call(n,1));let o=e.length;for(let s=0;s<o;){let a=e[s];if(i&&i.filter&&null!=a.query&&!i.filter(t,a.query))s++;else{switch(r){case 1:a.h.call(a.ctx);break;case 2:a.h.call(a.ctx,n[1]);break;case 3:a.h.call(a.ctx,n[1],n[2]);break;default:a.h.apply(a.ctx,n)}a.one?(e.splice(s,1),o--):s++}}}return i&&i.afterTrigger&&i.afterTrigger(t),this},triggerWithContext:function(t){let e=this._$handlers[t],i=this._$eventProcessor;if(e){let n=arguments,r=n.length;r>4&&(n=Xr.call(n,1,n.length-1));let o=n[n.length-1],s=e.length;for(let a=0;a<s;){let h=e[a];if(i&&i.filter&&null!=h.query&&!i.filter(t,h.query))a++;else{switch(r){case 1:h.h.call(o);break;case 2:h.h.call(o,n[1]);break;case 3:h.h.call(o,n[1],n[2]);break;default:h.h.apply(o,n)}h.one?(e.splice(a,1),s--):a++}}}return i&&i.afterTrigger&&i.afterTrigger(t),this}};var jr=Math.log(2),Yr="undefined"!=typeof window&&!!window.addEventListener,Ur=/^(?:mouse|pointer|contextmenu|drag|drop)|click/,Gr="___zrEVENTSAVED",Qr=[],Zr=Yr?function(t){t.preventDefault(),t.stopPropagation(),t.cancelBubble=!0}:function(t){t.returnValue=!1,t.cancelBubble=!0};class $r{constructor(t){this.selectionMap=new Map,this.handler=t,this.handler.on("mousedown",this._dragStart,this)}param(t,e){return{target:t,topTarget:e&&e.topTarget}}getSelectedItems(){return this.selectionMap}clearSelectionMap(){this.selectionMap.forEach((t,e)=>{t.dragging=!1}),this.selectionMap.clear()}_dragStart(t){let e=t.target,i=t.event;if(this._draggingItem=e,!e)return void this.clearSelectionMap();e.draggable&&(i.ctrlKey||this.selectionMap.get(e.id)||this.clearSelectionMap(),e.dragging=!0,this.selectionMap.set(e.id,e),this._x=t.offsetX,this._y=t.offsetY,this.handler.on("pagemousemove",this._drag,this),this.handler.on("pagemouseup",this._dragEnd,this),this.selectionMap.forEach((e,i)=>{console.log(e);this.handler.dispatchToElement(this.param(e,t),"dragstart",t.event)}))}_drag(t){let e=t.offsetX,i=t.offsetY,n=e-this._x,r=i-this._y;this._x=e,this._y=i,this.selectionMap.forEach((e,i)=>{e.drift(n,r,t);this.handler.dispatchToElement(this.param(e,t),"drag",t.event)});let o=this.handler.findHover(e,i,this._draggingItem).target,s=this._dropTarget;this._dropTarget=o,this._draggingItem!==o&&(s&&o!==s&&this.handler.dispatchToElement(this.param(s,t),"dragleave",t.event),o&&o!==s&&this.handler.dispatchToElement(this.param(o,t),"dragenter",t.event))}_dragEnd(t){this.selectionMap.forEach((e,i)=>{e.dragging=!1;this.handler.dispatchToElement(this.param(e,t),"dragend",t.event)}),this.handler.off("pagemousemove",this._drag),this.handler.off("pagemouseup",this._dragEnd),this._dropTarget&&this.handler.dispatchToElement(this.param(this._dropTarget,t),"drop",t.event),this._dropTarget=null}}var Kr=function(){this._track=[]};Kr.prototype={constructor:Kr,recognize:function(t,e,i){return this._doTrack(t,e,i),this._recognize(t)},clear:function(){return this._track.length=0,this},_doTrack:function(t,e,i){var n=t.touches;if(n){for(var r={points:[],touches:[],target:e,event:t},o=0,s=n.length;o<s;o++){var a=n[o],h=Mt(i,a,{});r.points.push([h.zrX,h.zrY]),r.touches.push(a)}this._track.push(r)}},_recognize:function(t){for(var e in Jr)if(Jr.hasOwnProperty(e)){var i=Jr[e](this._track,t);if(i)return i}}};var Jr={pinch:function(t,e){var i=t.length;if(i){var n=(t[i-1]||{}).points,r=(t[i-2]||{}).points||n;if(r&&r.length>1&&n&&n.length>1){var o=It(n)/It(r);!isFinite(o)&&(o=1),e.pinchScale=o;var s=Bt(n);return e.pinchX=s[0],e.pinchY=s[1],{type:"pinch",target:t[0].target,event:e}}}}},to="silent";Ft.prototype.dispose=function(){};var eo=["click","dblclick","mousewheel","mouseout","mouseup","mousedown","mousemove","contextmenu","pagemousemove","pagemouseup","pagekeydown","pagekeyup"],io=function(t,e,i,n){qr.call(this,{afterListenerChanged:p(Wt,null,this)}),this.storage=t,this.painter=e,this.painterRoot=n,i=i||new Ft,this.proxy=null,this._hovered={},this._lastTouchMoment,this._lastX,this._lastY,this._gestureMgr,new $r(this),this.setHandlerProxy(i)};io.prototype={constructor:io,setHandlerProxy:function(t){this.proxy&&this.proxy.dispose(),t&&(l(eo,function(e){t.on&&t.on(e,this[e],this)},this),t.handler=this),this.proxy=t},mousemove:function(t){var e=t.zrX,i=t.zrY,n=this._hovered,r=n.target;r&&!r.__zr&&(r=(n=this.findHover(n.x,n.y)).target);var o=this._hovered=this.findHover(e,i),s=o.target,a=this.proxy;a.setCursor&&a.setCursor(s?s.cursor:"default"),r&&s!==r&&this.dispatchToElement(n,"mouseout",t),this.dispatchToElement(o,"mousemove",t),s&&s!==r&&this.dispatchToElement(o,"mouseover",t)},mouseout:function(t){this.dispatchToElement(this._hovered,"mouseout",t);var e,i=t.toElement||t.relatedTarget;do{i=i&&i.parentNode}while(i&&9!==i.nodeType&&!(e=i===this.painterRoot));!e&&this.trigger("globalout",{event:t})},pagemousemove:g(Ht,"pagemousemove"),pagemouseup:g(Ht,"pagemouseup"),pagekeydown:g(Ht,"pagekeydown"),pagekeyup:g(Ht,"pagekeyup"),resize:function(t){this._hovered={}},dispatch:function(t,e){var i=this[t];i&&i.call(this,e)},dispose:function(){this.proxy.dispose(),this.storage=null,this.proxy=null,this.painter=null},setCursorStyle:function(t){var e=this.proxy;e.setCursor&&e.setCursor(t)},dispatchToElement:function(t,e,i){var n=(t=t||{}).target;if(!n||!n.silent){for(var r="on"+e,o=Ot(e,t,i);n&&(n[r]&&(o.cancelBubble=n[r].call(n,o)),n.trigger(e,o),n=n.parent,!o.cancelBubble););o.cancelBubble||(this.trigger(e,o),this.painter&&this.painter.eachOtherLayer(function(t){"function"==typeof t[r]&&t[r].call(t,o),t.trigger&&t.trigger(e,o)}))}},findHover:function(t,e,i){for(var n=this.storage.getDisplayList(),r={x:t,y:e},o=n.length-1;o>=0;o--){var s;if(n[o]!==i&&!n[o].ignore&&(s=Nt(n[o],t,e))&&(!r.topTarget&&(r.topTarget=n[o]),s!==to)){r.target=n[o];break}}return r},processGesture:function(t,e){this._gestureMgr||(this._gestureMgr=new Kr);var i=this._gestureMgr;"start"===e&&i.clear();var n=i.recognize(t,this.findHover(t.zrX,t.zrY,null).target,this.proxy.dom);if("end"===e&&i.clear(),n){var r=n.type;t.gestureEvent=r,this.dispatchToElement({target:n.target},r,n.event)}}},l(["click","mousedown","mouseup","mousewheel","dblclick","contextmenu"],function(t){io.prototype[t]=function(e){var i=this.findHover(e.zrX,e.zrY),n=i.target;if("mousedown"===t)this._downEl=n,this._downPoint=[e.zrX,e.zrY],this._upEl=n;else if("mouseup"===t)this._upEl=n;else if("click"===t){if(this._downEl!==this._upEl||!this._downPoint||Nr(this._downPoint,[e.zrX,e.zrY])>4)return;this._downPoint=null}this.dispatchToElement(i,t,e)}}),Z(io,qr);var no="undefined"==typeof Float32Array?Array:Float32Array,ro=(Object.freeze||Object)({create:Vt,identity:Xt,copy:qt,mul:jt,translate:Yt,rotate:Ut,scale:Gt,invert:Qt,clone:Zt});let oo=Xt,so=5e-5,ao=function(t){(t=t||{}).position||(this.position=[0,0]),null==t.rotation&&(this.rotation=0),t.scale||(this.scale=[1,1]),this.origin=this.origin||null},ho=ao.prototype;ho.transform=null,ho.needLocalTransform=function(){return $t(this.rotation)||$t(this.position[0])||$t(this.position[1])||$t(this.scale[0]-1)||$t(this.scale[1]-1)};let lo=[];ho.updateTransform=function(){let t=this.parent,e=t&&t.transform,i=this.needLocalTransform(),n=this.transform;if(!i&&!e)return void(n&&oo(n));n=n||Vt(),i?this.getLocalTransform(n):oo(n),e&&(i?jt(n,t.transform,n):qt(n,t.transform)),this.transform=n;let r=this.globalScaleRatio;if(null!=r&&1!==r){this.getGlobalScale(lo);let t=lo[0]<0?-1:1,e=lo[1]<0?-1:1,i=((lo[0]-t)*r+t)/lo[0]||0,o=((lo[1]-e)*r+e)/lo[1]||0;n[0]*=i,n[1]*=i,n[2]*=o,n[3]*=o}this.invTransform=this.invTransform||Vt(),Qt(this.invTransform,n)},ho.getLocalTransform=function(t){return ao.getLocalTransform(this,t)},ho.setTransform=function(t){let e=this.transform,i=t.dpr||1;e?t.setTransform(i*e[0],i*e[1],i*e[2],i*e[3],i*e[4],i*e[5]):t.setTransform(i,0,0,i,0,0)},ho.restoreTransform=function(t){let e=t.dpr||1;t.setTransform(e,0,0,e,0,0)};let uo=[],co=Vt();ho.setLocalTransform=function(t){if(t){let e=t[0]*t[0]+t[1]*t[1],i=t[2]*t[2]+t[3]*t[3],n=this.position,r=this.scale;$t(e-1)&&(e=Math.sqrt(e)),$t(i-1)&&(i=Math.sqrt(i)),t[0]<0&&(e=-e),t[3]<0&&(i=-i),n[0]=t[4],n[1]=t[5],r[0]=e,r[1]=i,this.rotation=Math.atan2(-t[1]/i,t[0]/e)}},ho.decomposeTransform=function(){if(this.transform){let t=this.parent,e=this.transform;t&&t.transform&&(jt(uo,t.invTransform,e),e=uo);let i=this.origin;i&&(i[0]||i[1])&&(co[4]=i[0],co[5]=i[1],jt(uo,e,co),uo[4]-=i[0],uo[5]-=i[1],e=uo),this.setLocalTransform(e)}},ho.getGlobalScale=function(t){let e=this.transform;return t=t||[],e?(t[0]=Math.sqrt(e[0]*e[0]+e[1]*e[1]),t[1]=Math.sqrt(e[2]*e[2]+e[3]*e[3]),e[0]<0&&(t[0]=-t[0]),e[3]<0&&(t[1]=-t[1]),t):(t[0]=1,t[1]=1,t)},ho.transformCoordToLocal=function(t,e){let i=[t,e],n=this.invTransform;return n&&yt(i,i,n),i},ho.transformCoordToGlobal=function(t,e){let i=[t,e],n=this.transform;return n&&yt(i,i,n),i},ao.getLocalTransform=function(t,e){oo(e=e||[]);let i=t.origin,n=t.scale||[1,1],r=t.rotation||0,o=t.position||[0,0];return i&&(e[4]-=i[0],e[5]-=i[1]),Gt(e,e,n),r&&Ut(e,e,r),i&&(e[4]+=i[0],e[5]+=i[1]),e[4]+=o[0],e[5]+=o[1],e};var fo={linear:function(t){return t},quadraticIn:function(t){return t*t},quadraticOut:function(t){return t*(2-t)},quadraticInOut:function(t){return(t*=2)<1?.5*t*t:-.5*(--t*(t-2)-1)},cubicIn:function(t){return t*t*t},cubicOut:function(t){return--t*t*t+1},cubicInOut:function(t){return(t*=2)<1?.5*t*t*t:.5*((t-=2)*t*t+2)},quarticIn:function(t){return t*t*t*t},quarticOut:function(t){return 1- --t*t*t*t},quarticInOut:function(t){return(t*=2)<1?.5*t*t*t*t:-.5*((t-=2)*t*t*t-2)},quinticIn:function(t){return t*t*t*t*t},quinticOut:function(t){return--t*t*t*t*t+1},quinticInOut:function(t){return(t*=2)<1?.5*t*t*t*t*t:.5*((t-=2)*t*t*t*t+2)},sinusoidalIn:function(t){return 1-Math.cos(t*Math.PI/2)},sinusoidalOut:function(t){return Math.sin(t*Math.PI/2)},sinusoidalInOut:function(t){return.5*(1-Math.cos(Math.PI*t))},exponentialIn:function(t){return 0===t?0:Math.pow(1024,t-1)},exponentialOut:function(t){return 1===t?1:1-Math.pow(2,-10*t)},exponentialInOut:function(t){return 0===t?0:1===t?1:(t*=2)<1?.5*Math.pow(1024,t-1):.5*(2-Math.pow(2,-10*(t-1)))},circularIn:function(t){return 1-Math.sqrt(1-t*t)},circularOut:function(t){return Math.sqrt(1- --t*t)},circularInOut:function(t){return(t*=2)<1?-.5*(Math.sqrt(1-t*t)-1):.5*(Math.sqrt(1-(t-=2)*t)+1)},elasticIn:function(t){var e,i=.1;return 0===t?0:1===t?1:(!i||i<1?(i=1,e=.1):e=.4*Math.asin(1/i)/(2*Math.PI),-i*Math.pow(2,10*(t-=1))*Math.sin((t-e)*(2*Math.PI)/.4))},elasticOut:function(t){var e,i=.1;return 0===t?0:1===t?1:(!i||i<1?(i=1,e=.1):e=.4*Math.asin(1/i)/(2*Math.PI),i*Math.pow(2,-10*t)*Math.sin((t-e)*(2*Math.PI)/.4)+1)},elasticInOut:function(t){var e,i=.1;return 0===t?0:1===t?1:(!i||i<1?(i=1,e=.1):e=.4*Math.asin(1/i)/(2*Math.PI),(t*=2)<1?i*Math.pow(2,10*(t-=1))*Math.sin((t-e)*(2*Math.PI)/.4)*-.5:i*Math.pow(2,-10*(t-=1))*Math.sin((t-e)*(2*Math.PI)/.4)*.5+1)},backIn:function(t){var e=1.70158;return t*t*((e+1)*t-e)},backOut:function(t){var e=1.70158;return--t*t*((e+1)*t+e)+1},backInOut:function(t){var e=2.5949095;return(t*=2)<1?t*t*((e+1)*t-e)*.5:.5*((t-=2)*t*((e+1)*t+e)+2)},bounceIn:function(t){return 1-fo.bounceOut(1-t)},bounceOut:function(t){return t<1/2.75?7.5625*t*t:t<2/2.75?7.5625*(t-=1.5/2.75)*t+.75:t<2.5/2.75?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375},bounceInOut:function(t){return t<.5?.5*fo.bounceIn(2*t):.5*fo.bounceOut(2*t-1)+.5}};class po{constructor(t){this._target=t.target,this._lifeTime=t.lifeTime||1e3,this._delay=t.delay||0,this._initialized=!1,this.loop=null!=t.loop&&t.loop,this.gap=t.gap||0,this.easing=t.easing||"Linear",this.onframe=t.onframe,this.ondestroy=t.ondestroy,this.onrestart=t.onrestart,this._pausedTime=0,this._paused=!1}nextFrame(t,e){if(this._initialized||(this._startTime=t+this._delay,this._initialized=!0),this._paused)return void(this._pausedTime+=e);let i=(t-this._startTime-this._pausedTime)/this._lifeTime;if(!(i<0)){i=Math.min(i,1);let e=this.easing,n="string"==typeof e?fo[e]:e,r="function"==typeof n?n(i):i;return this.fire("frame",r),1===i?this.loop?(this.restart(t),"restart"):"destroy":i}}restart(t){let e=(t-this._startTime-this._pausedTime)%this._lifeTime;this._startTime=t-e+this.gap,this._pausedTime=0}fire(t,e){this[t="on"+t]&&this[t](this._target,e)}pause(){this._paused=!0}resume(){this._paused=!1}}var go=function(){this.head=null,this.tail=null,this._len=0},_o=go.prototype;_o.insert=function(t){var e=new mo(t);return this.insertEntry(e),e},_o.insertEntry=function(t){this.head?(this.tail.next=t,t.prev=this.tail,t.next=null,this.tail=t):this.head=this.tail=t,this._len++},_o.remove=function(t){var e=t.prev,i=t.next;e?e.next=i:this.head=i,i?i.prev=e:this.tail=e,t.next=t.prev=null,this._len--},_o.len=function(){return this._len},_o.clear=function(){this.head=this.tail=null,this._len=0};var mo=function(t){this.value=t,this.next,this.prev},yo=function(t){this._list=new go,this._map={},this._maxSize=t||10,this._lastRemovedEntry=null},vo=yo.prototype;vo.put=function(t,e){var i=this._list,n=this._map,r=null;if(null==n[t]){var o=i.len(),s=this._lastRemovedEntry;if(o>=this._maxSize&&o>0){var a=i.head;i.remove(a),delete n[a.key],r=a.value,this._lastRemovedEntry=a}s?s.value=e:s=new mo(e),s.key=t,i.insertEntry(s),n[t]=s}return r},vo.get=function(t){var e=this._map[t],i=this._list;if(null!=e)return e!==i.tail&&(i.remove(e),i.insertEntry(e)),e.value},vo.clear=function(){this._list.clear(),this._map={}};var xo={transparent:[0,0,0,0],aliceblue:[240,248,255,1],antiquewhite:[250,235,215,1],aqua:[0,255,255,1],aquamarine:[127,255,212,1],azure:[240,255,255,1],beige:[245,245,220,1],bisque:[255,228,196,1],black:[0,0,0,1],blanchedalmond:[255,235,205,1],blue:[0,0,255,1],blueviolet:[138,43,226,1],brown:[165,42,42,1],burlywood:[222,184,135,1],cadetblue:[95,158,160,1],chartreuse:[127,255,0,1],chocolate:[210,105,30,1],coral:[255,127,80,1],cornflowerblue:[100,149,237,1],cornsilk:[255,248,220,1],crimson:[220,20,60,1],cyan:[0,255,255,1],darkblue:[0,0,139,1],darkcyan:[0,139,139,1],darkgoldenrod:[184,134,11,1],darkgray:[169,169,169,1],darkgreen:[0,100,0,1],darkgrey:[169,169,169,1],darkkhaki:[189,183,107,1],darkmagenta:[139,0,139,1],darkolivegreen:[85,107,47,1],darkorange:[255,140,0,1],darkorchid:[153,50,204,1],darkred:[139,0,0,1],darksalmon:[233,150,122,1],darkseagreen:[143,188,143,1],darkslateblue:[72,61,139,1],darkslategray:[47,79,79,1],darkslategrey:[47,79,79,1],darkturquoise:[0,206,209,1],darkviolet:[148,0,211,1],deeppink:[255,20,147,1],deepskyblue:[0,191,255,1],dimgray:[105,105,105,1],dimgrey:[105,105,105,1],dodgerblue:[30,144,255,1],firebrick:[178,34,34,1],floralwhite:[255,250,240,1],forestgreen:[34,139,34,1],fuchsia:[255,0,255,1],gainsboro:[220,220,220,1],ghostwhite:[248,248,255,1],gold:[255,215,0,1],goldenrod:[218,165,32,1],gray:[128,128,128,1],green:[0,128,0,1],greenyellow:[173,255,47,1],grey:[128,128,128,1],honeydew:[240,255,240,1],hotpink:[255,105,180,1],indianred:[205,92,92,1],indigo:[75,0,130,1],ivory:[255,255,240,1],khaki:[240,230,140,1],lavender:[230,230,250,1],lavenderblush:[255,240,245,1],lawngreen:[124,252,0,1],lemonchiffon:[255,250,205,1],lightblue:[173,216,230,1],lightcoral:[240,128,128,1],lightcyan:[224,255,255,1],lightgoldenrodyellow:[250,250,210,1],lightgray:[211,211,211,1],lightgreen:[144,238,144,1],lightgrey:[211,211,211,1],lightpink:[255,182,193,1],lightsalmon:[255,160,122,1],lightseagreen:[32,178,170,1],lightskyblue:[135,206,250,1],lightslategray:[119,136,153,1],lightslategrey:[119,136,153,1],lightsteelblue:[176,196,222,1],lightyellow:[255,255,224,1],lime:[0,255,0,1],limegreen:[50,205,50,1],linen:[250,240,230,1],magenta:[255,0,255,1],maroon:[128,0,0,1],mediumaquamarine:[102,205,170,1],mediumblue:[0,0,205,1],mediumorchid:[186,85,211,1],mediumpurple:[147,112,219,1],mediumseagreen:[60,179,113,1],mediumslateblue:[123,104,238,1],mediumspringgreen:[0,250,154,1],mediumturquoise:[72,209,204,1],mediumvioletred:[199,21,133,1],midnightblue:[25,25,112,1],mintcream:[245,255,250,1],mistyrose:[255,228,225,1],moccasin:[255,228,181,1],navajowhite:[255,222,173,1],navy:[0,0,128,1],oldlace:[253,245,230,1],olive:[128,128,0,1],olivedrab:[107,142,35,1],orange:[255,165,0,1],orangered:[255,69,0,1],orchid:[218,112,214,1],palegoldenrod:[238,232,170,1],palegreen:[152,251,152,1],paleturquoise:[175,238,238,1],palevioletred:[219,112,147,1],papayawhip:[255,239,213,1],peachpuff:[255,218,185,1],peru:[205,133,63,1],pink:[255,192,203,1],plum:[221,160,221,1],powderblue:[176,224,230,1],purple:[128,0,128,1],red:[255,0,0,1],rosybrown:[188,143,143,1],royalblue:[65,105,225,1],saddlebrown:[139,69,19,1],salmon:[250,128,114,1],sandybrown:[244,164,96,1],seagreen:[46,139,87,1],seashell:[255,245,238,1],sienna:[160,82,45,1],silver:[192,192,192,1],skyblue:[135,206,235,1],slateblue:[106,90,205,1],slategray:[112,128,144,1],slategrey:[112,128,144,1],snow:[255,250,250,1],springgreen:[0,255,127,1],steelblue:[70,130,180,1],tan:[210,180,140,1],teal:[0,128,128,1],thistle:[216,191,216,1],tomato:[255,99,71,1],turquoise:[64,224,208,1],violet:[238,130,238,1],wheat:[245,222,179,1],white:[255,255,255,1],whitesmoke:[245,245,245,1],yellow:[255,255,0,1],yellowgreen:[154,205,50,1]},wo=new yo(20),bo=null,ko=de,To=pe,So=(Object.freeze||Object)({parse:he,lift:ce,toHex:fe,fastLerp:de,fastMapToColor:ko,lerp:pe,mapToColor:To,modifyHSL:ge,modifyAlpha:_e,stringify:me});class Mo{constructor(t){this._target=t._target,this._getter=t._getter,this._setter=t._setter,this._loop=t._loop,this._delay=t._delay,this.isFinished=!1,this.keyframes=[],this.timeline}addKeyFrame(t){this.keyframes.push(t)}nextFrame(t,e){if(this.timeline){let i=this.timeline.nextFrame(t,e);return v(i)&&1===i&&(this.isFinished=!0),i}}fire(t,e){this.timeline.fire(t,e)}start(t,e,i){let n=this._parseKeyFrames(t,e,i);if(!n)return null;let r=new po(n);this.timeline=r}stop(t){t&&this.timeline.onframe(this._target,1)}pause(){this.timeline.pause()}resume(){this.timeline.resume()}_parseKeyFrames(t,e,i){let n=this._loop,r=this._delay,o=this._target,s=this._getter,a=this._setter,l="spline"===t,u=this.keyframes.length;if(u){let c=h(this.keyframes[0].value),f=!1,d=!1,p=c?U(this.keyframes):0;this.keyframes.sort((t,e)=>t.time-e.time);let g=this.keyframes[u-1].time,_=[],m=[],y=this.keyframes[0].value,v=!0;for(let t=0;t<u;t++){_.push(this.keyframes[t].time/g);let e=this.keyframes[t].value;if(c&&V(e,y,p)||!c&&e===y||(v=!1),y=e,"string"==typeof e){let t=he(e);t?(e=t,f=!0):d=!0}m.push(e)}if(i||!v){let i=m[u-1];for(let t=0;t<u-1;t++)c?W(m[t],i,p):!isNaN(m[t])||isNaN(i)||d||f||(m[t]=i);c&&W(s(o,e),i,p);let h,y,v,x,w,b,k=0,T=0,S=[0,0,0,0];return{target:o,lifeTime:g,loop:n,delay:r,onframe:function(t,i){let n;if(i<0)n=0;else if(i<T){for(n=h=Math.min(k+1,u-1);n>=0&&!(_[n]<=i);n--);n=Math.min(n,u-2)}else{for(n=k;n<u&&!(_[n]>i);n++);n=Math.min(n-1,u-2)}k=n,T=i;let r=_[n+1]-_[n];if(0!==r)if(y=(i-_[n])/r,l)if(x=m[n],v=m[0===n?n:n-1],w=m[n>u-2?u-1:n+1],b=m[n>u-3?u-1:n+2],c)X(v,x,w,b,y,y*y,y*y*y,s(t,e),p);else{let i;if(f)i=X(v,x,w,b,y,y*y,y*y*y,S,1),i=Y(S);else{if(d)return H(x,w,y);i=q(v,x,w,b,y,y*y,y*y*y)}a(t,e,i)}else if(c)N(m[n],m[n+1],y,s(t,e),p);else{let i;if(f)N(m[n],m[n+1],y,S,1),i=Y(S);else{if(d)return H(m[n],m[n+1],y);i=F(m[n],m[n+1],y)}a(t,e,i)}},easing:t&&"spline"!==t?t:"Linear"}}}}}class Co{constructor(t,e,i,n){this._trackCacheMap=new Map,this._target=t,this._loop=e||!1,this._getter=i||function(t,e){return t[e]},this._setter=n||function(t,e,i){t[e]=i},this._delay=0,this._paused=!1,this._doneList=[],this._onframeList=[]}when(t,e){for(let i in e)if(e.hasOwnProperty(i)){let n=this._getter(this._target,i);if(null!=n){let r=this._trackCacheMap.get(i);r||(r=new Mo({_target:this._target,_getter:this._getter,_setter:this._setter,_loop:this._loop,_delay:this._delay})),0!==t&&r.addKeyFrame({time:0,value:j(n)}),r.addKeyFrame({time:t,value:e[i]}),this._trackCacheMap.set(i,r)}}return this}during(t){return this._onframeList.push(t),this}_doneCallback(){this._doneList.forEach((t,e)=>{t.call(this)}),this._trackCacheMap=new Map}isFinished(){let t=!0;return[...this._trackCacheMap.values()].forEach((e,i)=>{e.isFinished||(t=!1)}),t}start(t,e){let i=[...this._trackCacheMap.keys()];return i.forEach((i,n)=>{if(!this._trackCacheMap.get(i))return;let r=this._trackCacheMap.get(i);r.start(t,i,e)}),i.length||this._doneCallback(),this}stop(t){[...this._trackCacheMap.values()].forEach((t,e)=>{t.stop(this._target,1)}),this._trackCacheMap=new Map}nextFrame(t,e){let i=[],n=[],r="";[...this._trackCacheMap.values()].forEach((o,s)=>{let a=o.nextFrame(t,e);y(a)?(i.push(a),n.push(o)):v(a)&&(r=a)});let o=i.length;for(let t=0;t<o;t++)n[t].fire(i[t]);if(v(r))for(let t=0;t<this._onframeList.length;t++)this._onframeList[t](this._target,r);this.isFinished()&&this._doneCallback()}pause(){[...this._trackCacheMap.values()].forEach((t,e)=>{t.pause()}),this._paused=!0}resume(){[...this._trackCacheMap.values()].forEach((t,e)=>{t.resume()}),this._paused=!1}isPaused(){return!!this._paused}delay(t){return this._delay=t,this}done(t){return t&&this._doneList.push(t),this}}let Ao=function(){this.animationProcessList=[]};Ao.prototype={constructor:Ao,animate:function(t,e){let i,n=!1,r=this;if(t){let e=t.split("."),o=r;n="shape"===e[0];for(let t=0,i=e.length;t<i;t++)o&&(o=o[e[t]]);o&&(i=o)}else i=r;if(!i)return void console.log('Property "'+t+'" is not existed in element '+r.id);let o=new Co(i,e);return o.during(function(t){r.dirty(n)}).done(function(){r.animationProcessList.splice(a(r.animationProcessList,o),1)}),r.animationProcessList.push(o),this.__zr&&this.__zr.globalAnimationMgr.addAnimationProcess(o),o},stopAnimation:function(t){return this.animationProcessList.forEach((e,i)=>{e.stop(t)}),this.animationProcessList.length=0,this},animateTo:function(t,e,i,n,r,o){ye(this,t,e,i,n,r,o)},animateFrom:function(t,e,i,n,r,o){ye(this,t,e,i,n,r,o,!0)}};class Po{constructor(t){$(this,ao,t),$(this,qr,t),$(this,Ao,t),this.id=t.id||xr(),this.type="element",this.name="",this.__zr=null,this.__dirty=!0,this._rect=null,this.ignore=!1,this.clipPath=null,this.isGroup=!1}drift(t,e){switch(this.draggable){case"horizontal":e=0;break;case"vertical":t=0}let i=this.transform;i||(i=this.transform=[1,0,0,1,0,0]),i[4]+=t,i[5]+=e,this.decomposeTransform(),this.dirty(!1)}beforeUpdate(){}update(){this.updateTransform()}afterUpdate(){}traverse(t,e){}attrKV(t,e){if("position"===t||"scale"===t||"origin"===t){if(e){let i=this[t];i||(i=this[t]=[]),i[0]=e[0],i[1]=e[1]}}else this[t]=e}hide(){this.ignore=!0,this.__zr&&this.__zr.refresh()}show(){this.ignore=!1,this.__zr&&this.__zr.refresh()}attr(t,e){if("String"==typeof t)this.attrKV(t,e);else if(x(t))for(let e in t)t.hasOwnProperty(e)&&this.attrKV(e,t[e]);return this.dirty(!1),this}setClipPath(t){let e=this.__zr;e&&t.addSelfToZr(e),this.clipPath&&this.clipPath!==t&&this.removeClipPath(),this.clipPath=t,t.__zr=e,t.__clipTarget=this,this.dirty(!1)}removeClipPath(){let t=this.clipPath;t&&(t.__zr&&t.removeSelfFromZr(t.__zr),t.__zr=null,t.__clipTarget=null,this.clipPath=null,this.dirty(!1))}dirty(){this.__dirty=this.__dirtyText=!0,this._rect=null,this.__zr&&this.__zr.refresh()}addSelfToZr(t){this.__zr=t;let e=this.animationProcessList;if(e)for(let i=0;i<e.length;i++)t.globalAnimationMgr.addAnimationProcess(e[i]);this.clipPath&&this.clipPath.addSelfToZr(t)}removeSelfFromZr(t){this.__zr=null;let e=this.animationProcessList;if(e)for(let i=0;i<e.length;i++)t.globalAnimationMgr.removeAnimationProcess(e[i]);this.clipPath&&this.clipPath.removeSelfFromZr(t)}}Z(Po,Ao),Z(Po,ao),Z(Po,qr);let Lo=yt,zo=Math.min,Do=Math.max,Eo=[],Io=[],Bo=[],Oo=[];class Ro{constructor(t,e,i,n){i<0&&(t+=i,i=-i),n<0&&(e+=n,n=-n),this.x=t,this.y=e,this.width=i,this.height=n}static create(t){return new Ro(t.x,t.y,t.width,t.height)}union(t){let e=zo(t.x,this.x),i=zo(t.y,this.y);this.width=Do(t.x+t.width,this.x+this.width)-e,this.height=Do(t.y+t.height,this.y+this.height)-i,this.x=e,this.y=i}applyTransform(t){if(t){Eo[0]=Bo[0]=this.x,Eo[1]=Oo[1]=this.y,Io[0]=Oo[0]=this.x+this.width,Io[1]=Bo[1]=this.y+this.height,Lo(Eo,Eo,t),Lo(Io,Io,t),Lo(Bo,Bo,t),Lo(Oo,Oo,t),this.x=zo(Eo[0],Io[0],Bo[0],Oo[0]),this.y=zo(Eo[1],Io[1],Bo[1],Oo[1]);let e=Do(Eo[0],Io[0],Bo[0],Oo[0]),i=Do(Eo[1],Io[1],Bo[1],Oo[1]);this.width=e-this.x,this.height=i-this.y}}calculateTransform(t){let e=this,i=t.width/e.width,n=t.height/e.height,r=Vt();return Yt(r,r,[-e.x,-e.y]),Gt(r,r,[i,n]),Yt(r,r,[t.x,t.y]),r}intersect(t){if(!t)return!1;t instanceof Ro||(t=Ro.create(t));let e=this,i=e.x,n=e.x+e.width,r=e.y,o=e.y+e.height,s=t.x,a=t.x+t.width,h=t.y,l=t.y+t.height;return!(n<s||a<i||o<h||l<r)}contain(t,e){let i=this;return t>=i.x&&t<=i.x+i.width&&e>=i.y&&e<=i.y+i.height}clone(){return new Ro(this.x,this.y,this.width,this.height)}copy(t){this.x=t.x,this.y=t.y,this.width=t.width,this.height=t.height}plain(){return{x:this.x,y:this.y,width:this.width,height:this.height}}}class Fo extends Po{constructor(t={}){super(t),this._children=[],this.__storage=null,this.__dirty=!0,this.isGroup=!0,this.type="group",this.silent=!1,J(this,t)}children(){return this._children.slice()}childAt(t){return this._children[t]}childOfName(t){let e=this._children;for(let i=0;i<e.length;i++)if(e[i].name===t)return e[i]}childCount(){return this._children.length}add(t){return t&&t!==this&&t.parent!==this&&(this._children.push(t),this._doAdd(t)),this}addBefore(t,e){if(t&&t!==this&&t.parent!==this&&e&&e.parent===this){let i=this._children,n=i.indexOf(e);n>=0&&(i.splice(n,0,t),this._doAdd(t))}return this}_doAdd(t){t.parent&&t.parent.remove(t),t.parent=this;let e=this.__storage,i=this.__zr;e&&e!==t.__storage&&(e.addToStorage(t),t instanceof Fo&&t.addChildrenToStorage(e)),i&&i.refresh()}remove(t){let e=this.__zr,i=this.__storage,n=this._children,r=dataUtil.indexOf(n,t);return r<0?this:(n.splice(r,1),t.parent=null,i&&(i.delFromStorage(t),t instanceof Fo&&t.delChildrenFromStorage(i)),e&&e.refresh(),this)}removeAll(){let t,e,i=this._children,n=this.__storage;for(e=0;e<i.length;e++)t=i[e],n&&(n.delFromStorage(t),t instanceof Fo&&t.delChildrenFromStorage(n)),t.parent=null;return i.length=0,this}eachChild(t,e){let i=this._children;for(let n=0;n<i.length;n++){let r=i[n];t.call(e,r,n)}return this}traverse(t,e){for(let i=0;i<this._children.length;i++){let n=this._children[i];t.call(e,n),"group"===n.type&&n.traverse(t,e)}return this}addChildrenToStorage(t){for(let e=0;e<this._children.length;e++){let i=this._children[e];t.addToStorage(i),i instanceof Fo&&i.addChildrenToStorage(t)}}delChildrenFromStorage(t){for(let e=0;e<this._children.length;e++){let i=this._children[e];t.delFromStorage(i),i instanceof Fo&&i.delChildrenFromStorage(t)}}dirty(){return this.__dirty=!0,this.__zr&&this.__zr.refresh(),this}getBoundingRect(t){let e=null,i=new Ro(0,0,0,0),n=t||this._children,r=[];for(let t=0;t<n.length;t++){let o=n[t];if(!o.ignore&&!o.invisible){let t=o.getBoundingRect(),n=o.getLocalTransform(r);n?(i.copy(t),i.applyTransform(n),(e=e||i.clone()).union(i)):(e=e||t.clone()).union(t)}}return e||i}}var Ho=32,No=7;let Wo=function(){this._roots=[],this._displayList=[],this._displayListLen=0};Wo.prototype={constructor:Wo,traverse:function(t,e){for(let i=0;i<this._roots.length;i++)this._roots[i].traverse(t,e)},getDisplayList:function(t,e){return e=e||!1,t&&this.updateDisplayList(e),this._displayList},updateDisplayList:function(t){this._displayListLen=0;let e=this._roots,i=this._displayList;for(let i=0,n=e.length;i<n;i++)this._updateAndAddDisplayable(e[i],null,t);i.length=this._displayListLen,br.canvasSupported&&Ae(i,this.displayableSortFunc)},_updateAndAddDisplayable:function(t,e,i){if(!t.ignore||i){t.beforeUpdate(),t.__dirty&&t.update(),t.afterUpdate();let n=t.clipPath;if(n){e=e?e.slice():[];let i=n,r=t;for(;i;)i.parent=r,i.updateTransform(),e.push(i),r=i,i=i.clipPath}if(t.isGroup){let n=t._children;for(let r=0;r<n.length;r++){let o=n[r];t.__dirty&&(o.__dirty=!0),this._updateAndAddDisplayable(o,e,i)}t.__dirty=!1}else t.__clipPaths=e,this._displayList[this._displayListLen++]=t}},addRoot:function(t){t.__storage!==this&&(t instanceof Fo&&t.addChildrenToStorage(this),this.addToStorage(t),this._roots.push(t))},delRoot:function(t){if(null==t){for(let t=0;t<this._roots.length;t++){let e=this._roots[t];e instanceof Fo&&e.delChildrenFromStorage(this)}return this._roots=[],this._displayList=[],void(this._displayListLen=0)}if(t instanceof Array)for(let e=0,i=t.length;e<i;e++)this.delRoot(t[e]);else{let e=a(this._roots,t);e>=0&&(this.delFromStorage(t),this._roots.splice(e,1),t instanceof Fo&&t.delChildrenFromStorage(this))}},addToStorage:function(t){return t&&(t.__storage=this,t.dirty(!1)),this},delFromStorage:function(t){return t&&(t.__storage=null),this},dispose:function(){this._renderList=this._roots=null},displayableSortFunc:function(t,e){return t.zlevel===e.zlevel?t.z===e.z?t.z2-e.z2:t.z-e.z:t.zlevel-e.zlevel}};var Vo="undefined"!=typeof window&&(window.requestAnimationFrame&&window.requestAnimationFrame.bind(window)||window.msRequestAnimationFrame&&window.msRequestAnimationFrame.bind(window)||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame)||function(t){setTimeout(t,16)},Xo=1;"undefined"!=typeof window&&(Xo=Math.max(window.devicePixelRatio||1,1));var qo=Xo,jo={shadowBlur:1,shadowOffsetX:1,shadowOffsetY:1,textShadowBlur:1,textShadowOffsetX:1,textShadowOffsetY:1,textBoxShadowBlur:1,textBoxShadowOffsetX:1,textBoxShadowOffsetY:1},Yo=function(t,e,i){return jo.hasOwnProperty(e)?i*=t.dpr:i},Uo={NONE:0,STYLE_BIND:1,PLAIN_TEXT:2},Go=9;let Qo=[["shadowBlur",0],["shadowOffsetX",0],["shadowOffsetY",0],["shadowColor","#000"],["lineCap","butt"],["lineJoin","miter"],["miterLimit",10]],Zo=function(t){this.extendStyle(t,!1)};Zo.prototype={constructor:Zo,fill:"#000",stroke:null,opacity:1,fillOpacity:null,strokeOpacity:null,lineDash:null,lineDashOffset:0,shadowBlur:0,shadowOffsetX:0,shadowOffsetY:0,lineWidth:1,strokeNoScale:!1,text:null,font:null,textFont:null,fontStyle:null,fontWeight:null,fontSize:null,fontFamily:null,textTag:null,textFill:"#000",textStroke:null,textWidth:null,textHeight:null,textStrokeWidth:0,textLineHeight:null,textPosition:"inside",textRect:null,textOffset:null,textAlign:null,textVerticalAlign:null,textDistance:5,textShadowColor:"transparent",textShadowBlur:0,textShadowOffsetX:0,textShadowOffsetY:0,textBoxShadowColor:"transparent",textBoxShadowBlur:0,textBoxShadowOffsetX:0,textBoxShadowOffsetY:0,transformText:!1,textRotation:0,textOrigin:null,textBackgroundColor:null,textBorderColor:null,textBorderWidth:0,textBorderRadius:0,textPadding:null,rich:null,truncate:null,blend:null,bind:function(t,e,i){let n=this,r=i&&i.style,o=!r||t.__attrCachedBy!==Uo.STYLE_BIND;t.__attrCachedBy=Uo.STYLE_BIND;for(let e=0;e<Qo.length;e++){let i=Qo[e],s=i[0];(o||n[s]!==r[s])&&(t[s]=Yo(t,s,n[s]||i[1]))}if((o||n.fill!==r.fill)&&(t.fillStyle=n.fill),(o||n.stroke!==r.stroke)&&(t.strokeStyle=n.stroke),(o||n.opacity!==r.opacity)&&(t.globalAlpha=null==n.opacity?1:n.opacity),(o||n.blend!==r.blend)&&(t.globalCompositeOperation=n.blend||"source-over"),this.hasStroke()){let i=n.lineWidth;t.lineWidth=i/(this.strokeNoScale&&e&&e.getLineScale?e.getLineScale():1)}},hasFill:function(){let t=this.fill;return null!=t&&"none"!==t},hasStroke:function(){let t=this.stroke;return null!=t&&"none"!==t&&this.lineWidth>0},extendStyle:function(t,e){if(t)for(let i in t)!t.hasOwnProperty(i)||!0!==e&&(!1===e?this.hasOwnProperty(i):null==t[i])||(this[i]=t[i])},set:function(t,e){"string"==typeof t?this[t]=e:this.extendStyle(t,!0)},clone:function(){let t=new this.constructor;return t.extendStyle(this,!0),t},getGradient:function(t,e,i){let n=("radial"===e.type?Le:Pe)(t,e,i),r=e.colorStops;for(let t=0;t<r.length;t++)n.addColorStop(r[t].offset,r[t].color);return n}};let $o=Zo.prototype;for(let t=0;t<Qo.length;t++){let e=Qo[t];e[0]in $o||($o[e[0]]=e[1])}Zo.getGradient=$o.getGradient;class Ko{constructor(t,e){this.image=t,this.repeat=e,this.type="pattern"}getCanvasPattern(t){return t.createPattern(this.image,this.repeat||"repeat")}}let Jo=function(t,e,i){let n;i=i||qo,"string"==typeof t?n=ze(t,e,i):x(t)&&(t=(n=t).id),this.id=t,this.dom=n;let r=n.style;r&&(n.onselectstart=(()=>!1),r["-webkit-user-select"]="none",r["user-select"]="none",r["-webkit-touch-callout"]="none",r["-webkit-tap-highlight-color"]="rgba(0,0,0,0)",r.padding=0,r.margin=0,r["border-width"]=0),this.domBack=null,this.ctxBack=null,this.painter=e,this.config=null,this.clearColor=0,this.motionBlur=!1,this.lastFrameAlpha=.7,this.dpr=i};Jo.prototype={constructor:Jo,__dirty:!0,__used:!1,__drawIndex:0,__startIndex:0,__endIndex:0,incremental:!1,getElementCount:function(){return this.__endIndex-this.__startIndex},initContext:function(){this.ctx=this.dom.getContext("2d"),this.ctx.dpr=this.dpr},createBackBuffer:function(){let t=this.dpr;this.domBack=ze("back-"+this.id,this.painter,t),this.ctxBack=this.domBack.getContext("2d"),1!==t&&this.ctxBack.scale(t,t)},resize:function(t,e){let i=this.dpr,n=this.dom,r=n.style,o=this.domBack;r&&(r.width=t+"px",r.height=e+"px"),n.width=t*i,n.height=e*i,o&&(o.width=t*i,o.height=e*i,1!==i&&this.ctxBack.scale(i,i))},clear:function(t,e){e=e||this.clearColor;let i=this.dom,n=this.ctx,r=i.width,o=i.height,s=this.motionBlur&&!t,a=this.lastFrameAlpha,h=this.dpr;if(s&&(this.domBack||this.createBackBuffer(),this.ctxBack.globalCompositeOperation="copy",this.ctxBack.drawImage(i,0,0,r/h,o/h)),n.clearRect(0,0,r,o),e&&"transparent"!==e){let t;e.colorStops?(t=e.__canvasGradient||Zo.getGradient(n,e,{x:0,y:0,width:r,height:o}),e.__canvasGradient=t):e.image&&(t=Ko.prototype.getCanvasPattern.call(e,n)),n.save(),n.fillStyle=t||e,n.fillRect(0,0,r,o),n.restore()}if(s){let t=this.domBack;n.save(),n.globalAlpha=a,n.drawImage(t,0,0,r,o),n.restore()}}};var ts=new yo(50),es={},is=0,ns=5e3,rs=/\{([a-zA-Z0-9_]+)\|([^}]*)\}/g,os="12px sans-serif",ss={};ss.measureText=function(t,e){var i=s();return i.font=e||os,i.measureText(t)};var as=os,hs={left:1,right:1,center:1},ls={top:1,bottom:1,middle:1},us=[["textShadowBlur","shadowBlur",0],["textShadowOffsetX","shadowOffsetX",0],["textShadowOffsetY","shadowOffsetY",0],["textShadowColor","shadowColor","transparent"]],cs={},fs={};let ds=new Ro,ps=function(){};ps.prototype={constructor:ps,drawRectText:function(t,e){let i=this.style;e=i.textRect||e,this.__dirty&&ti(i);let n=i.text;if(null!=n&&(n+=""),mi(n,i)){t.save();let r=this.transform;i.transformText?this.setTransform(t):r&&(ds.copy(e),ds.applyTransform(r),e=ds),ii(this,t,n,i,e,Go),t.restore()}}};class gs extends Po{constructor(t={}){super(t),this.style=new Zo(t.style,this),this.__clipPaths=null,this.calculateTextPosition=null,this.type="displayable",this.invisible=!1,this.z=0,this.z2=0,this.zlevel=0,this.draggable=!1,this.dragging=!1,this.silent=!1,this.culling=!1,this.cursor="pointer",this.rectHover=!1,this.progressive=!1,this.incremental=!1,this.globalScaleRatio=1,J(this,t,["style"])}beforeBrush(t){}brush(t,e){}afterBrush(t){}getBoundingRect(){}contain(t,e){return this.rectContain(t,e)}rectContain(t,e){let i=this.transformCoordToLocal(t,e);return this.getBoundingRect().contain(i[0],i[1])}traverse(t,e){t.call(e,this)}animateStyle(t){return this.animate("style",t)}attrKV(t,e){"style"!==t?Po.prototype.attrKV.call(this,t,e):this.style.set(e)}setStyle(t,e){return this.style.set(t,e),this.dirty(!1),this}useStyle(t){return this.style=new Zo(t,this),this.dirty(!1),this}}Z(gs,ps);class _s extends gs{constructor(t){super(t),this.type="image"}brush(t,e){let i=this.style,n=i.image;i.bind(t,this,e);let r=this._image=Ee(n,this._image,this,this.onload);if(r&&Be(r)){let e=i.x||0,n=i.y||0,o=i.width,s=i.height,a=r.width/r.height;if(null==o&&null!=s?o=s*a:null==s&&null!=o?s=o/a:null==o&&null==s&&(o=r.width,s=r.height),this.setTransform(t),i.sWidth&&i.sHeight){let a=i.sx||0,h=i.sy||0;t.drawImage(r,a,h,i.sWidth,i.sHeight,e,n,o,s)}else if(i.sx&&i.sy){let a=i.sx,h=i.sy,l=o-a,u=s-h;t.drawImage(r,a,h,l,u,e,n,o,s)}else t.drawImage(r,e,n,o,s);null!=i.text&&(this.restoreTransform(t),this.drawRectText(t,this.getBoundingRect()))}}getBoundingRect(){let t=this.style;return this._rect||(this._rect=new Ro(t.x||0,t.y||0,t.width||0,t.height||0)),this._rect}}let ms=new Ro(0,0,0,0),ys=new Ro(0,0,0,0),vs=function(t,e,i){this.type="canvas";let n=!t.nodeName||"CANVAS"===t.nodeName.toUpperCase();this._opts=i=o({},i||{}),this.dpr=i.devicePixelRatio||qo,this._singleCanvas=n,this.root=t;let r=t.style;r&&(r["-webkit-tap-highlight-color"]="transparent",r["-webkit-user-select"]=r["user-select"]=r["-webkit-touch-callout"]="none",t.innerHTML=""),this.storage=e;let s=this._zlevelList=[],a=this._layers={};if(this._layerConfig={},this._needsManuallyCompositing=!1,n){let e=t.width,n=t.height;null!=i.width&&(e=i.width),null!=i.height&&(n=i.height),this.dpr=i.devicePixelRatio||1,t.width=e*this.dpr,t.height=n*this.dpr,this._width=e,this._height=n;let r=new Jo(t,this,this.dpr);r.__builtin__=!0,r.initContext(),a[314159]=r,r.zlevel=314159,s.push(314159),this._domRoot=t}else{this._width=this._getSize(0),this._height=this._getSize(1);let e=this._domRoot=bi(this._width,this._height);t.appendChild(e)}this._hoverlayer=null,this._hoverElements=[]};vs.prototype={constructor:vs,getType:function(){return"canvas"},isSingleCanvas:function(){return this._singleCanvas},getViewportRoot:function(){return this._domRoot},getViewportRootOffset:function(){let t=this.getViewportRoot();if(t)return{offsetLeft:t.offsetLeft||0,offsetTop:t.offsetTop||0}},refresh:function(t){let e=this.storage.getDisplayList(!0),i=this._zlevelList;this._redrawId=Math.random(),this._paintList(e,t,this._redrawId);for(let t=0;t<i.length;t++){let e=i[t],n=this._layers[e];if(!n.__builtin__&&n.refresh){let e=0===t?this._backgroundColor:null;n.refresh(e)}}return this.refreshHover(),this},addHover:function(t,e){if(!t.__hoverMir){let i=new t.constructor({style:t.style,shape:t.shape,z:t.z,z2:t.z2,silent:t.silent});return i.__from=t,t.__hoverMir=i,e&&i.setStyle(e),this._hoverElements.push(i),i}},removeHover:function(t){let e=t.__hoverMir,i=this._hoverElements,n=a(i,e);n>=0&&i.splice(n,1),t.__hoverMir=null},clearHover:function(t){let e=this._hoverElements;for(let t=0;t<e.length;t++){let i=e[t].__from;i&&(i.__hoverMir=null)}e.length=0},refreshHover:function(){let t=this._hoverElements,e=t.length,i=this._hoverlayer;if(i&&i.clear(),e){Ae(t,this.storage.displayableSortFunc),i||(i=this._hoverlayer=this.getLayer(1e5));let n={};i.ctx.save();for(let r=0;r<e;){let o=t[r],s=o.__from;s&&s.__zr?(r++,s.invisible||(o.transform=s.transform,o.invTransform=s.invTransform,o.__clipPaths=s.__clipPaths,this._doPaintEl(o,i,!0,n))):(t.splice(r,1),s.__hoverMir=null,e--)}i.ctx.restore()}},getHoverLayer:function(){return this.getLayer(1e5)},_paintList:function(t,e,i){if(this._redrawId===i){e=e||!1,this._updateLayerStatus(t);let n=this._doPaintList(t,e);if(this._needsManuallyCompositing&&this._compositeManually(),!n){let n=this;Vo(function(){n._paintList(t,e,i)})}}},_compositeManually:function(){let t=this.getLayer(314159).ctx,e=this._domRoot.width,i=this._domRoot.height;t.clearRect(0,0,e,i),this.eachBuiltinLayer(function(n){n.virtual&&t.drawImage(n.dom,0,0,e,i)})},_doPaintList:function(t,e){let i=[];for(let t=0;t<this._zlevelList.length;t++){let n=this._zlevelList[t],r=this._layers[n];r.__builtin__&&r!==this._hoverlayer&&(r.__dirty||e)&&i.push(r)}let n=!0;for(let r=0;r<i.length;r++){let o=i[r],s=o.ctx,a={};s.save();let h=e?o.__startIndex:o.__drawIndex,l=!e&&o.incremental&&Date.now,u=l&&Date.now(),c=o.zlevel===this._zlevelList[0]?this._backgroundColor:null;if(o.__startIndex===o.__endIndex)o.clear(!1,c);else if(h===o.__startIndex){let i=t[h];i.incremental&&i.notClear&&!e||o.clear(!1,c)}-1===h&&(console.error("For some unknown reason. drawIndex is -1"),h=o.__startIndex);let f=h;for(;f<o.__endIndex;f++){let i=t[f];if(this._doPaintEl(i,o,e,a),i.__dirty=i.__dirtyText=!1,l){let t=Date.now()-u;if(t>15)break}}o.__drawIndex=f,o.__drawIndex<o.__endIndex&&(n=!1),a.prevElClipPaths&&s.restore(),s.restore()}return br.wxa&&l(this._layers,function(t){t&&t.ctx&&t.ctx.draw&&t.ctx.draw()}),n},_doPaintEl:function(t,e,i,n){let r=e.ctx,o=t.transform;if((e.__dirty||i)&&!t.invisible&&0!==t.style.opacity&&(!o||o[0]||o[3])&&(!t.culling||!vi(t,this._width,this._height))){let e=t.__clipPaths,i=n.prevElClipPaths;i&&!xi(e,i)||(i&&(r.restore(),n.prevElClipPaths=null,n.prevEl=null),e&&(r.save(),wi(e,r),n.prevElClipPaths=e)),t.beforeBrush&&t.beforeBrush(r),t.brush(r,n.prevEl||null),n.prevEl=t,t.afterBrush&&t.afterBrush(r)}},getLayer:function(t,e){this._singleCanvas&&!this._needsManuallyCompositing&&(t=314159);let i=this._layers[t];return i||((i=new Jo("zr_"+t,this,this.dpr)).zlevel=t,i.__builtin__=!0,this._layerConfig[t]&&n(i,this._layerConfig[t],!0),e&&(i.virtual=e),this.insertLayer(t,i),i.initContext()),i},insertLayer:function(t,e){let i=this._layers,n=this._zlevelList,r=n.length,o=null,s=-1,a=this._domRoot;if(i[t])return void console.log("ZLevel "+t+" has been used already");if(!yi(e))return void console.log("Layer of zlevel "+t+" is not valid");if(r>0&&t>n[0]){for(s=0;s<r-1&&!(n[s]<t&&n[s+1]>t);s++);o=i[n[s]]}if(n.splice(s+1,0,t),i[t]=e,!e.virtual)if(o){let t=o.dom;t.nextSibling?a.insertBefore(e.dom,t.nextSibling):a.appendChild(e.dom)}else a.firstChild?a.insertBefore(e.dom,a.firstChild):a.appendChild(e.dom)},eachLayer:function(t,e){let i,n,r=this._zlevelList;for(n=0;n<r.length;n++)i=r[n],t.call(e,this._layers[i],i)},eachBuiltinLayer:function(t,e){let i,n,r,o=this._zlevelList;for(r=0;r<o.length;r++)n=o[r],(i=this._layers[n]).__builtin__&&t.call(e,i,n)},eachOtherLayer:function(t,e){let i,n,r,o=this._zlevelList;for(r=0;r<o.length;r++)n=o[r],(i=this._layers[n]).__builtin__||t.call(e,i,n)},getLayers:function(){return this._layers},_updateLayerStatus:function(t){function e(t){i&&(i.__endIndex!==t&&(i.__dirty=!0),i.__endIndex=t)}if(this.eachBuiltinLayer(function(t,e){t.__dirty=t.__used=!1}),this._singleCanvas)for(let e=1;e<t.length;e++){let i=t[e];if(i.zlevel!==t[e-1].zlevel||i.incremental){this._needsManuallyCompositing=!0;break}}let i=null,n=0,r=0;for(;r<t.length;r++){let o,s=t[r],a=s.zlevel;s.incremental?((o=this.getLayer(a+.001,this._needsManuallyCompositing)).incremental=!0,n=1):o=this.getLayer(a+(n>0?.01:0),this._needsManuallyCompositing),o.__builtin__||console.log("ZLevel "+a+" has been used by unkown layer "+o.id),o!==i&&(o.__used=!0,o.__startIndex!==r&&(o.__dirty=!0),o.__startIndex=r,o.incremental?o.__drawIndex=-1:o.__drawIndex=r,e(r),i=o),s.__dirty&&(o.__dirty=!0,o.incremental&&o.__drawIndex<0&&(o.__drawIndex=r))}e(r),this.eachBuiltinLayer(function(t,e){!t.__used&&t.getElementCount()>0&&(t.__dirty=!0,t.__startIndex=t.__endIndex=t.__drawIndex=0),t.__dirty&&t.__drawIndex<0&&(t.__drawIndex=t.__startIndex)})},clear:function(){return this.eachBuiltinLayer(this._clearLayer),this},_clearLayer:function(t){t.clear()},setBackgroundColor:function(t){this._backgroundColor=t},configLayer:function(t,e){if(e){let i=this._layerConfig;i[t]?n(i[t],e,!0):i[t]=e;for(let e=0;e<this._zlevelList.length;e++){let r=this._zlevelList[e];if(r===t||r===t+.01){let e=this._layers[r];n(e,i[t],!0)}}}},delLayer:function(t){let e=this._layers,i=this._zlevelList,n=e[t];n&&(n.dom.parentNode.removeChild(n.dom),delete e[t],i.splice(a(i,t),1))},resize:function(t,e){if(this._domRoot.style){let i=this._domRoot;i.style.display="none";let n=this._opts;if(null!=t&&(n.width=t),null!=e&&(n.height=e),t=this._getSize(0),e=this._getSize(1),i.style.display="",this._width!==t||e!==this._height){i.style.width=t+"px",i.style.height=e+"px";for(let i in this._layers)this._layers.hasOwnProperty(i)&&this._layers[i].resize(t,e);l(this._progressiveLayers,function(i){i.resize(t,e)}),this.refresh(!0)}this._width=t,this._height=e}else{if(null==t||null==e)return;this._width=t,this._height=e,this.getLayer(314159).resize(t,e)}return this},clearLayer:function(t){let e=this._layers[t];e&&e.clear()},dispose:function(){this.root.innerHTML="",this.root=this.storage=this._domRoot=this._layers=null},getRenderedCanvas:function(t){if(t=t||{},this._singleCanvas&&!this._compositeManually)return this._layers[314159].dom;let e=new Jo("image",this,t.pixelRatio||this.dpr);if(e.initContext(),e.clear(!1,t.backgroundColor||this._backgroundColor),t.pixelRatio<=this.dpr){this.refresh();let t=e.dom.width,i=e.dom.height,n=e.ctx;this.eachLayer(function(r){r.__builtin__?n.drawImage(r.dom,0,0,t,i):r.renderToCanvas&&(e.ctx.save(),r.renderToCanvas(e.ctx),e.ctx.restore())})}else{let t={},i=this.storage.getDisplayList(!0);for(let n=0;n<i.length;n++){let r=i[n];this._doPaintEl(r,e,!0,t)}}return e.dom},getWidth:function(){return this._width},getHeight:function(){return this._height},_getSize:function(t){let e=this._opts,i=["width","height"][t],n=["clientWidth","clientHeight"][t],r=["paddingLeft","paddingTop"][t],o=["paddingRight","paddingBottom"][t];if(null!=e[i]&&"auto"!==e[i])return parseFloat(e[i]);let s=this.root,a=document.defaultView.getComputedStyle(s);return(s[n]||G(a[i])||G(s.style[i]))-(G(a[r])||0)-(G(a[o])||0)|0},pathToImage:function(t,e){e=e||this.dpr;let i=document.createElement("canvas"),n=i.getContext("2d"),r=t.getBoundingRect(),o=t.style,s=o.shadowBlur*e,a=o.shadowOffsetX*e,h=o.shadowOffsetY*e,l=o.hasStroke()?o.lineWidth:0,u=Math.max(l/2,-a+s),c=Math.max(l/2,a+s),f=Math.max(l/2,-h+s),d=Math.max(l/2,h+s),p=r.width+u+c,g=r.height+f+d;i.width=p*e,i.height=g*e,n.scale(e,e),n.clearRect(0,0,p,g),n.dpr=e;let _={position:t.position,rotation:t.rotation,scale:t.scale};t.position=[u-r.x,f-r.y],t.rotation=0,t.scale=[1,1],t.updateTransform(),t&&t.brush(n);let m=new _s({style:{x:0,y:0,image:i}});return null!=_.position&&(m.position=t.position=_.position),null!=_.rotation&&(m.rotation=t.rotation=_.rotation),null!=_.scale&&(m.scale=t.scale=_.scale),m}};class xs{constructor(t){t=t||{},this._animationProcessList=[],this._running=!1,this._timestamp,this._pausedTime,this._pauseStart,this._paused=!1,qr.call(this)}addAnimationProcess(t){this._animationProcessList.push(t)}removeAnimationProcess(t){let e=this._animationProcessList.findIndex(t);e>=0&&this._animationProcessList.splice(e,1)}_update(){let t=(new Date).getTime()-this._pausedTime,e=t-this._timestamp;this._animationProcessList.forEach((i,n)=>{i.nextFrame(t,e)}),this._timestamp=t,this.trigger("frame",e)}_startLoop(){function t(){e._running&&(Vo(t),!e._paused&&e._update())}let e=this;this._running=!0,Vo(t)}start(){this._timestamp=(new Date).getTime(),this._pausedTime=0,this._startLoop()}stop(){this._running=!1}pause(){this._paused||(this._pauseStart=(new Date).getTime(),this._paused=!0)}resume(){this._paused&&(this._pausedTime+=(new Date).getTime()-this._pauseStart,this._paused=!1)}clear(){this._animationProcessList.length=0}isFinished(){let t=!0;return this._animationProcessList.forEach((e,i)=>{e.isFinished()||(t=!1)}),t}}Z(xs,qr);let ws=br.domSupported,bs=function(){let t=["click","dblclick","mousewheel","mouseout","mouseup","mousedown","mousemove","contextmenu"],e={pointerdown:1,pointerup:1,pointermove:1,pointerout:1};return{mouse:t,touch:["touchstart","touchend","touchmove"],pointer:u(t,function(t){let i=t.replace("mouse","pointer");return e.hasOwnProperty(i)?i:t})}}(),ks={keyboard:["keydown","keyup"],mouse:["mousemove","mouseup"],touch:["touchmove","touchend"],pointer:["pointermove","pointerup"]},Ts={mouseout:function(t){let e=(t=zt(this.dom,t)).toElement||t.relatedTarget;if(e!==this.dom)for(;e&&9!==e.nodeType;){if(e===this.dom)return;e=e.parentNode}this.trigger("mouseout",t)},touchstart:function(t){Ai(t=zt(this.dom,t)),this._lastTouchMoment=new Date,this.handler.processGesture(t,"start"),Ts.mousemove.call(this,t),Ts.mousedown.call(this,t)},touchmove:function(t){Ai(t=zt(this.dom,t)),this.handler.processGesture(t,"change"),Ts.mousemove.call(this,t)},touchend:function(t){Ai(t=zt(this.dom,t)),this.handler.processGesture(t,"end"),Ts.mouseup.call(this,t),+new Date-this._lastTouchMoment<300&&Ts.click.call(this,t)},pointerdown:function(t){Ts.mousedown.call(this,t)},pointermove:function(t){Ti(t)||Ts.mousemove.call(this,t)},pointerup:function(t){Ts.mouseup.call(this,t)},pointerout:function(t){Ti(t)||Ts.mouseout.call(this,t)}};l(["click","mousemove","mousedown","mouseup","mousewheel","dblclick","contextmenu"],function(t){Ts[t]=function(e){e=zt(this.dom,e),this.trigger(t,e),"mousemove"!==t&&"mouseup"!==t||this.trigger("page"+t,e)}});let Ss={touchmove:function(t){Ai(t),Ss.mousemove.call(this,t)},touchend:function(t){Ai(t),Ss.mouseup.call(this,t)},pointermove:function(t){Ti(t)||Ss.mousemove.call(this,t)},pointerup:function(t){Ss.mouseup.call(this,t)},mousemove:function(t){t=zt(this.dom,t,!0),this.trigger("pagemousemove",t)},mouseup:function(t){t=zt(this.dom,t,!0),this.trigger("pagemouseup",t)},keyup:function(t){t=zt(this.dom,t,!0),this.trigger("pagekeyup",t)},keydown:function(t){t=zt(this.dom,t,!0),this.trigger("pagekeydown",t)}};if(Di.prototype.dispose=function(){Li(this._localHandlerScope),ws&&Li(this._globalHandlerScope)},Di.prototype.setCursor=function(t){this.dom.style&&(this.dom.style.cursor=t||"default")},Di.prototype.togglePageEvent=function(t){if(L(null!=t),ws&&this._pageEventEnabled^t){this._pageEventEnabled=t;let e=this._globalHandlerScope;t?Pi(this,e,ks):Li(e)}},Z(Di,qr),!br.canvasSupported)throw new Error("Need Canvas Environment.");let Ms=!br.canvasSupported,Cs={canvas:vs},As={},Ps=function(t,e,i){i=i||{},this.dom=e,this.id=t;let n=this,r=new Wo,o=i.renderer;if(Ms){if(!Cs.vml)throw new Error("You need to require 'zrender/vml/vml' to support IE8");o="vml"}else o&&Cs[o]||(o="canvas");let s=new Cs[o](e,r,i,t);this.storage=r,this.painter=s;let a=br.node||br.worker?null:new Di(s.getViewportRoot());this.eventHandler=new io(r,s,a,s.root),this.globalAnimationMgr=new xs,this.globalAnimationMgr.on("frame",function(){n.flush()}),this.globalAnimationMgr.start(),this._needsRefresh;let h=r.delFromStorage,l=r.addToStorage;r.delFromStorage=function(t){h.call(r,t),t&&t.removeSelfFromZr(n)},r.addToStorage=function(t){l.call(r,t),t.addSelfToZr(n)}};Ps.prototype={constructor:Ps,getId:function(){return this.id},add:function(t){this.storage.addRoot(t),this._needsRefresh=!0},remove:function(t){this.storage.delRoot(t),this._needsRefresh=!0},configLayer:function(t,e){this.painter.configLayer&&this.painter.configLayer(t,e),this._needsRefresh=!0},setBackgroundColor:function(t){this.painter.setBackgroundColor&&this.painter.setBackgroundColor(t),this._needsRefresh=!0},refreshImmediately:function(){this._needsRefresh=this._needsRefreshHover=!1,this.painter.refresh(),this._needsRefresh=this._needsRefreshHover=!1},refresh:function(){this._needsRefresh=!0},flush:function(){let t;this._needsRefresh&&(t=!0,this.refreshImmediately()),this._needsRefreshHover&&(t=!0,this.refreshHoverImmediately()),t&&this.trigger("rendered")},addHover:function(t,e){if(this.painter.addHover){let i=this.painter.addHover(t,e);return this.refreshHover(),i}},removeHover:function(t){this.painter.removeHover&&(this.painter.removeHover(t),this.refreshHover())},findHover:function(t,e){return this.eventHandler.findHover(t,e)},clearHover:function(){this.painter.clearHover&&(this.painter.clearHover(),this.refreshHover())},refreshHover:function(){this._needsRefreshHover=!0},refreshHoverImmediately:function(){this._needsRefreshHover=!1,this.painter.refreshHover&&this.painter.refreshHover()},resize:function(t){t=t||{},this.painter.resize(t.width,t.height),this.eventHandler.resize()},clearAnimation:function(){this.globalAnimationMgr.clear()},getWidth:function(){return this.painter.getWidth()},getHeight:function(){return this.painter.getHeight()},pathToImage:function(t,e){return this.painter.pathToImage(t,e)},setCursorStyle:function(t){this.eventHandler.setCursorStyle(t)},on:function(t,e,i){this.eventHandler.on(t,e,i)},off:function(t,e){this.eventHandler.off(t,e)},trigger:function(t,e){this.eventHandler.trigger(t,e)},clear:function(){this.storage.delRoot(),this.painter.clear()},dispose:function(){this.globalAnimationMgr.stop(),this.clear(),this.storage.dispose(),this.painter.dispose(),this.eventHandler.dispose(),this.globalAnimationMgr=this.storage=this.painter=this.eventHandler=null,delete As[this.id]}};var Ls=Math.pow,zs=Math.sqrt,Ds=1e-8,Es=1e-4,Is=zs(3),Bs=1/3,Os=tt(),Rs=tt(),Fs=tt(),Hs=Math.min,Ns=Math.max,Ws=Math.sin,Vs=Math.cos,Xs=2*Math.PI,qs=tt(),js=tt(),Ys=tt(),Us=[],Gs=[],Qs={M:1,L:2,C:3,Q:4,A:5,Z:6,R:7},Zs=[],$s=[],Ks=[],Js=[],ta=Math.min,ea=Math.max,ia=Math.cos,na=Math.sin,ra=Math.sqrt,oa=Math.abs,sa="undefined"!=typeof Float32Array,aa=function(t){this._saveData=!t,this._saveData&&(this.data=[]),this._ctx=null};aa.prototype={constructor:aa,_xi:0,_yi:0,_x0:0,_y0:0,_ux:0,_uy:0,_len:0,_lineDash:null,_dashOffset:0,_dashIdx:0,_dashSum:0,setScale:function(t,e,i){i=i||0,this._ux=oa(i/qo/t)||0,this._uy=oa(i/qo/e)||0},getContext:function(){return this._ctx},beginPath:function(t){return this._ctx=t,t&&t.beginPath(),t&&(this.dpr=t.dpr),this._saveData&&(this._len=0),this._lineDash&&(this._lineDash=null,this._dashOffset=0),this},moveTo:function(t,e){return this.addData(Qs.M,t,e),this._ctx&&this._ctx.moveTo(t,e),this._x0=t,this._y0=e,this._xi=t,this._yi=e,this},lineTo:function(t,e){var i=oa(t-this._xi)>this._ux||oa(e-this._yi)>this._uy||this._len<5;return this.addData(Qs.L,t,e),this._ctx&&i&&(this._needsDash()?this._dashedLineTo(t,e):this._ctx.lineTo(t,e)),i&&(this._xi=t,this._yi=e),this},bezierCurveTo:function(t,e,i,n,r,o){return this.addData(Qs.C,t,e,i,n,r,o),this._ctx&&(this._needsDash()?this._dashedBezierTo(t,e,i,n,r,o):this._ctx.bezierCurveTo(t,e,i,n,r,o)),this._xi=r,this._yi=o,this},quadraticCurveTo:function(t,e,i,n){return this.addData(Qs.Q,t,e,i,n),this._ctx&&(this._needsDash()?this._dashedQuadraticTo(t,e,i,n):this._ctx.quadraticCurveTo(t,e,i,n)),this._xi=i,this._yi=n,this},arc:function(t,e,i,n,r,o){return this.addData(Qs.A,t,e,i,i,n,r-n,0,o?0:1),this._ctx&&this._ctx.arc(t,e,i,n,r,o),this._xi=ia(r)*i+t,this._yi=na(r)*i+e,this},arcTo:function(t,e,i,n,r){return this._ctx&&this._ctx.arcTo(t,e,i,n,r),this},rect:function(t,e,i,n){return this._ctx&&this._ctx.rect(t,e,i,n),this.addData(Qs.R,t,e,i,n),this},closePath:function(){this.addData(Qs.Z);var t=this._ctx,e=this._x0,i=this._y0;return t&&(this._needsDash()&&this._dashedLineTo(e,i),t.closePath()),this._xi=e,this._yi=i,this},fill:function(t){t&&t.fill(),this.toStatic()},stroke:function(t){t&&t.stroke(),this.toStatic()},setLineDash:function(t){if(t instanceof Array){this._lineDash=t,this._dashIdx=0;for(var e=0,i=0;i<t.length;i++)e+=t[i];this._dashSum=e}return this},setLineDashOffset:function(t){return this._dashOffset=t,this},len:function(){return this._len},setData:function(t){var e=t.length;this.data&&this.data.length===e||!sa||(this.data=new Float32Array(e));for(var i=0;i<e;i++)this.data[i]=t[i];this._len=e},appendPath:function(t){t instanceof Array||(t=[t]);for(var e=t.length,i=0,n=this._len,r=0;r<e;r++)i+=t[r].len();sa&&this.data instanceof Float32Array&&(this.data=new Float32Array(n+i));for(r=0;r<e;r++)for(var o=t[r].data,s=0;s<o.length;s++)this.data[n++]=o[s];this._len=n},addData:function(t){if(this._saveData){var e=this.data;this._len+arguments.length>e.length&&(this._expandData(),e=this.data);for(var i=0;i<arguments.length;i++)e[this._len++]=arguments[i];this._prevCmd=t}},_expandData:function(){if(!(this.data instanceof Array)){for(var t=[],e=0;e<this._len;e++)t[e]=this.data[e];this.data=t}},_needsDash:function(){return this._lineDash},_dashedLineTo:function(t,e){var i,n,r=this._dashSum,o=this._dashOffset,s=this._lineDash,a=this._ctx,h=this._xi,l=this._yi,u=t-h,c=e-l,f=ra(u*u+c*c),d=h,p=l,g=s.length;for(u/=f,c/=f,o<0&&(o=r+o),d-=(o%=r)*u,p-=o*c;u>0&&d<=t||u<0&&d>=t||0===u&&(c>0&&p<=e||c<0&&p>=e);)d+=u*(i=s[n=this._dashIdx]),p+=c*i,this._dashIdx=(n+1)%g,u>0&&d<h||u<0&&d>h||c>0&&p<l||c<0&&p>l||a[n%2?"moveTo":"lineTo"](u>=0?ta(d,t):ea(d,t),c>=0?ta(p,e):ea(p,e));u=d-t,c=p-e,this._dashOffset=-ra(u*u+c*c)},_dashedBezierTo:function(t,e,i,n,r,o){var s,a,h,l,u,c=this._dashSum,f=this._dashOffset,d=this._lineDash,p=this._ctx,g=this._xi,_=this._yi,m=Hi,y=0,v=this._dashIdx,x=d.length,w=0;for(f<0&&(f=c+f),f%=c,s=0;s<1;s+=.1)a=m(g,t,i,r,s+.1)-m(g,t,i,r,s),h=m(_,e,n,o,s+.1)-m(_,e,n,o,s),y+=ra(a*a+h*h);for(;v<x&&!((w+=d[v])>f);v++);for(s=(w-f)/y;s<=1;)l=m(g,t,i,r,s),u=m(_,e,n,o,s),v%2?p.moveTo(l,u):p.lineTo(l,u),s+=d[v]/y,v=(v+1)%x;v%2!=0&&p.lineTo(r,o),a=r-l,h=o-u,this._dashOffset=-ra(a*a+h*h)},_dashedQuadraticTo:function(t,e,i,n){var r=i,o=n;i=(i+2*t)/3,n=(n+2*e)/3,t=(this._xi+2*t)/3,e=(this._yi+2*e)/3,this._dashedBezierTo(t,e,i,n,r,o)},toStatic:function(){var t=this.data;t instanceof Array&&(t.length=this._len,sa&&(this.data=new Float32Array(t)))},getBoundingRect:function(){Zs[0]=Zs[1]=Ks[0]=Ks[1]=Number.MAX_VALUE,$s[0]=$s[1]=Js[0]=Js[1]=-Number.MAX_VALUE;for(var t=this.data,e=0,i=0,n=0,r=0,o=0;o<t.length;){var s=t[o++];switch(1===o&&(n=e=t[o],r=i=t[o+1]),s){case Qs.M:e=n=t[o++],i=r=t[o++],Ks[0]=n,Ks[1]=r,Js[0]=n,Js[1]=r;break;case Qs.L:$i(e,i,t[o],t[o+1],Ks,Js),e=t[o++],i=t[o++];break;case Qs.C:Ki(e,i,t[o++],t[o++],t[o++],t[o++],t[o],t[o+1],Ks,Js),e=t[o++],i=t[o++];break;case Qs.Q:Ji(e,i,t[o++],t[o++],t[o],t[o+1],Ks,Js),e=t[o++],i=t[o++];break;case Qs.A:var a=t[o++],h=t[o++],l=t[o++],u=t[o++],c=t[o++],f=t[o++]+c;o+=1;var d=1-t[o++];1===o&&(n=ia(c)*l+a,r=na(c)*u+h),tn(a,h,l,u,c,f,d,Ks,Js),e=ia(f)*l+a,i=na(f)*u+h;break;case Qs.R:$i(n=e=t[o++],r=i=t[o++],n+t[o++],r+t[o++],Ks,Js);break;case Qs.Z:e=n,i=r}vt(Zs,Zs,Ks),xt($s,$s,Js)}return 0===o&&(Zs[0]=Zs[1]=$s[0]=$s[1]=0),new Ro(Zs[0],Zs[1],$s[0]-Zs[0],$s[1]-Zs[1])},rebuildPath:function(t){for(var e,i,n,r,o,s,a=this.data,h=this._ux,l=this._uy,u=this._len,c=0;c<u;){var f=a[c++];switch(1===c&&(e=n=a[c],i=r=a[c+1]),f){case Qs.M:e=n=a[c++],i=r=a[c++],t.moveTo(n,r);break;case Qs.L:o=a[c++],s=a[c++],(oa(o-n)>h||oa(s-r)>l||c===u-1)&&(t.lineTo(o,s),n=o,r=s);break;case Qs.C:t.bezierCurveTo(a[c++],a[c++],a[c++],a[c++],a[c++],a[c++]),n=a[c-2],r=a[c-1];break;case Qs.Q:t.quadraticCurveTo(a[c++],a[c++],a[c++],a[c++]),n=a[c-2],r=a[c-1];break;case Qs.A:var d=a[c++],p=a[c++],g=a[c++],_=a[c++],m=a[c++],y=a[c++],v=a[c++],x=a[c++],w=g>_?g:_,b=g>_?1:g/_,k=g>_?_/g:1,T=m+y;Math.abs(g-_)>.001?(t.translate(d,p),t.rotate(v),t.scale(b,k),t.arc(0,0,w,m,T,1-x),t.scale(1/b,1/k),t.rotate(-v),t.translate(-d,-p)):t.arc(d,p,w,m,T,1-x),1===c&&(e=ia(m)*g+d,i=na(m)*_+p),n=ia(T)*g+d,r=na(T)*_+p;break;case Qs.R:e=n=a[c],i=r=a[c+1],t.rect(a[c++],a[c++],a[c++],a[c++]);break;case Qs.Z:t.closePath(),n=e,r=i}}}},aa.CMD=Qs;var ha=2*Math.PI,la=2*Math.PI,ua=aa.CMD,ca=2*Math.PI,fa=1e-4,da=[-1,-1,-1],pa=[-1,-1];class ga extends gs{constructor(t,e){super(t),this.path=null,this.type="path",this.__dirtyPath=!0,this.strokeContainThreshold=5,this.segmentIgnoreThreshold=0,this.subPixelOptimize=!1,e&&this.init(e)}init(t){t.style&&this.style.extendStyle(t.style,!1);let e=t.shape;if(e){this.shape=this.shape||{};for(let t in e)!this.shape.hasOwnProperty(t)&&e.hasOwnProperty(t)&&(this.shape[t]=e[t])}t.init&&t.init.call(this,opts);for(let e in t)"style"!==e&&"shape"!==e&&(ga.prototype[e]=t[e])}brush(t,e){let i=this.style,n=this.path||new aa(!0),r=i.hasStroke(),o=i.hasFill(),s=i.fill,a=i.stroke,h=o&&!!s.colorStops,l=r&&!!a.colorStops,u=o&&!!s.image,c=r&&!!a.image;if(i.bind(t,this,e),this.setTransform(t),this.__dirty){let e;h&&(e=e||this.getBoundingRect(),this._fillGradient=i.getGradient(t,s,e)),l&&(e=e||this.getBoundingRect(),this._strokeGradient=i.getGradient(t,a,e))}h?t.fillStyle=this._fillGradient:u&&(t.fillStyle=Ko.prototype.getCanvasPattern.call(s,t)),l?t.strokeStyle=this._strokeGradient:c&&(t.strokeStyle=Ko.prototype.getCanvasPattern.call(a,t));let f=i.lineDash,d=i.lineDashOffset,p=!!t.setLineDash,g=this.getGlobalScale();if(n.setScale(g[0],g[1],this.segmentIgnoreThreshold),this.__dirtyPath||f&&!p&&r?(n.beginPath(t),f&&!p&&(n.setLineDash(f),n.setLineDashOffset(d)),this.buildPath(n,this.shape,!1),this.path&&(this.__dirtyPath=!1)):(t.beginPath(),this.path.rebuildPath(t)),o)if(null!=i.fillOpacity){let e=t.globalAlpha;t.globalAlpha=i.fillOpacity*i.opacity,n.fill(t),t.globalAlpha=e}else n.fill(t);if(f&&p&&(t.setLineDash(f),t.lineDashOffset=d),r)if(null!=i.strokeOpacity){let e=t.globalAlpha;t.globalAlpha=i.strokeOpacity*i.opacity,n.stroke(t),t.globalAlpha=e}else n.stroke(t);f&&p&&t.setLineDash([]),null!=i.text&&(this.restoreTransform(t),this.drawRectText(t,this.getBoundingRect()))}buildPath(t,e,i){}createPathProxy(){this.path=new aa}getBoundingRect(){let t=this._rect,e=this.style,i=!t;if(i){let e=this.path;e||(e=this.path=new aa),this.__dirtyPath&&(e.beginPath(),this.buildPath(e,this.shape,!1)),t=e.getBoundingRect()}if(this._rect=t,e.hasStroke()){let n=this._rectWithStroke||(this._rectWithStroke=t.clone());if(this.__dirty||i){n.copy(t);let i=e.lineWidth,r=e.strokeNoScale?this.getLineScale():1;e.hasFill()||(i=Math.max(i,this.strokeContainThreshold||4)),r>1e-10&&(n.width+=i/r,n.height+=i/r,n.x-=i/r/2,n.y-=i/r/2)}return n}return t}contain(t,e){let i=this.transformCoordToLocal(t,e),n=this.getBoundingRect(),r=this.style;if(t=i[0],e=i[1],n.contain(t,e)){let i=this.path.data;if(r.hasStroke()){let n=r.lineWidth,o=r.strokeNoScale?this.getLineScale():1;if(o>1e-10&&(r.hasFill()||(n=Math.max(n,this.strokeContainThreshold)),gn(i,n/o,t,e)))return!0}if(r.hasFill())return pn(i,t,e)}return!1}dirty(t){null==t&&(t=!0),t&&(this.__dirtyPath=t,this._rect=null),this.__dirty=this.__dirtyText=!0,this.__zr&&this.__zr.refresh(),this.__clipTarget&&this.__clipTarget.dirty()}animateShape(t){return this.animate("shape",t)}attrKV(t,e){"shape"===t?(this.setShape(e),this.__dirtyPath=!0,this._rect=null):gs.prototype.attrKV.call(this,t,e)}setShape(t,e){return this.shape?(x(t)?J(this.shape,t):this.shape[t]=e,this.dirty(!0),this):this}getLineScale(){let t=this.transform;return t&&Math.abs(t[0]-1)>1e-10&&Math.abs(t[3]-1)>1e-10?Math.sqrt(Math.abs(t[0]*t[3]-t[2]*t[1])):1}}var _a=aa.CMD,ma=[[],[],[]],ya=Math.sqrt,va=Math.atan2,xa=function(t,e){var i,n,r,o,s,a,h=t.data,l=_a.M,u=_a.C,c=_a.L,f=_a.R,d=_a.A,p=_a.Q;for(r=0,o=0;r<h.length;){switch(i=h[r++],o=r,n=0,i){case l:case c:n=1;break;case u:n=3;break;case p:n=2;break;case d:var g=e[4],_=e[5],m=ya(e[0]*e[0]+e[1]*e[1]),y=ya(e[2]*e[2]+e[3]*e[3]),v=va(-e[1]/y,e[0]/m);h[r]*=m,h[r++]+=g,h[r]*=y,h[r++]+=_,h[r++]*=m,h[r++]*=y,h[r++]+=v,h[r++]+=v,o=r+=2;break;case f:a[0]=h[r++],a[1]=h[r++],yt(a,a,e),h[o++]=a[0],h[o++]=a[1],a[0]+=h[r++],a[1]+=h[r++],yt(a,a,e),h[o++]=a[0],h[o++]=a[1]}for(s=0;s<n;s++)(a=ma[s])[0]=h[r++],a[1]=h[r++],yt(a,a,e),h[o++]=a[0],h[o++]=a[1]}},wa=Math.sqrt,ba=Math.sin,ka=Math.cos,Ta=Math.PI,Sa=function(t){return Math.sqrt(t[0]*t[0]+t[1]*t[1])},Ma=function(t,e){return(t[0]*e[0]+t[1]*e[1])/(Sa(t)*Sa(e))},Ca=function(t,e){return(t[0]*e[1]<t[1]*e[0]?-1:1)*Math.acos(Ma(t,e))},Aa=/([mlvhzcqtsa])([^mlvhzcqtsa]*)/gi,Pa=/-?([0-9]*\.)?[0-9]+([eE]-?[0-9]+)?/g,La=(Object.freeze||Object)({createFromString:vn,mergePath:xn});class za extends gs{constructor(t){super(t),this.type="text"}brush(t,e){let i=this.style;this.__dirty&&ti(i),i.fill=i.stroke=i.shadowBlur=i.shadowColor=i.shadowOffsetX=i.shadowOffsetY=null;let n=i.text;if(null!=n&&(n+=""),!mi(n,i))return void(t.__attrCachedBy=Uo.NONE);this.setTransform(t),ii(this,t,n,i,null,e),this.restoreTransform(t)}getBoundingRect(){let t=this.style;if(this.__dirty&&ti(t),!this._rect){let e=t.text;null!=e?e+="":e="";let i=Re(t.text+"",t.font,t.textAlign,t.textVerticalAlign,t.textPadding,t.textLineHeight,t.rich);if(i.x+=t.x||0,i.y+=t.y||0,di(t.textStroke,t.textStrokeWidth)){let e=t.textStrokeWidth;i.x-=e/2,i.y-=e/2,i.width+=e,i.height+=e}this._rect=i}return this._rect}}let Da={type:"circle",shape:{cx:0,cy:0,r:0}};class Ea extends ga{constructor(t){super(t,Da)}buildPath(t,e,i){i&&t.moveTo(e.cx+e.r,e.cy),t.arc(e.cx,e.cy,e.r,0,2*Math.PI,!0)}}var Ia=Math.round;let Ba={},Oa={type:"rect",shape:{r:0,x:0,y:0,width:0,height:0}};class Ra extends ga{constructor(t){super(t,Oa)}buildPath(t,e){let i,n,r,o;this.subPixelOptimize?(bn(Ba,e,this.style),i=Ba.x,n=Ba.y,r=Ba.width,o=Ba.height,Ba.r=e.r,e=Ba):(i=e.x,n=e.y,r=e.width,o=e.height),e.r?Je(t,e):t.rect(i,n,r,o),t.closePath()}}let Fa={type:"ellipse",shape:{cx:0,cy:0,rx:0,ry:0}};class Ha extends ga{constructor(t){super(t,Fa)}buildPath(t,e){let i=.5522848,n=e.cx,r=e.cy,o=e.rx,s=e.ry,a=o*i,h=s*i;t.moveTo(n-o,r),t.bezierCurveTo(n-o,r-h,n-a,r-s,n,r-s),t.bezierCurveTo(n+a,r-s,n+o,r-h,n+o,r),t.bezierCurveTo(n+o,r+h,n+a,r+s,n,r+s),t.bezierCurveTo(n-a,r+s,n-o,r+h,n-o,r),t.closePath()}}let Na={type:"line",shape:{x1:0,y1:0,x2:0,y2:0,percent:1},style:{stroke:"#000",fill:null}};class Wa extends ga{constructor(t){super(t,Na)}buildPath(t,e){let i,n,r,o;if(this.subPixelOptimize){let t={};wn(t,e,this.style),i=t.x1,n=t.y1,r=t.x2,o=t.y2}else i=e.x1,n=e.y1,r=e.x2,o=e.y2;let s=e.percent;0!==s&&(t.moveTo(i,n),s<1&&(r=i*(1-s)+r*s,o=n*(1-s)+o*s),t.lineTo(r,o))}pointAt(t){let e=this.shape;return[e.x1*(1-t)+e.x2*t,e.y1*(1-t)+e.y2*t]}}var Va=function(t,e){for(var i=t.length,n=[],r=0,o=1;o<i;o++)r+=pt(t[o-1],t[o]);var s=r/2;s=s<i?i:s;for(o=0;o<s;o++){var a,h,l,u=o/(s-1)*(e?i:i-1),c=Math.floor(u),f=u-c,d=t[c%i];e?(a=t[(c-1+i)%i],h=t[(c+1)%i],l=t[(c+2)%i]):(a=t[0===c?c:c-1],h=t[c>i-2?i-1:c+1],l=t[c>i-3?i-1:c+2]);var p=f*f,g=f*p;n.push([Tn(a[0],d[0],h[0],l[0],f,p,g),Tn(a[1],d[1],h[1],l[1],f,p,g)])}return n},Xa=function(t,e,i,n){var r,o,s,a,h=[],l=[],u=[],c=[];if(n){s=[1/0,1/0],a=[-1/0,-1/0];for(var f=0,d=t.length;f<d;f++)vt(s,s,t[f]),xt(a,a,t[f]);vt(s,s,n[0]),xt(a,a,n[1])}for(var f=0,d=t.length;f<d;f++){var p=t[f];if(i)r=t[f?f-1:d-1],o=t[(f+1)%d];else{if(0===f||f===d-1){h.push(it(t[f]));continue}r=t[f-1],o=t[f+1]}st(l,o,r),ft(l,l,e);var g=pt(p,r),_=pt(p,o),m=g+_;0!==m&&(g/=m,_/=m),ft(u,l,-g),ft(c,l,_);var y=rt([],p,u),v=rt([],p,c);n&&(xt(y,y,s),vt(y,y,a),xt(v,v,s),vt(v,v,a)),h.push(y),h.push(v)}return i&&h.push(h.shift()),h};let qa={type:"polygon",shape:{points:null,smooth:!1,smoothConstraint:null}};class ja extends ga{constructor(t){super(t,qa)}buildPath(t,e){Sn(t,e,!0)}}let Ya={type:"polyline",shape:{points:null,smooth:!1,smoothConstraint:null},style:{stroke:"#000",fill:null}};class Ua extends ga{constructor(t){super(t,Ya)}buildPath(t,e){Sn(t,e,!1)}}var Ga=function(t){this.colorStops=t||[]};Ga.prototype={constructor:Ga,addColorStop:function(t,e){this.colorStops.push({offset:t,color:e})}};var Qa=function(t,e,i,n,r,o){this.x=null==t?0:t,this.y=null==e?0:e,this.x2=null==i?1:i,this.y2=null==n?0:n,this.type="linear",this.global=o||!1,Ga.call(this,r)};Qa.prototype={constructor:Qa},Q(Qa,Ga);let Za=/[\s,]+/;Cn.prototype={constructor:Cn,parse:function(t,e){e=e||{};let i=Mn(t);if(!i)throw new Error("Illegal svg");let n=new Fo;this._root=n;let r=i.getAttribute("viewBox")||"",o=parseFloat(i.getAttribute("width")||e.width),s=parseFloat(i.getAttribute("height")||e.height);isNaN(o)&&(o=null),isNaN(s)&&(s=null),zn(i,n,null,!0);let a=i.firstChild;for(;a;)this._parseNode(a,n),a=a.nextSibling;let h,l;if(r){let t=z(r).split(Za);t.length>=4&&(h={x:parseFloat(t[0]||0),y:parseFloat(t[1]||0),width:parseFloat(t[2]),height:parseFloat(t[3])})}if(h&&null!=o&&null!=s&&(l=Bn(h,o,s),!e.ignoreViewBox)){let t=n;(n=new Fo).add(t),t.scale=l.scale.slice(),t.position=l.position.slice()}return e.ignoreRootClip||null==o||null==s||n.setClipPath(new Ra({shape:{x:0,y:0,width:o,height:s}})),{root:n,width:o,height:s,viewBoxRect:h,viewBoxTransform:l}},_parseNode:function(t,e){let i=t.nodeName.toLowerCase();"defs"===i?this._isDefine=!0:"text"===i&&(this._isText=!0);let n;if(this._isDefine){let e=Ka[i];if(e){let i=e.call(this,t),n=t.getAttribute("id");n&&(this._defs[n]=i)}}else{let r=$a[i];r&&(n=r.call(this,t,e),e.add(n))}let r=t.firstChild;for(;r;)1===r.nodeType&&this._parseNode(r,n),3===r.nodeType&&this._isText&&this._parseText(r,n),r=r.nextSibling;"defs"===i?this._isDefine=!1:"text"===i&&(this._isText=!1)},_parseText:function(t,e){if(1===t.nodeType){let e=t.getAttribute("dx")||0,i=t.getAttribute("dy")||0;this._textX+=parseFloat(e),this._textY+=parseFloat(i)}let i=new za({style:{text:t.textContent,transformText:!0},position:[this._textX||0,this._textY||0]});Pn(e,i),zn(t,i,this._defs);let n=i.style.fontSize;n&&n<9&&(i.style.fontSize=9,i.scale=i.scale||[1,1],i.scale[0]*=n/9,i.scale[1]*=n/9);let r=i.getBoundingRect();return this._textX+=r.width,e.add(i),i}};let $a={g:function(t,e){let i=new Fo;return Pn(e,i),zn(t,i,this._defs),i},rect:function(t,e){let i=new Ra;return Pn(e,i),zn(t,i,this._defs),i.setShape({x:parseFloat(t.getAttribute("x")||0),y:parseFloat(t.getAttribute("y")||0),width:parseFloat(t.getAttribute("width")||0),height:parseFloat(t.getAttribute("height")||0)}),i},circle:function(t,e){let i=new Ea;return Pn(e,i),zn(t,i,this._defs),i.setShape({cx:parseFloat(t.getAttribute("cx")||0),cy:parseFloat(t.getAttribute("cy")||0),r:parseFloat(t.getAttribute("r")||0)}),i},line:function(t,e){let i=new Wa;return Pn(e,i),zn(t,i,this._defs),i.setShape({x1:parseFloat(t.getAttribute("x1")||0),y1:parseFloat(t.getAttribute("y1")||0),x2:parseFloat(t.getAttribute("x2")||0),y2:parseFloat(t.getAttribute("y2")||0)}),i},ellipse:function(t,e){let i=new Ha;return Pn(e,i),zn(t,i,this._defs),i.setShape({cx:parseFloat(t.getAttribute("cx")||0),cy:parseFloat(t.getAttribute("cy")||0),rx:parseFloat(t.getAttribute("rx")||0),ry:parseFloat(t.getAttribute("ry")||0)}),i},polygon:function(t,e){let i=t.getAttribute("points");i&&(i=Ln(i));let n=new ja({shape:{points:i||[]}});return Pn(e,n),zn(t,n,this._defs),n},polyline:function(t,e){let i=new ga;Pn(e,i),zn(t,i,this._defs);let n=t.getAttribute("points");return n&&(n=Ln(n)),new Ua({shape:{points:n||[]}})},image:function(t,e){let i=new _s;return Pn(e,i),zn(t,i,this._defs),i.setStyle({image:t.getAttribute("xlink:href"),x:t.getAttribute("x"),y:t.getAttribute("y"),width:t.getAttribute("width"),height:t.getAttribute("height")}),i},text:function(t,e){let i=t.getAttribute("x")||0,n=t.getAttribute("y")||0,r=t.getAttribute("dx")||0,o=t.getAttribute("dy")||0;this._textX=parseFloat(i)+parseFloat(r),this._textY=parseFloat(n)+parseFloat(o);let s=new Fo;return Pn(e,s),zn(t,s,this._defs),s},tspan:function(t,e){let i=t.getAttribute("x"),n=t.getAttribute("y");null!=i&&(this._textX=parseFloat(i)),null!=n&&(this._textY=parseFloat(n));let r=t.getAttribute("dx")||0,o=t.getAttribute("dy")||0,s=new Fo;return Pn(e,s),zn(t,s,this._defs),this._textX+=r,this._textY+=o,s},path:function(t,e){let i=vn(t.getAttribute("d")||"");return Pn(e,i),zn(t,i,this._defs),i}},Ka={lineargradient:function(t){let e=parseInt(t.getAttribute("x1")||0,10),i=parseInt(t.getAttribute("y1")||0,10),n=parseInt(t.getAttribute("x2")||10,10),r=parseInt(t.getAttribute("y2")||0,10),o=new Qa(e,i,n,r);return An(t,o),o},radialgradient:function(t){}},Ja={fill:"fill",stroke:"stroke","stroke-width":"lineWidth",opacity:"opacity","fill-opacity":"fillOpacity","stroke-opacity":"strokeOpacity","stroke-dasharray":"lineDash","stroke-dashoffset":"lineDashOffset","stroke-linecap":"lineCap","stroke-linejoin":"lineJoin","stroke-miterlimit":"miterLimit","font-family":"fontFamily","font-size":"fontSize","font-style":"fontStyle","font-weight":"fontWeight","text-align":"textAlign","alignment-baseline":"textBaseline"},th=/url\(\s*#(.*?)\)/,eh=/(translate|scale|rotate|skewX|skewY|matrix)\(([\-\s0-9\.e,]*)\)/g,ih=/([^\s:;]+)\s*:\s*([^:;]+)/g,nh={type:"compound",shape:{paths:null}};class rh extends ga{constructor(t){super(t,nh)}_updatePathDirty(){let t=this.__dirtyPath,e=this.shape.paths;for(let i=0;i<e.length;i++)t=t||e[i].__dirtyPath;this.__dirtyPath=t,this.__dirty=this.__dirty||t}beforeBrush(){this._updatePathDirty();let t=this.shape.paths||[],e=this.getGlobalScale();for(let i=0;i<t.length;i++)t[i].path||t[i].createPathProxy(),t[i].path.setScale(e[0],e[1],t[i].segmentIgnoreThreshold)}buildPath(t,e){let i=e.paths||[];for(let e=0;e<i.length;e++)i[e].buildPath(t,i[e].shape,!0)}afterBrush(){let t=this.shape.paths||[];for(let e=0;e<t.length;e++)t[e].__dirtyPath=!1}getBoundingRect(){return this._updatePathDirty(),ga.prototype.getBoundingRect.call(this)}}let oh=[];Rn.prototype={constructor:Rn,incremental:!0,clearDisplaybles:function(){this._displayables=[],this._temporaryDisplayables=[],this._cursor=0,this.dirty(),this.notClear=!1},addDisplayable:function(t,e){e?this._temporaryDisplayables.push(t):this._displayables.push(t),this.dirty()},addDisplayables:function(t,e){e=e||!1;for(let i=0;i<t.length;i++)this.addDisplayable(t[i],e)},eachPendingDisplayable:function(t){for(let e=this._cursor;e<this._displayables.length;e++)t&&t(this._displayables[e]);for(let e=0;e<this._temporaryDisplayables.length;e++)t&&t(this._temporaryDisplayables[e])},update:function(){this.updateTransform();for(let t=this._cursor;t<this._displayables.length;t++){let e=this._displayables[t];e.parent=this,e.update(),e.parent=null}for(let t=0;t<this._temporaryDisplayables.length;t++){let e=this._temporaryDisplayables[t];e.parent=this,e.update(),e.parent=null}},brush:function(t,e){let i=this._cursor;for(;i<this._displayables.length;i++){let e=this._displayables[i];e.beforeBrush&&e.beforeBrush(t),e.brush(t,i===this._cursor?null:this._displayables[i-1]),e.afterBrush&&e.afterBrush(t)}this._cursor=i;for(let e=0;e<this._temporaryDisplayables.length;e++){let i=this._temporaryDisplayables[e];i.beforeBrush&&i.beforeBrush(t),i.brush(t,0===e?null:this._temporaryDisplayables[e-1]),i.afterBrush&&i.afterBrush(t)}this._temporaryDisplayables=[],this.notClear=!0},getBoundingRect:function(){if(!this._rect){let t=new Ro(1/0,1/0,-1/0,-1/0);for(let e=0;e<this._displayables.length;e++){let i=this._displayables[e],n=i.getBoundingRect().clone();i.needLocalTransform()&&n.applyTransform(i.getLocalTransform(oh)),t.union(n)}this._rect=t}return this._rect},contain:function(t,e){let i=this.transformCoordToLocal(t,e);if(this.getBoundingRect().contain(i[0],i[1]))for(let i=0;i<this._displayables.length;i++){let n=this._displayables[i];if(n.contain(t,e))return!0}return!1}},Q(Rn,gs);let sh={type:"arc",shape:{cx:0,cy:0,r:0,startAngle:0,endAngle:2*Math.PI,clockwise:!0},style:{stroke:"#000",fill:null}};class ah extends ga{constructor(t){super(t,sh)}buildPath(t,e){let i=e.cx,n=e.cy,r=Math.max(e.r,0),o=e.startAngle,s=e.endAngle,a=e.clockwise,h=Math.cos(o),l=Math.sin(o);t.moveTo(h*r+i,l*r+n),t.arc(i,n,r,o,s,!a)}}let hh={type:"bezier-curve",shape:{x1:0,y1:0,x2:0,y2:0,cpx1:0,cpy1:0,percent:1},style:{stroke:"#000",fill:null}},lh=[];class uh extends ga{constructor(t){super(t,hh)}buildPath(t,e){let i=e.x1,n=e.y1,r=e.x2,o=e.y2,s=e.cpx1,a=e.cpy1,h=e.cpx2,l=e.cpy2,u=e.percent;0!==u&&(t.moveTo(i,n),null==h||null==l?(u<1&&(Qi(i,s,r,u,lh),s=lh[1],r=lh[2],Qi(n,a,o,u,lh),a=lh[1],o=lh[2]),t.quadraticCurveTo(s,a,r,o)):(u<1&&(Xi(i,s,h,r,u,lh),s=lh[1],h=lh[2],r=lh[3],Xi(n,a,l,o,u,lh),a=lh[1],l=lh[2],o=lh[3]),t.bezierCurveTo(s,a,h,l,r,o)))}pointAt(t){return Fn(this.shape,t,!1)}tangentAt(t){let e=Fn(this.shape,t,!0);return dt(e,e)}}let ch={type:"droplet",shape:{cx:0,cy:0,width:0,height:0}};class fh extends ga{constructor(t){super(t,ch)}buildPath(t,e){let i=e.cx,n=e.cy,r=e.width,o=e.height;t.moveTo(i,n+r),t.bezierCurveTo(i+r,n+r,i+3*r/2,n-r/3,i,n-o),t.bezierCurveTo(i-3*r/2,n-r/3,i-r,n+r,i,n+r),t.closePath()}}let dh={type:"heart",shape:{cx:0,cy:0,width:0,height:0}};class ph extends ga{constructor(t){super(t,dh)}buildPath(t,e){let i=e.cx,n=e.cy,r=e.width,o=e.height;t.moveTo(i,n),t.bezierCurveTo(i+r/2,n-2*o/3,i+2*r,n+o/3,i,n+o),t.bezierCurveTo(i-2*r,n+o/3,i-r/2,n-2*o/3,i,n)}}let gh=Math.PI,_h=Math.sin,mh=Math.cos,yh={type:"isogon",shape:{x:0,y:0,r:0,n:0}};class vh extends ga{constructor(t){super(t,yh)}buildPath(t,e){let i=e.n;if(i&&!(i<2)){let n=e.x,r=e.y,o=e.r,s=2*gh/i,a=-gh/2;t.moveTo(n+o*mh(a),r+o*_h(a));for(let e=0,h=i-1;e<h;e++)a+=s,t.lineTo(n+o*mh(a),r+o*_h(a));t.closePath()}}}let xh={type:"ring",shape:{cx:0,cy:0,r:0,r0:0}};class wh extends ga{constructor(t){super(t,xh)}buildPath(t,e){let i=e.cx,n=e.cy,r=2*Math.PI;t.moveTo(i+e.r,n),t.arc(i,n,e.r,0,r,!1),t.moveTo(i+e.r0,n),t.arc(i,n,e.r0,0,r,!0)}}let bh=Math.sin,kh=Math.cos,Th=Math.PI/180,Sh={type:"rose",shape:{cx:0,cy:0,r:[],k:0,n:1},style:{stroke:"#000",fill:null}};class Mh extends ga{constructor(t){super(t,Sh)}buildPath(t,e){let i,n,r,o=e.r,s=e.k,a=e.n,h=e.cx,l=e.cy;t.moveTo(h,l);for(let e=0,u=o.length;e<u;e++){r=o[e];for(let e=0;e<=360*a;e++)i=r*bh(s/a*e%360*Th)*kh(e*Th)+h,n=r*bh(s/a*e%360*Th)*bh(e*Th)+l,t.lineTo(i,n)}}}var Ch=[["shadowBlur",0],["shadowColor","#000"],["shadowOffsetX",0],["shadowOffsetY",0]],Ah=function(t){return br.browser.ie&&br.browser.version>=11?function(){var e,i=this.__clipPaths,n=this.style;if(i)for(var r=0;r<i.length;r++){var o=i[r],s=o&&o.shape,a=o&&o.type;if(s&&("sector"===a&&s.startAngle===s.endAngle||"rect"===a&&(!s.width||!s.height))){for(h=0;h<Ch.length;h++)Ch[h][2]=n[Ch[h][0]],n[Ch[h][0]]=Ch[h][1];e=!0;break}}if(t.apply(this,arguments),e)for(var h=0;h<Ch.length;h++)n[Ch[h][0]]=Ch[h][2]}:t};let Ph={type:"sector",shape:{cx:0,cy:0,r0:0,r:0,startAngle:0,endAngle:2*Math.PI,clockwise:!0}};class Lh extends ga{constructor(t){super(t,Ph),this.brush=Ah(ga.prototype.brush)}buildPath(t,e){let i=e.cx,n=e.cy,r=Math.max(e.r0||0,0),o=Math.max(e.r,0),s=e.startAngle,a=e.endAngle,h=e.clockwise,l=Math.cos(s),u=Math.sin(s);t.moveTo(l*r+i,u*r+n),t.lineTo(l*o+i,u*o+n),t.arc(i,n,o,s,a,!h),t.lineTo(Math.cos(a)*r+i,Math.sin(a)*r+n),0!==r&&t.arc(i,n,r,a,s,h),t.closePath()}}let zh=Math.PI,Dh=Math.cos,Eh=Math.sin,Ih={type:"star",shape:{cx:0,cy:0,n:3,r0:null,r:0}};class Bh extends ga{constructor(t){super(t,Ih)}buildPath(t,e){let i=e.n;if(i&&!(i<2)){let n=e.cx,r=e.cy,o=e.r,s=e.r0;null==s&&(s=i>4?o*Dh(2*zh/i)/Dh(zh/i):o/3);let a=zh/i,h=-zh/2,l=n+o*Dh(h),u=r+o*Eh(h);h+=a,t.moveTo(l,u);for(let e,l=0,u=2*i-1;l<u;l++)e=l%2==0?s:o,t.lineTo(n+e*Dh(h),r+e*Eh(h)),h+=a;t.closePath()}}}let Oh=Math.cos,Rh=Math.sin,Fh={type:"trochoid",shape:{cx:0,cy:0,r:0,r0:0,d:0,location:"out"},style:{stroke:"#000",fill:null}};class Hh extends ga{constructor(t){super(t,Fh)}buildPath(t,e){let i,n,r,o,s=e.r,a=e.r0,h=e.d,l=e.cx,u=e.cy,c="out"===e.location?1:-1;if(!(e.location&&s<=a)){let e,f=0,d=1;i=(s+c*a)*Oh(0)-c*h*Oh(0)+l,n=(s+c*a)*Rh(0)-h*Rh(0)+u,t.moveTo(i,n);do{f++}while(a*f%(s+c*a)!=0);do{e=Math.PI/180*d,r=(s+c*a)*Oh(e)-c*h*Oh((s/a+c)*e)+l,o=(s+c*a)*Rh(e)-h*Rh((s/a+c)*e)+u,t.lineTo(r,o),d++}while(d<=a*f/(s+c*a)*360)}}}let Nh=function(t,e,i,n,r){this.x=null==t?.5:t,this.y=null==e?.5:e,this.r=null==i?.5:i,this.type="radial",this.global=r||!1,Ga.call(this,n)};Nh.prototype={constructor:Nh},Q(Nh,Ga);var Wh="http://www.w3.org/2000/svg";let Vh=aa.CMD,Xh=Array.prototype.join,qh="none",jh=Math.round,Yh=Math.sin,Uh=Math.cos,Gh=Math.PI,Qh=2*Math.PI,Zh=180/Gh,$h=1e-4,Kh={};Kh.brush=function(t){let e=t.style,i=t.__svgEl;i||(i=Hn("path"),t.__svgEl=i),t.path||t.createPathProxy();let n=t.path;if(t.__dirtyPath){n.beginPath(),n.subPixelOptimize=!1,t.buildPath(n,t.shape),t.__dirtyPath=!1;let e=Gn(n);e.indexOf("NaN")<0&&jn(i,"d",e)}Un(i,e,!1,t),qn(i,t.transform),null!=e.text?ol(t,t.getBoundingRect()):Kn(t)};let Jh={};Jh.brush=function(t){let e=t.style,i=e.image;if(i instanceof HTMLImageElement){let t=i.src;i=t}if(i){let n=e.x||0,r=e.y||0,o=e.width,s=e.height,a=t.__svgEl;a||(a=Hn("image"),t.__svgEl=a),i!==t.__imageSrc&&(Yn(a,"href",i),t.__imageSrc=i),jn(a,"width",o),jn(a,"height",s),jn(a,"x",n),jn(a,"y",r),qn(a,t.transform),null!=e.text?ol(t,t.getBoundingRect()):Kn(t)}};let tl={},el=new Ro,il={},nl=[],rl={left:"start",right:"end",center:"middle",middle:"middle"},ol=function(t,e){let i=t.style,n=t.transform,r=t instanceof za||i.transformText;t.__dirty&&ti(i);let o=i.text;if(null!=o&&(o+=""),mi(o,i)){null==o&&(o=""),!r&&n&&(el.copy(e),el.applyTransform(n),e=el);let s=t.__textSvgEl;s||(s=Hn("text"),t.__textSvgEl=s);let a=s.style,h=i.font||os,l=s.__computedFont;h!==s.__styleFont&&(a.font=s.__styleFont=h,l=s.__computedFont=a.font);let u=i.textPadding,c=i.textLineHeight,f=t.__textCotentBlock;f&&!t.__dirtyText||(f=t.__textCotentBlock=Qe(o,l,u,c,i.truncate));let d=f.outerHeight,p=f.lineHeight;ci(il,t,i,e);let g=il.baseX,_=il.baseY,m=il.textAlign||"left",y=il.textVerticalAlign;Qn(s,r,n,i,e,g,_);let v=g,x=We(_,d,y);u&&(v=Zn(g,m,u),x+=u[0]),x+=p/2,Un(s,i,!0,t);let w=f.canCacheByTextString,b=t.__tspanList||(t.__tspanList=[]),k=b.length;if(w&&t.__canCacheByTextString&&t.__text===o){if(t.__dirtyText&&k)for(let t=0;t<k;++t)$n(b[t],m,v,x+t*p)}else{t.__text=o,t.__canCacheByTextString=w;let e=f.lines,i=e.length,n=0;for(;n<i;n++){let t=b[n],i=e[n];t?t.__zrText!==i&&(t.innerHTML="",t.appendChild(document.createTextNode(i))):(t=b[n]=Hn("tspan"),s.appendChild(t),t.appendChild(document.createTextNode(i))),$n(t,m,v,x+n*p)}if(k>i){for(;n<k;n++)s.removeChild(b[n]);b.length=i}}}};tl.drawRectText=ol,tl.brush=function(t){null!=t.style.text?ol(t,!1):Kn(t)},Jn.prototype={diff:function(t,e,i){i||(i=function(t,e){return t===e}),this.equals=i;var n=this;t=t.slice();var r=(e=e.slice()).length,o=t.length,s=1,a=r+o,h=[{newPos:-1,components:[]}],l=this.extractCommon(h[0],e,t,0);if(h[0].newPos+1>=r&&l+1>=o){for(var u=[],c=0;c<e.length;c++)u.push(c);return[{indices:u,count:e.length}]}for(;s<=a;){var f=function(){for(var i=-1*s;i<=s;i+=2){var a,l=h[i-1],u=h[i+1],c=(u?u.newPos:0)-i;l&&(h[i-1]=void 0);var f=l&&l.newPos+1<r,d=u&&0<=c&&c<o;if(f||d){if(!f||d&&l.newPos<u.newPos?(a=er(u),n.pushComponent(a.components,void 0,!0)):((a=l).newPos++,n.pushComponent(a.components,!0,void 0)),c=n.extractCommon(a,e,t,i),a.newPos+1>=r&&c+1>=o)return tr(n,a.components,e,t);h[i]=a}else h[i]=void 0}s++}();if(f)return f}},pushComponent:function(t,e,i){var n=t[t.length-1];n&&n.added===e&&n.removed===i?t[t.length-1]={count:n.count+1,added:e,removed:i}:t.push({count:1,added:e,removed:i})},extractCommon:function(t,e,i,n){for(var r=e.length,o=i.length,s=t.newPos,a=s-n,h=0;s+1<r&&a+1<o&&this.equals(e[s+1],i[a+1]);)s++,a++,h++;return h&&t.components.push({count:h}),t.newPos=s,a},tokenize:function(t){return t.slice()},join:function(t){return t.slice()}};var sl=new Jn,al=function(t,e,i){return sl.diff(t,e,i)};ir.prototype={constructor:ir,createElement:Hn,getDefs:function(t){let e=this._svgRoot,i=this._svgRoot.getElementsByTagName("defs");return 0===i.length?t?((i=e.insertBefore(this.createElement("defs"),e.firstChild)).contains||(i.contains=function(t){let e=i.children;if(!e)return!1;for(let i=e.length-1;i>=0;--i)if(e[i]===t)return!0;return!1}),i):null:i[0]},update:function(t,e){if(t){let i=this.getDefs(!1);if(t[this._domName]&&i.contains(t[this._domName]))"function"==typeof e&&e(t);else{let e=this.add(t);e&&(t[this._domName]=e)}}},addDom:function(t){this.getDefs(!0).appendChild(t)},removeDom:function(t){let e=this.getDefs(!1);e&&t[this._domName]&&(e.removeChild(t[this._domName]),t[this._domName]=null)},getDoms:function(){let t=this.getDefs(!1);if(!t)return[];let e=[];return l(this._tagNames,function(i){let n=t.getElementsByTagName(i);e=e.concat([].slice.call(n))}),e},markAllUnused:function(){let t=this;l(this.getDoms(),function(e){e[t._markLabel]="0"})},markUsed:function(t){t&&(t[this._markLabel]="1")},removeUnused:function(){let t=this.getDefs(!1);if(t){let e=this;l(this.getDoms(),function(i){"1"!==i[e._markLabel]&&t.removeChild(i)})}},getSvgProxy:function(t){return t instanceof ga?Kh:t instanceof _s?Jh:t instanceof za?tl:Kh},getTextSvgElement:function(t){return t.__textSvgEl},getSvgElement:function(t){return t.__svgEl}},nr.prototype={constructor:nr,addWithoutUpdate:function(t,e){if(e&&e.style){var i=this;l(["fill","stroke"],function(n){if(e.style[n]&&("linear"===e.style[n].type||"radial"===e.style[n].type)){var r,o=e.style[n],s=i.getDefs(!0);o._dom?(r=o._dom,s.contains(o._dom)||i.addDom(r)):r=i.add(o),i.markUsed(e);var a=r.getAttribute("id");t.setAttribute(n,"url(#"+a+")")}})}},add:function(t){var e;if("linear"===t.type)e=this.createElement("linearGradient");else{if("radial"!==t.type)return console.log("Illegal gradient type."),null;e=this.createElement("radialGradient")}return t.id=t.id||this.nextId++,e.setAttribute("id","zr"+this._zrId+"-gradient-"+t.id),this.updateDom(t,e),this.addDom(e),e},update:function(t){var e=this;ir.prototype.update.call(this,t,function(){var i=t.type,n=t._dom.tagName;"linear"===i&&"linearGradient"===n||"radial"===i&&"radialGradient"===n?e.updateDom(t,t._dom):(e.removeDom(t),e.add(t))})},updateDom:function(t,e){if("linear"===t.type)e.setAttribute("x1",t.x),e.setAttribute("y1",t.y),e.setAttribute("x2",t.x2),e.setAttribute("y2",t.y2);else{if("radial"!==t.type)return void console.log("Illegal gradient type.");e.setAttribute("cx",t.x),e.setAttribute("cy",t.y),e.setAttribute("r",t.r)}t.global?e.setAttribute("gradientUnits","userSpaceOnUse"):e.setAttribute("gradientUnits","objectBoundingBox"),e.innerHTML="";for(var i=t.colorStops,n=0,r=i.length;n<r;++n){var o=this.createElement("stop");o.setAttribute("offset",100*i[n].offset+"%");var s=i[n].color;if(s.indexOf(!1)){var a=he(s)[3],h=fe(s);o.setAttribute("stop-color","#"+h),o.setAttribute("stop-opacity",a)}else o.setAttribute("stop-color",i[n].color);e.appendChild(o)}t._dom=e},markUsed:function(t){if(t.style){var e=t.style.fill;e&&e._dom&&ir.prototype.markUsed.call(this,e._dom),(e=t.style.stroke)&&e._dom&&ir.prototype.markUsed.call(this,e._dom)}}},Q(nr,ir),rr.prototype={constructor:rr,update:function(t){let e=this.getSvgElement(t);e&&this.updateDom(e,t.__clipPaths,!1);let i=this.getTextSvgElement(t);i&&this.updateDom(i,t.__clipPaths,!0),this.markUsed(t)},updateDom:function(t,e,i){if(e&&e.length>0){let n,r,o=this.getDefs(!0),s=e[0],a=i?"_textDom":"_dom";s[a]?(r=s[a].getAttribute("id"),n=s[a],o.contains(n)||o.appendChild(n)):(r="zr"+this._zrId+"-clip-"+this.nextId,++this.nextId,(n=this.createElement("clipPath")).setAttribute("id",r),o.appendChild(n),s[a]=n);let h=this.getSvgProxy(s);if(s.transform&&s.parent.invTransform&&!i){let t=Array.prototype.slice.call(s.transform);jt(s.transform,s.parent.invTransform,s.transform),h.brush(s),s.transform=t}else h.brush(s);let l=this.getSvgElement(s);n.innerHTML="",n.appendChild(l.cloneNode()),t.setAttribute("clip-path","url(#"+r+")"),e.length>1&&this.updateDom(n,e.slice(1),i)}else t&&t.setAttribute("clip-path","none")},markUsed:function(t){let e=this;t.__clipPaths&&l(t.__clipPaths,function(t){t._dom&&ir.prototype.markUsed.call(e,t._dom),t._textDom&&ir.prototype.markUsed.call(e,t._textDom)})}},Q(rr,ir),or.prototype={constructor:or,addWithoutUpdate:function(t,e){if(e&&sr(e.style)){let i;if(e._shadowDom){i=e._shadowDom;let t=this.getDefs(!0);t.contains(e._shadowDom)||this.addDom(i)}else i=this.add(e);this.markUsed(e);let n=i.getAttribute("id");t.style.filter="url(#"+n+")"}},add:function(t){let e=this.createElement("filter");return t._shadowDomId=t._shadowDomId||this.nextId++,e.setAttribute("id","zr"+this._zrId+"-shadow-"+t._shadowDomId),this.updateDom(t,e),this.addDom(e),e},update:function(t,e){if(sr(e.style)){let t=this;ir.prototype.update.call(this,e,function(){t.updateDom(e,e._shadowDom)})}else this.remove(t,e)},remove:function(t,e){null!=e._shadowDomId&&(this.removeDom(t),t.style.filter="")},updateDom:function(t,e){let i=e.getElementsByTagName("feDropShadow");i=0===i.length?this.createElement("feDropShadow"):i[0];let n,r,o,s,a=t.style,h=t.scale?t.scale[0]||1:1,l=t.scale?t.scale[1]||1:1;if(a.shadowBlur||a.shadowOffsetX||a.shadowOffsetY)n=a.shadowOffsetX||0,r=a.shadowOffsetY||0,o=a.shadowBlur,s=a.shadowColor;else{if(!a.textShadowBlur)return void this.removeDom(e,a);n=a.textShadowOffsetX||0,r=a.textShadowOffsetY||0,o=a.textShadowBlur,s=a.textShadowColor}i.setAttribute("dx",n/h),i.setAttribute("dy",r/l),i.setAttribute("flood-color",s);let u=o/2/h+" "+o/2/l;i.setAttribute("stdDeviation",u),e.setAttribute("x","-100%"),e.setAttribute("y","-100%"),e.setAttribute("width",Math.ceil(o/2*200)+"%"),e.setAttribute("height",Math.ceil(o/2*200)+"%"),e.appendChild(i),t._shadowDom=e},markUsed:function(t){t._shadowDom&&ir.prototype.markUsed.call(this,t._shadowDom)}},Q(or,ir);let hl=function(t,e,i,n){this.root=t,this.storage=e,this._opts=i=o({},i||{});let r=Hn("svg");r.setAttribute("xmlns","http://www.w3.org/2000/svg"),r.setAttribute("version","1.1"),r.setAttribute("baseProfile","full"),r.style.cssText="user-select:none;position:absolute;left:0;top:0;",this.gradientManager=new nr(n,r),this.clipPathManager=new rr(n,r),this.shadowManager=new or(n,r);let s=document.createElement("div");s.style.cssText="overflow:hidden;position:relative",this._svgRoot=r,this._viewport=s,t.appendChild(s),s.appendChild(r),this.resize(i.width,i.height),this._visibleList=[]};hl.prototype={constructor:hl,getType:function(){return"svg"},getViewportRoot:function(){return this._viewport},getViewportRootOffset:function(){let t=this.getViewportRoot();if(t)return{offsetLeft:t.offsetLeft||0,offsetTop:t.offsetTop||0}},refresh:function(){let t=this.storage.getDisplayList(!0);this._paintList(t)},setBackgroundColor:function(t){this._viewport.style.background=t},_paintList:function(t){this.gradientManager.markAllUnused(),this.clipPathManager.markAllUnused(),this.shadowManager.markAllUnused();let e,i,n,r=this._svgRoot,o=this._visibleList,s=t.length,a=[];for(e=0;e<s;e++){let n=t[e],r=ar(n);i=dr(n)||fr(n),n.invisible||(n.__dirty&&(r&&r.brush(n),this.clipPathManager.update(n),n.style&&(this.gradientManager.update(n.style.fill),this.gradientManager.update(n.style.stroke),this.shadowManager.update(i,n)),n.__dirty=!1),a.push(n))}let h,l=al(o,a);for(e=0;e<l.length;e++){let t=l[e];if(t.removed)for(let e=0;e<t.count;e++){let s=o[t.indices[e]];i=dr(s),n=fr(s),cr(r,i),cr(r,n)}}for(e=0;e<l.length;e++){let t=l[e];if(t.added)for(let e=0;e<t.count;e++){let o=a[t.indices[e]];i=dr(o),n=fr(o),h?lr(r,i,h):ur(r,i),i?lr(r,n,i):h?lr(r,n,h):ur(r,n),lr(r,n,i),h=n||i||h,this.gradientManager.addWithoutUpdate(i||n,o),this.shadowManager.addWithoutUpdate(i||n,o),this.clipPathManager.markUsed(o)}else if(!t.removed)for(let e=0;e<t.count;e++){let o=a[t.indices[e]];i=dr(o),n=fr(o),i=dr(o),n=fr(o),this.gradientManager.markUsed(o),this.gradientManager.addWithoutUpdate(i||n,o),this.shadowManager.markUsed(o),this.shadowManager.addWithoutUpdate(i||n,o),this.clipPathManager.markUsed(o),n&&lr(r,n,i),h=i||n||h}}this.gradientManager.removeUnused(),this.clipPathManager.removeUnused(),this.shadowManager.removeUnused(),this._visibleList=a},_getDefs:function(t){let e=this._svgRoot,i=this._svgRoot.getElementsByTagName("defs");if(0===i.length){if(t){let t=e.insertBefore(Hn("defs"),e.firstChild);return t.contains||(t.contains=function(e){let i=t.children;if(!i)return!1;for(let t=i.length-1;t>=0;--t)if(i[t]===e)return!0;return!1}),t}return null}return i[0]},resize:function(t,e){let i=this._viewport;i.style.display="none";let n=this._opts;if(null!=t&&(n.width=t),null!=e&&(n.height=e),t=this._getSize(0),e=this._getSize(1),i.style.display="",this._width!==t||this._height!==e){this._width=t,this._height=e;let n=i.style;n.width=t+"px",n.height=e+"px";let r=this._svgRoot;r.setAttribute("width",t),r.setAttribute("height",e)}},getWidth:function(){return this._width},getHeight:function(){return this._height},_getSize:function(t){let e=this._opts,i=["width","height"][t],n=["clientWidth","clientHeight"][t],r=["paddingLeft","paddingTop"][t],o=["paddingRight","paddingBottom"][t];if(null!=e[i]&&"auto"!==e[i])return parseFloat(e[i]);let s=this.root,a=document.defaultView.getComputedStyle(s);return(s[n]||G(a[i])||G(s.style[i]))-(G(a[r])||0)-(G(a[o])||0)|0},dispose:function(){this.root.innerHTML="",this._svgRoot=this._viewport=this.storage=null},clear:function(){this._viewport&&this.root.removeChild(this._viewport)},pathToDataUrl:function(){return this.refresh(),"data:image/svg+xml;charset=UTF-8,"+this._svgRoot.outerHTML}},["getLayer","insertLayer","eachLayer","eachBuiltinLayer","eachOtherLayer","getLayers","modLayer","delLayer","clearLayer","toDataURL","pathToImage"].forEach((t,e)=>{hl.prototype[t]=pr(t)}),Oi("svg",hl);let ll,ul="urn:schemas-microsoft-com:vml",cl="undefined"==typeof window?null:window,fl=!1,dl=cl&&cl.document;if(dl&&!br.canvasSupported)try{!dl.namespaces.zrvml&&dl.namespaces.add("zrvml",ul),ll=function(t){return dl.createElement("<zrvml:"+t+' class="zrvml">')}}catch(t){ll=function(t){return dl.createElement("<"+t+' xmlns="'+ul+'" class="zrvml">')}}let pl=aa.CMD,gl=Math.round,_l=Math.sqrt,ml=Math.abs,yl=Math.cos,vl=Math.sin,xl=Math.max;if(!br.canvasSupported){let t="progid:DXImageTransform.Microsoft",e=21600,i=e/2,n=function(t){t.style.cssText="position:absolute;left:0;top:0;width:1px;height:1px;",t.coordsize=e+","+e,t.coordorigin="0,0"},r=function(t){return String(t).replace(/&/g,"&amp;").replace(/"/g,"&quot;")},o=function(t,e,i){return"rgb("+[t,e,i].join(",")+")"},s=function(t,e){e&&t&&e.parentNode!==t&&t.appendChild(e)},a=function(t,e){e&&t&&e.parentNode===t&&t.removeChild(e)},h=function(t,e,i){return 1e5*(parseFloat(t)||0)+1e3*(parseFloat(e)||0)+i},l=gi,u=function(t,e,i){let n=he(e);i=+i,isNaN(i)&&(i=1),n&&(t.color=o(n[0],n[1],n[2]),t.opacity=i*n[3])},c=function(t){let e=he(t);return[o(e[0],e[1],e[2]),e[3]]},f=function(t,i,n){let r=i.fill;if(null!=r)if(r instanceof Ga){let o,s=0,a=[0,0],h=0,l=1,u=n.getBoundingRect(),f=u.width,d=u.height;if("linear"===r.type){o="gradient";let t=n.transform,e=[r.x*f,r.y*d],i=[r.x2*f,r.y2*d];t&&(yt(e,e,t),yt(i,i,t));let a=i[0]-e[0],h=i[1]-e[1];(s=180*Math.atan2(a,h)/Math.PI)<0&&(s+=360),s<1e-6&&(s=0)}else{o="gradientradial";let t=[r.x*f,r.y*d],i=n.transform,s=n.scale,c=f,p=d;a=[(t[0]-u.x)/c,(t[1]-u.y)/p],i&&yt(t,t,i),c/=s[0]*e,p/=s[1]*e;let g=xl(c,p);h=0/g,l=2*r.r/g-h}let p=r.colorStops.slice();p.sort(function(t,e){return t.offset-e.offset});let g=p.length,_=[],m=[];for(let t=0;t<g;t++){let e=p[t],i=c(e.color);m.push(e.offset*l+h+" "+i[0]),0!==t&&t!==g-1||_.push(i)}if(g>=2){let e=_[0][0],n=_[1][0],r=_[0][1]*i.opacity,a=_[1][1]*i.opacity;t.type=o,t.method="none",t.focus="100%",t.angle=s,t.color=e,t.color2=n,t.colors=m.join(","),t.opacity=a,t.opacity2=r}"radial"===o&&(t.focusposition=a.join(","))}else u(t,r,i.opacity)},d=function(t,e){e.lineDash&&(t.dashstyle=e.lineDash.join(" ")),null==e.stroke||e.stroke instanceof Ga||u(t,e.stroke,e.opacity)},p=function(t,e,i,n){let r="fill"===e,o=t.getElementsByTagName(e)[0];null!=i[e]&&"none"!==i[e]&&(r||!r&&i.lineWidth)?(t[r?"filled":"stroked"]="true",i[e]instanceof Ga&&a(t,o),o||(o=_r(e)),r?f(o,i,n):d(o,i),s(t,o)):(t[r?"filled":"stroked"]="false",a(t,o))},g=[[],[],[]],_=function(t,n){let r,o,s,a,h,l,u,c,f,d,p,_,m,y,v,x,w,b,k,T,S,M,C=pl.M,A=pl.C,P=pl.L,L=pl.A,z=pl.Q,D=[],E=t.data,I=t.len();for(a=0;a<I;){switch(s=E[a++],o="",r=0,s){case C:o=" m ",r=1,h=E[a++],l=E[a++],g[0][0]=h,g[0][1]=l;break;case P:o=" l ",r=1,h=E[a++],l=E[a++],g[0][0]=h,g[0][1]=l;break;case z:case A:o=" c ",r=3,p=E[a++],_=E[a++],m=E[a++],y=E[a++],s===z?(v=m,x=y,m=(m+2*p)/3,y=(y+2*_)/3,p=(h+2*p)/3,_=(l+2*_)/3):(v=E[a++],x=E[a++]),g[0][0]=p,g[0][1]=_,g[1][0]=m,g[1][1]=y,g[2][0]=v,g[2][1]=x,h=v,l=x;break;case L:u=0,c=0,k=1,T=1;let t=0;n&&(u=n[4],c=n[5],k=_l(n[0]*n[0]+n[1]*n[1]),T=_l(n[2]*n[2]+n[3]*n[3]),t=Math.atan2(-n[1]/T,n[0]/k)),w=E[a++],b=E[a++],S=E[a++],M=E[a++];let I=E[a++]+t,B=E[a++]+I+t;a++;let O=E[a++];f=w+yl(I)*S,d=b+vl(I)*M,p=w+yl(B)*S,_=b+vl(B)*M;let R=O?" wa ":" at ";Math.abs(f-p)<1e-4&&(Math.abs(B-I)>.01?O&&(f+=.0125):Math.abs(d-b)<1e-4?O&&f<w||!O&&f>w?_-=.0125:_+=.0125:O&&d<b||!O&&d>b?p+=.0125:p-=.0125),D.push(R,gl(((w-S)*k+u)*e-i),",",gl(((b-M)*T+c)*e-i),",",gl(((w+S)*k+u)*e-i),",",gl(((b+M)*T+c)*e-i),",",gl((f*k+u)*e-i),",",gl((d*T+c)*e-i),",",gl((p*k+u)*e-i),",",gl((_*T+c)*e-i)),h=p,l=_;break;case pl.R:let F=g[0],H=g[1];F[0]=E[a++],F[1]=E[a++],H[0]=F[0]+E[a++],H[1]=F[1]+E[a++],n&&(yt(F,F,n),yt(H,H,n)),F[0]=gl(F[0]*e-i),H[0]=gl(H[0]*e-i),F[1]=gl(F[1]*e-i),H[1]=gl(H[1]*e-i),D.push(" m ",F[0],",",F[1]," l ",H[0],",",F[1]," l ",H[0],",",H[1]," l ",F[0],",",H[1]);break;case pl.Z:D.push(" x ")}if(r>0){D.push(o);for(let t=0;t<r;t++){let o=g[t];n&&yt(o,o,n),D.push(gl(o[0]*e-i),",",gl(o[1]*e-i),t<r-1?",":"")}}}return D.join("")};ga.prototype.brushVML=function(t){let e=this.style,i=this._vmlEl;i||(i=_r("shape"),n(i),this._vmlEl=i),p(i,"fill",e,this),p(i,"stroke",e,this);let r=this.transform,o=null!=r,a=i.getElementsByTagName("stroke")[0];if(a){let t=e.lineWidth;if(o&&!e.strokeNoScale){let e=r[0]*r[3]-r[1]*r[2];t*=_l(ml(e))}a.weight=t+"px"}let l=this.path||(this.path=new aa);this.__dirtyPath&&(l.beginPath(),l.subPixelOptimize=!1,this.buildPath(l,this.shape),l.toStatic(),this.__dirtyPath=!1),i.path=_(l,this.transform),i.style.zIndex=h(this.zlevel,this.z,this.z2),s(t,i),null!=e.text?this.drawRectText(t,this.getBoundingRect()):this.removeRectText(t)},ga.prototype.onRemove=function(t){a(t,this._vmlEl),this.removeRectText(t)},ga.prototype.onAdd=function(t){s(t,this._vmlEl),this.appendRectText(t)};let m=function(t){return"object"==typeof t&&t.tagName&&"IMG"===t.tagName.toUpperCase()};_s.prototype.brushVML=function(e){let i,r,o=this.style,a=o.image;if(m(a)){let t=a.src;if(t===this._imageSrc)i=this._imageWidth,r=this._imageHeight;else{let e=a.runtimeStyle,n=e.width,o=e.height;e.width="auto",e.height="auto",i=a.width,r=a.height,e.width=n,e.height=o,this._imageSrc=t,this._imageWidth=i,this._imageHeight=r}a=t}else a===this._imageSrc&&(i=this._imageWidth,r=this._imageHeight);if(a){let l=o.x||0,u=o.y||0,c=o.width,f=o.height,d=o.sWidth,p=o.sHeight,g=o.sx||0,_=o.sy||0,m=d&&p,y=this._vmlEl;y||(y=dl.createElement("div"),n(y),this._vmlEl=y);let v,x=y.style,w=!1,b=1,k=1;if(this.transform&&(v=this.transform,b=_l(v[0]*v[0]+v[1]*v[1]),k=_l(v[2]*v[2]+v[3]*v[3]),w=v[1]||v[2]),w){let e=[l,u],i=[l+c,u],n=[l,u+f],r=[l+c,u+f];yt(e,e,v),yt(i,i,v),yt(n,n,v),yt(r,r,v);let o=xl(e[0],i[0],n[0],r[0]),s=xl(e[1],i[1],n[1],r[1]),a=[];a.push("M11=",v[0]/b,",","M12=",v[2]/k,",","M21=",v[1]/b,",","M22=",v[3]/k,",","Dx=",gl(l*b+v[4]),",","Dy=",gl(u*k+v[5])),x.padding="0 "+gl(o)+"px "+gl(s)+"px 0",x.filter=t+".Matrix("+a.join("")+", SizingMethod=clip)"}else v&&(l=l*b+v[4],u=u*k+v[5]),x.filter="",x.left=gl(l)+"px",x.top=gl(u)+"px";let T=this._imageEl,S=this._cropEl;T||(T=dl.createElement("div"),this._imageEl=T);let M=T.style;if(m){if(i&&r)M.width=gl(b*i*c/d)+"px",M.height=gl(k*r*f/p)+"px";else{let t=new Image,e=this;t.onload=function(){t.onload=null,i=t.width,r=t.height,M.width=gl(b*i*c/d)+"px",M.height=gl(k*r*f/p)+"px",e._imageWidth=i,e._imageHeight=r,e._imageSrc=a},t.src=a}S||((S=dl.createElement("div")).style.overflow="hidden",this._cropEl=S);let e=S.style;e.width=gl((c+g*c/d)*b),e.height=gl((f+_*f/p)*k),e.filter=t+".Matrix(Dx="+-g*c/d*b+",Dy="+-_*f/p*k+")",S.parentNode||y.appendChild(S),T.parentNode!==S&&S.appendChild(T)}else M.width=gl(b*c)+"px",M.height=gl(k*f)+"px",y.appendChild(T),S&&S.parentNode&&(y.removeChild(S),this._cropEl=null);let C="",A=o.opacity;A<1&&(C+=".Alpha(opacity="+gl(100*A)+") "),C+=t+".AlphaImageLoader(src="+a+", SizingMethod=scale)",M.filter=C,y.style.zIndex=h(this.zlevel,this.z,this.z2),s(e,y),null!=o.text&&this.drawRectText(e,this.getBoundingRect())}},_s.prototype.onRemove=function(t){a(t,this._vmlEl),this._vmlEl=null,this._cropEl=null,this._imageEl=null,this.removeRectText(t)},_s.prototype.onAdd=function(t){s(t,this._vmlEl),this.appendRectText(t)};let y,v={},x=0,w=document.createElement("div"),b=function(t){let e=v[t];if(!e){x>100&&(x=0,v={});let i,n=w.style;try{n.font=t,i=n.fontFamily.split(",")[0]}catch(t){}e={style:n.fontStyle||"normal",variant:n.fontVariant||"normal",weight:n.fontWeight||"normal",size:0|parseFloat(n.fontSize||12),family:i||"Microsoft YaHei"},v[t]=e,x++}return e};!function(t,e){ss[t]=e}("measureText",function(t,e){let i=dl;y||((y=i.createElement("div")).style.cssText="position:absolute;top:-20000px;left:0;padding:0;margin:0;border:none;white-space:pre;",dl.body.appendChild(y));try{y.style.font=e}catch(t){}return y.innerHTML="",y.appendChild(i.createTextNode(t)),{width:y.offsetWidth}});let k=new Ro,T=function(t,e,i,o){let a=this.style;this.__dirty&&ti(a);let u=a.text;if(null!=u&&(u+=""),u){if(a.rich){let t=Ze(u,a);u=[];for(let e=0;e<t.lines.length;e++){let i=t.lines[e].tokens,n=[];for(let t=0;t<i.length;t++)n.push(i[t].text);u.push(n.join(""))}u=u.join("\n")}let c,f,d=a.textAlign,g=a.textVerticalAlign,_=b(a.font),m=_.style+" "+_.variant+" "+_.weight+" "+_.size+'px "'+_.family+'"';i=i||Re(u,m,d,g,a.textPadding,a.textLineHeight);let y=this.transform;if(y&&!o&&(k.copy(e),k.applyTransform(y),e=k),o)c=e.x,f=e.y;else{let t=a.textPosition;if(t instanceof Array)c=e.x+l(t[0],e.width),f=e.y+l(t[1],e.height),d=d||"left";else{let t=this.calculateTextPosition?this.calculateTextPosition({},a,e):Ve({},a,e);c=t.x,f=t.y,d=d||t.textAlign,g=g||t.textVerticalAlign}}c=Ne(c,i.width,d),f=We(f,i.height,g),f+=i.height/2;let v,x,w,T=_r,S=this._textVmlEl;S?x=(v=(w=S.firstChild).nextSibling).nextSibling:(S=T("line"),v=T("path"),x=T("textpath"),w=T("skew"),x.style["v-text-align"]="left",n(S),v.textpathok=!0,x.on=!0,S.from="0 0",S.to="1000 0.05",s(S,w),s(S,v),s(S,x),this._textVmlEl=S);let M=[c,f],C=S.style;y&&o?(yt(M,M,y),w.on=!0,w.matrix=y[0].toFixed(3)+","+y[2].toFixed(3)+","+y[1].toFixed(3)+","+y[3].toFixed(3)+",0,0",w.offset=(gl(M[0])||0)+","+(gl(M[1])||0),w.origin="0 0",C.left="0px",C.top="0px"):(w.on=!1,C.left=gl(c)+"px",C.top=gl(f)+"px"),x.string=r(u);try{x.style.font=m}catch(t){}p(S,"fill",{fill:a.textFill,opacity:a.opacity},this),p(S,"stroke",{stroke:a.textStroke,opacity:a.opacity,lineDash:a.lineDash||null},this),S.style.zIndex=h(this.zlevel,this.z,this.z2),s(t,S)}},S=function(t){a(t,this._textVmlEl),this._textVmlEl=null},M=function(t){s(t,this._textVmlEl)},C=[ps,gs,_s,ga,za];for(let t=0;t<C.length;t++){let e=C[t].prototype;e.drawRectText=T,e.removeRectText=S,e.appendRectText=M}za.prototype.brushVML=function(t){let e=this.style;null!=e.text?this.drawRectText(t,{x:e.x||0,y:e.y||0,width:0,height:0},this.getBoundingRect(),!0):this.removeRectText(t)},za.prototype.onRemove=function(t){this.removeRectText(t)},za.prototype.onAdd=function(t){this.appendRectText(t)}}mr.prototype={constructor:mr,getType:function(){return"vml"},getViewportRoot:function(){return this._vmlViewport},getViewportRootOffset:function(){let t=this.getViewportRoot();if(t)return{offsetLeft:t.offsetLeft||0,offsetTop:t.offsetTop||0}},refresh:function(){let t=this.storage.getDisplayList(!0,!0);this._paintList(t)},_paintList:function(t){let e=this._vmlRoot;for(let i=0;i<t.length;i++){let n=t[i];n.invisible||n.ignore?(n.__alreadyNotVisible||n.onRemove(e),n.__alreadyNotVisible=!0):(n.__alreadyNotVisible&&n.onAdd(e),n.__alreadyNotVisible=!1,n.__dirty&&(n.beforeBrush&&n.beforeBrush(),(n.brushVML||n.brush).call(n,e),n.afterBrush&&n.afterBrush())),n.__dirty=!1}this._firstPaint&&(this._vmlViewport.appendChild(e),this._firstPaint=!1)},resize:function(t,e){if(t=null==t?this._getWidth():t,e=null==e?this._getHeight():e,this._width!==t||this._height!==e){this._width=t,this._height=e;let i=this._vmlViewport.style;i.width=t+"px",i.height=e+"px"}},dispose:function(){this.root.innerHTML="",this._vmlRoot=this._vmlViewport=this.storage=null},getWidth:function(){return this._width},getHeight:function(){return this._height},clear:function(){this._vmlViewport&&this.root.removeChild(this._vmlViewport)},_getWidth:function(){let t=this.root,e=t.currentStyle;return(t.clientWidth||G(e.width))-G(e.paddingLeft)-G(e.paddingRight)|0},_getHeight:function(){let t=this.root,e=t.currentStyle;return(t.clientHeight||G(e.height))-G(e.paddingTop)-G(e.paddingBottom)|0}},["getLayer","insertLayer","eachLayer","eachBuiltinLayer","eachOtherLayer","getLayers","modLayer","delLayer","clearLayer","toDataURL","pathToImage"].forEach((t,e)=>{mr.prototype[t]=yr(t)}),Oi("vml",mr),t.version="4.1.2",t.init=Ei,t.dispose=Ii,t.getInstance=Bi,t.registerPainter=Oi,t.matrix=ro,t.vector=Vr,t.color=So,t.path=La,t.util=Or,t.parseSVG=On,t.Group=Fo,t.Path=ga,t.Image=_s,t.CompoundPath=rh,t.Text=za,t.IncrementalDisplayable=Rn,t.Arc=ah,t.BezierCurve=uh,t.Circle=Ea,t.Droplet=fh,t.Ellipse=Ha,t.Heart=ph,t.Isogon=vh,t.Line=Wa,t.Polygon=ja,t.Polyline=Ua,t.Rect=Ra,t.Ring=wh,t.Rose=Mh,t.Sector=Lh,t.Star=Bh,t.Trochoid=Hh,t.LinearGradient=Qa,t.RadialGradient=Nh,t.Pattern=Ko,t.BoundingRect=Ro});
